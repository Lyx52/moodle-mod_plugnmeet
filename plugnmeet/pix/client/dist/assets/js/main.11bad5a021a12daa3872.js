(self.webpackChunkplugnmeet=self.webpackChunkplugnmeet||[]).push([[179],{934:(e,t,n)=>{"use strict";var r,o=n(5893),i=n(7294),a=n(3935),s=n(6372),c=n(9249),l=(n(1407),n(4399)),u=(0,l.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),d=u.getSelectors((function(e){return e.activeSpeakers})),v=(0,l.oM)({name:"activeSpeakers",initialState:u.getInitialState(),reducers:{addSpeaker:u.addOne,addManySpeakers:u.addMany,removeSpeakers:u.removeAll}}),f=(r=v.actions).addSpeaker,p=r.addManySpeakers,h=r.removeSpeakers;const m=v.reducer;var x,b=(0,l.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),y=b.getSelectors((function(e){return e.participants})),g=(0,l.oM)({name:"participants",initialState:b.getInitialState(),reducers:{addParticipant:b.addOne,removeParticipant:b.removeOne,updateParticipant:b.updateOne}}),w=(x=g.actions).addParticipant,j=x.removeParticipant,S=x.updateParticipant;const k=g.reducer;var N,_=(0,l.oM)({name:"session",initialState:{token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,chat_features:{allow_chat:!0,allow_file_upload:!0}}}}},reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currenUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currenUser&&(e.currenUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)}}}),T=(N=_.actions).addToken,P=N.toggleStartup,A=N.addCurrentUser,R=N.addCurrentRoom,O=N.updateScreenSharing,C=N.setWebcamPaginating,E=N.updateCurrentUserMetadata,I=N.updateCurrentRoomMetadata,M=N.updateIsChatServiceReady,F=N.updateTotalVideoSubscribers,U=N.updateTotalAudioSubscribers,L=N.updateMuteOnStart;const D=_.reducer;var V,W=(0,l.oM)({name:"bottomIconsActivity",initialState:{isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveMenu:!1,isActiveEndSession:!1,isMicMuted:!1,screenWidth:1024,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,startMicrophoneShare:!1,startWebcamShare:!1,startRecording:!1},reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload},updateIsActiveMenu:function(e,t){e.isActiveMenu=t.payload},updateIsActiveEndSession:function(e,t){e.isActiveEndSession=t.payload},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateStartMicrophoneShare:function(e,t){e.startMicrophoneShare=t.payload},updateStartWebcamShare:function(e,t){e.startWebcamShare=t.payload},updateStartRecording:function(e,t){e.startRecording=t.payload}}}),B=(V=W.actions).updateIsActiveMicrophone,z=V.updateIsMicMuted,G=V.updateIsActiveWebcam,H=V.updateIsActiveChatPanel,J=V.updateIsActiveParticipantsPanel,Y=V.updateIsActiveRaisehand,K=(V.updateIsActiveRecording,V.updateIsActiveScreenshare),Q=(V.updateIsActiveMenu,V.updateIsActiveEndSession,V.updateShowMicrophoneModal),q=V.updateShowVideoShareModal,X=V.updateShowLockSettingsModal,Z=V.updateShowRtmpModal,$=(V.updateStartMicrophoneShare,V.updateStartWebcamShare,V.updateStartRecording,V.updateScreenWidth);const ee=W.reducer;var te,ne=(0,l.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),re=ne.getSelectors((function(e){return e.chatMessages})),oe=(0,l.oM)({name:"chat-messages",initialState:ne.getInitialState(),reducers:{addChatMessage:ne.addOne,removeChatMessage:ne.removeOne,updateChatMessage:ne.updateOne}}),ie=(te=oe.actions).addChatMessage;te.removeChatMessage,te.updateChatMessage;const ae=oe.reducer;var se,ce=(0,l.oM)({name:"room-settings",initialState:{isShowRoomSettingsModal:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0},reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload}}}),le=(se=ce.actions).addAudioDevices,ue=se.addVideoDevices,de=se.updateSelectedAudioDevice,ve=se.updateSelectedVideoDevice,fe=se.updatePlayAudioNotification,pe=se.updateShowRoomSettingsModal,he=se.updateActivateWebcamsView,me=se.updateActiveScreenSharingView,xe=se.updateAllowPlayAudioNotification;const be=ce.reducer;var ye=(0,l.xC)({reducer:{participants:k,activeSpeakers:m,session:D,bottomIconsActivity:ee,chatMessages:ae,roomSettings:be},devTools:!1}),ge=function(){return(0,s.I0)()},we=s.v9,je=n(2437),Se=n.n(je),ke=function(){return ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ke.apply(this,arguments)};const Ne=function(e){var t,n=e.title,r=e.text,i=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",ke({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(i,"/imgs/app-banner.jpg"),alt:"AppBG"},void 0),(0,o.jsxs)("div",ke({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] pt"},{children:[(0,o.jsx)("h2",ke({className:"text-3xl font-medium mb-4 mt-[88px]"},{children:n}),void 0),(0,o.jsx)("p",{children:r},void 0)]}),void 0)]}),void 0)};var _e=function(){return _e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_e.apply(this,arguments)};const Te=function(e){var t=e.text;return(0,o.jsx)("div",_e({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",_e({className:"inner"},{children:[(0,o.jsxs)("div",_e({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0),(0,o.jsx)("p",_e({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}),void 0)]}),void 0)}),void 0)};var Pe=n(573),Ae=n(8219),Re=n(1561),Oe=n(7444),Ce=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Ie(e){return Ce(this,void 0,void 0,(function(){var t,n,r;return Ee(this,(function(o){switch(o.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:return r=(r=o.sent()).filter((function(t){return t.kind===e})),n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}const Me=function(e){var t=e.deviceId,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current,o={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(o).then((function(t){r&&(e=t,r.srcObject=t)})),function(){r&&(r.pause(),r.removeAttribute("src")),e&&e.getTracks().forEach((function(e){e.stop()}))}}),[t]),(0,o.jsx)("div",{children:(0,o.jsx)("video",{className:"mt-5 mb-5",ref:n,autoPlay:!0,height:"50"},void 0)},void 0)};var Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fe.apply(this,arguments)},Ue=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},De=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ve=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const We=function(e){var t=e.currentRoom,n=we(Ve),r=De((0,i.useState)(!0),2),a=r[0],s=r[1],c=De((0,i.useState)(""),2),l=c[0],u=c[1],d=De((0,i.useState)([]),2),v=d[0],f=d[1],p=ge();(0,i.useEffect)((function(){Ue(void 0,void 0,void 0,(function(){var e,t,n;return Le(this,(function(r){switch(r.label){case 0:return[4,Ie("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",Fe({value:e.deviceId},{children:e.label}),e.deviceId)})),f(n),u(e[0].deviceId),t.length&&p(ue(t)),[2]}}))}))}),[p]),(0,i.useEffect)((function(){n&&s(!0)}),[n]);var h=function(){s(!1),p(q(!1)),p(G(!1))};return(0,o.jsx)(i.Fragment,{children:n?(0,o.jsx)(Re.u,Fe({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Oe.V,Fe({open:a,onClose:function(){return h()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Fe({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",Fe({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Fe({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return h()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,Fe({className:"mb-6"},{children:"Select webcam"}),void 0),(0,o.jsx)("div",Fe({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",Fe({value:l,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:v}),void 0)}),void 0),(0,o.jsx)("div",Fe({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Me,{deviceId:l},void 0)}),void 0),(0,o.jsx)("div",Fe({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",Fe({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return Ue(void 0,void 0,void 0,(function(){return Le(this,(function(e){switch(e.label){case 0:return h(),l?[4,(0,Ae.createLocalTracks)({audio:!1,video:{deviceId:l,resolution:Ae.VideoPresets.hd}})]:[2];case 1:return e.sent().forEach((function(e){return Ue(void 0,void 0,void 0,(function(){return Le(this,(function(n){switch(n.label){case 0:return e.kind!==Ae.Track.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e)];case 1:n.sent(),p(G(!0)),n.label=2;case 2:return[2]}}))}))})),p(ve(l)),[2]}}))}))}},{children:"Share"}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0):null},void 0)};var Be=n(7973),ze=function(){return ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ze.apply(this,arguments)},Ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},He=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Je=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ye=(0,Pe.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),Ke=(0,Pe.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const Qe=function(e){var t=e.currentRoom,n=ge(),r=we(Ye),a=we(Ke),s=Je((0,i.useState)(),2),c=s[0],l=s[1],u=Je((0,i.useState)(),2),d=u[0],v=u[1];(0,i.useEffect)((function(){var e=r.map((function(e){return(0,o.jsx)("div",ze({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:function(){return(0,o.jsx)("p",ze({className:"".concat(a===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return v(e.id)}},{children:e.label}),void 0)}},void 0)}),e.id)}));l(e)}),[a,r]),(0,i.useEffect)((function(){var e;d&&(e=d,Ge(void 0,void 0,void 0,(function(){return He(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))})),n(ve(d)))}),[d,t,n]);return(0,o.jsxs)(Be.v.Items,ze({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[c,(0,o.jsx)("div",ze({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:function(){return(0,o.jsx)("p",ze({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Ge(void 0,void 0,void 0,(function(){return He(this,(function(n){return e.track&&e.track.source===Ae.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(G(!1)),void n(ve(""))}},{children:"Leave webcam"}),void 0)}},void 0)}),void 0)]}),void 0)};var qe=function(){return qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qe.apply(this,arguments)};const Xe=function(e){var t=e.currentRoom;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(Be.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Be.v.Button,{children:[(0,o.jsx)("div",qe({className:"camera relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer has-tooltip"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 text-[10px] lg:text-[14px]"},void 0)}),void 0),(0,o.jsx)("div",qe({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"},void 0)}),void 0)]},void 0),(0,o.jsx)(Re.u,qe({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Qe,{currentRoom:t},void 0)}),void 0)]},void 0)}},void 0)},void 0)};var Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ze.apply(this,arguments)},$e=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},et=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),tt=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),nt=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e}));const rt=function(e){var t=e.currentRoom,n=ge(),r=we(tt),a=we(et),s=we(nt),c=$e((0,i.useState)(!0),2),l=c[0],u=c[1],d=$e((0,i.useState)(!1),2),v=d[0],f=d[1];(0,i.useEffect)((function(){var e,t,n,r=ye.getState().session,o=r.currentRoom.metadata,i=r.currenUser;(null===(e=o.room_features)||void 0===e?void 0:e.allow_webcams)?(null===(t=o.room_features)||void 0===t?void 0:t.admin_only_webcams)&&!(null===(n=null===i||void 0===i?void 0:i.metadata)||void 0===n?void 0:n.is_admin)&&u(!1):u(!1)}),[]),(0,i.useEffect)((function(){if(s){f(!0);var e=y.selectById(ye.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===Ae.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(G(!1)))}else f(!1)}),[s,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ye.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,i=null===(r=null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==s&&f(!0)}),[]);return(0,o.jsx)(i.Fragment,{children:l?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)("div",Ze({className:"camera relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){v||a||n(q(!a))}},{children:[a?null:(0,o.jsx)("span",Ze({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s?"Webcam locked":"Start webcam"}),void 0),(0,o.jsxs)(i.Fragment,{children:[a?null:(0,o.jsx)("i",{className:"pnm-webcam brand-color1 text-[10px] lg:text-[14px]"},void 0),v?(0,o.jsx)("div",Ze({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0),a?(0,o.jsx)(Xe,{currentRoom:t},void 0):null]}),void 0),r?(0,o.jsx)(We,{currentRoom:t},void 0):null]},void 0):null},void 0)};var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ot.apply(this,arguments)},it=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},at=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},st=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ct=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const lt=function(e){var t,n,r=e.currentRoom,a=we(ct),s=st((0,i.useState)(!0),2),c=s[0],l=s[1],u=st((0,i.useState)(""),2),d=u[0],v=u[1],f=st((0,i.useState)([]),2),p=f[0],h=f[1],m=ge(),x=null!==(n=null===(t=ye.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,i.useEffect)((function(){it(void 0,void 0,void 0,(function(){var e,t,n;return at(this,(function(r){switch(r.label){case 0:return[4,Ie("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",ot({value:e.deviceId},{children:e.label}),e.deviceId)})),h(n),v(e[0].deviceId),t.length&&m(le(t)),[2]}}))}))}),[m]),(0,i.useEffect)((function(){a&&l(!0)}),[a]);var b=function(){l(!1),m(Q(!1))};return(0,o.jsx)(i.Fragment,{children:a?(0,o.jsx)(Re.u,ot({show:c,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Oe.V,ot({open:c,onClose:function(){return b()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",ot({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",ot({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",ot({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,ot({className:"mb-6"},{children:"Select one microphone"}),void 0),(0,o.jsx)("div",ot({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",ot({value:d,onChange:function(e){return v(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:p}),void 0)}),void 0),(0,o.jsx)("div",ot({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",ot({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return it(void 0,void 0,void 0,(function(){return at(this,(function(e){switch(e.label){case 0:return l(!1),m(Q(!1)),d?[4,(0,Ae.createLocalTracks)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return it(void 0,void 0,void 0,(function(){return at(this,(function(t){switch(t.label){case 0:return e.kind!==Ae.Track.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),m(B(!0)),t.label=2;case 2:return[2]}}))}))})),x&&setTimeout((function(){return it(void 0,void 0,void 0,(function(){return at(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return it(void 0,void 0,void 0,(function(){return at(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ae.Track.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),m(z(!0)),m(L(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),m(de(d)),[2]}}))}))}},{children:"Join"}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0):null},void 0)};var ut=function(){return ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ut.apply(this,arguments)},dt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ft=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},pt=(0,Pe.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),ht=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),mt=(0,Pe.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const xt=function(e){var t=e.currentRoom,n=ge(),r=we(pt),a=we(ht),s=we(mt),c=ft((0,i.useState)(),2),l=c[0],u=c[1],d=ft((0,i.useState)(),2),v=d[0],f=d[1];(0,i.useEffect)((function(){var e=r.map((function(e){return(0,o.jsx)("div",ut({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:function(){return(0,o.jsx)("p",ut({className:"".concat(s===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return f(e.id)}},{children:e.label}),void 0)}},void 0)}),e.id)}));u(e)}),[r,s]),(0,i.useEffect)((function(){var e;v&&(e=v,dt(void 0,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(de(v)))}),[v,t,n]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(Be.v.Items,ut({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[l,(0,o.jsx)("div",ut({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:function(){return(0,o.jsx)("p",ut({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-brandColor1 hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return dt(void 0,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ae.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(z(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(z(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:a?"Unmute microphone":"Mute microphone"}),void 0)}},void 0)}),void 0),(0,o.jsx)("div",ut({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:function(){return(0,o.jsx)("p",ut({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return dt(void 0,void 0,void 0,(function(){return vt(this,(function(n){return e.track&&e.kind===Ae.Track.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(B(!1)),n(z(!1)),void n(de(""))}},{children:"Leave microphone"}),void 0)}},void 0)}),void 0)]}),void 0)},void 0)};var bt=function(){return bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bt.apply(this,arguments)},yt=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const gt=function(e){var t=e.currentRoom,n=we(yt);return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",{children:(0,o.jsx)(Be.v,{children:function(e){var r=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Be.v.Button,{children:[(0,o.jsxs)("div",bt({className:"microphone relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:[n?null:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 text-[10px] lg:text-[14px]"},void 0),n?(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 text-[10px] lg:text-[14px]"},void 0):null]}),void 0),(0,o.jsx)("div",bt({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"},void 0)}),void 0)]},void 0),(0,o.jsx)(Re.u,bt({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(xt,{currentRoom:t},void 0)}),void 0)]},void 0)}},void 0)},void 0)},void 0)};var wt=function(){return wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wt.apply(this,arguments)},jt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},St=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),kt=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),Nt=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e}));const _t=function(e){var t=e.currentRoom,n=ge(),r=we(kt),a=we(St),s=we(Nt),c=jt((0,i.useState)(!1),2),l=c[0],u=c[1];(0,i.useEffect)((function(){if(s){u(!0);var e=y.selectById(ye.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===Ae.Track.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(B(!1)),n(z(!1)))}else u(!1)}),[s,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ye.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,i=null===(r=null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==s&&u(!0)}),[]);return(0,o.jsxs)("div",{children:[r?(0,o.jsx)(lt,{currentRoom:t},void 0):null,(0,o.jsxs)("div",wt({className:"microphone relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){l||a||n(Q(!0))}},{children:[a?null:(0,o.jsx)("span",wt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:l?"Microphone locked":"Start microphone sharing"}),void 0),a?null:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-[10px] lg:text-[14px]"},void 0),l?(0,o.jsx)("div",wt({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0),a?(0,o.jsx)(gt,{currentRoom:t},void 0):null]}),void 0)]},void 0)};var Tt=function(){return Tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tt.apply(this,arguments)},Pt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},At=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e}));const Rt=function(){var e=ge(),t=we(At),n=Pt((0,i.useState)("brand-color1"),2),r=n[0],a=n[1],s=Pt((0,i.useState)(!0),2),c=s[0],l=s[1];(0,i.useEffect)((function(){a(t?"brand-color2":"brand-color1")}),[t]),(0,i.useEffect)((function(){var t;(null===(t=ye.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(l(!1),e(H(!1)))}),[e]);return(0,o.jsx)(i.Fragment,{children:c?(0,o.jsxs)("div",Tt({className:"message h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){e(H(!t))}},{children:[(0,o.jsx)("span",Tt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:t?"Hide chat panel":"Show chat panel"}),void 0),(0,o.jsx)("i",{className:"pnm-chat ".concat(r," text-[12px] lg:text-[16px]")},void 0)]}),void 0):null},void 0)};var Ot=function(){return Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ot.apply(this,arguments)},Ct=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Et=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const It=function(){var e=ge(),t=we(Et),n=Ct((0,i.useState)("brand-color1"),2),r=n[0],a=n[1];(0,i.useEffect)((function(){a(t?"brand-color2":"brand-color1")}),[t]);return(0,o.jsxs)("div",Ot({className:"participants h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){e(J(!t))}},{children:[(0,o.jsx)("span",Ot({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:t?"Hide users' list":"Show users' list"}),void 0),(0,o.jsx)("i",{className:"pnm-participant ".concat(r," text-[12px] lg:text-[16px]")},void 0)]}),void 0)};var Mt=n(9669),Ft=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ut=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Lt=n.n(Mt)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),Dt=function(){if(ye.getState().session.token)return ye.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const Vt=function(e,t){return Ft(void 0,void 0,void 0,(function(){return Ut(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Lt.post(e,JSON.stringify(t),{headers:{Authorization:Dt(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var Wt,Bt;!function(e){e.USER="USER",e.SYSTEM="SYSTEM"}(Wt||(Wt={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS"}(Bt||(Bt={}));var zt=function(){return zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zt.apply(this,arguments)},Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ht=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Jt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Yt=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const Kt=function(e){var t=e.currentRoom,n=ge(),r=we(Yt),a=Jt((0,i.useState)("brand-color1"),2),s=a[0],l=a[1];(0,i.useEffect)((function(){l(r?"brand-color2":"brand-color1")}),[r]);return(0,o.jsxs)("div",zt({className:"hands h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){return Gt(void 0,void 0,void 0,(function(){var e,o;return Ht(this,(function(i){switch(i.label){case 0:return r?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Bt.RAISE_HAND,msg:t.localParticipant.name+" has raised hand."},[4,Vt("dataMessage",e)]);case 1:return(o=i.sent()).status?(n(Y(!0)),(0,c.Am)("You've raised hand",{type:"info"})):(0,c.Am)(o.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Bt.LOWER_HAND,msg:Bt.LOWER_HAND},[4,Vt("dataMessage",e)];case 3:(o=i.sent()).status?n(Y(!1)):(0,c.Am)(o.msg,{type:"error"}),i.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",zt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r?"Lower hand":"Raise hand"}),void 0),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(s," text-[12px] lg:text-[16px]")},void 0)]}),void 0)};var Qt=function(){return Qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qt.apply(this,arguments)},qt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Xt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Zt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},$t=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),en=(0,Pe.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),tn=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const nn=function(e){var t=e.currentRoom,n=ge(),r=we($t),a=we(en),s=we(tn),l=Zt((0,i.useState)("brand-color1"),2),u=l[0],d=l[1],v=Zt((0,i.useState)(!0),2),f=v[0],p=v[1],h=Zt((0,i.useState)(!1),2),m=h[0],x=h[1];(0,i.useEffect)((function(){d(r?"brand-color2":"brand-color1")}),[r]),(0,i.useEffect)((function(){var e;(null===(e=ye.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_webcams)||p(!1)}),[]);var b=(0,i.useCallback)((function(){r&&(t.localParticipant.tracks.forEach((function(e){e.source!==Ae.Track.Source.ScreenShare&&e.source!==Ae.Track.Source.ScreenShareAudio||!e.track||t.localParticipant.unpublishTrack(e.track)})),n(K(!1)),n(O({isActive:!1,sharedBy:""})))}),[r,n,t]);(0,i.useEffect)((function(){s?(x(!0),b()):x(!1)}),[n,b,s]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ye.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_screen_sharing,i=null===(r=null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==s&&x(!0)}),[]),(0,i.useEffect)((function(){!a&&r&&n(K(!1))}),[a]);return(0,o.jsx)(i.Fragment,{children:f?(0,o.jsxs)("div",Qt({className:"share-screen h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer has-tooltip",onClick:function(){return qt(void 0,void 0,void 0,(function(){return Xt(this,(function(e){switch(e.label){case 0:return m?[2]:r?[3,2]:a?(console.log("Session already has an active screen sharing"),(0,c.Am)("Session already has an active screen sharing",{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,Ae.createLocalScreenTracks)({resolution:Ae.VideoPresets.hd.resolution,audio:!0})];case 1:return e.sent().forEach((function(e){return qt(void 0,void 0,void 0,(function(){return Xt(this,(function(n){switch(n.label){case 0:return[4,t.localParticipant.publishTrack(e)];case 1:return n.sent(),[2]}}))}))})),n(K(!0)),n(O({isActive:!0,sharedBy:t.localParticipant.identity})),[3,3];case 2:b(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",Qt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r?"Stop screen sharing":r||m?m?"Screen sharing locked":void 0:"Start screen sharing"}),void 0),(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(u," text-[12px] lg:text-[16px]")},void 0),m?(0,o.jsx)("div",Qt({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0)]}),void 0):null},void 0)};var rn=function(){return rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rn.apply(this,arguments)},on=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},an=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},sn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},cn=(0,Pe.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const ln=function(){var e,t,n=we(cn),r=sn((0,i.useState)(!1),2),a=r[0],s=r[1],l=sn((0,i.useState)(!1),2),u=l[0],d=l[1],v=sn((0,i.useState)(!0),2),f=v[0],p=v[1],h=null===(t=null===(e=ye.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,m=0;(0,i.useEffect)((function(){return n?(d(!0),clearTimeout(m),s(!1)):!n&&u&&(d(!1),clearTimeout(m),s(!1)),function(){clearTimeout(m)}}),[n,u,m]),(0,i.useEffect)((function(){var e;(null===(e=ye.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||p(!1)}),[]);var x=function(){return on(void 0,void 0,void 0,(function(){var e,t,n;return an(this,(function(r){switch(r.label){case 0:return e={task:"start-recording",sid:ye.getState().session.currentRoom.sid},[4,Vt("recording",e)];case 1:return t=r.sent(),n="Start recording service in progress",t.status||(n=t.msg),(0,c.Am)(n,{toastId:"recording-status",type:"info"}),m=setTimeout((function(){s(!1),(0,c.Am)("Recording did not start",{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},b=function(){return on(void 0,void 0,void 0,(function(){var e,t,n;return an(this,(function(r){switch(r.label){case 0:return e={task:"stop-recording",sid:ye.getState().session.currentRoom.sid},[4,Vt("recording",e)];case 1:return t=r.sent(),n="Stop recording service in progress",t.status||(n=t.msg),(0,c.Am)(n,{toastId:"recording-status",type:"info"}),m=setTimeout((function(){s(!1),(0,c.Am)("Recording did not stop",{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:f&&h?(0,o.jsxs)("button",rn({className:"".concat(n?"record":""," h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer has-tooltip"),onClick:function(){return s(!0),void(n?b():x())},disabled:a},{children:[(0,o.jsx)("span",rn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n?"Stop recording":"Start recording"}),void 0),(0,o.jsx)("i",{className:"pnm-rec brand-color1 text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"},void 0)]}),void 0):null},void 0)};var un=n(6654),dn=function(){return dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dn.apply(this,arguments)},vn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},fn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pn=(0,Pe.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const hn=function(){var e=ge(),t=we(pn),n=ye.getState().session,r=function(e,t){return vn(void 0,void 0,void 0,(function(){var r,o,i;return fn(this,(function(a){switch(a.label){case 0:return console.log(e),console.log(t),r=e?"lock":"unlock",o={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:"all",service:t,direction:r},[4,Vt("updateLockSettings",o)];case 1:return(i=a.sent()).status?(0,c.Am)("Applied new lock setting",{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(i.msg,{type:"error"}),[2]}}))}))},a=function(){e(X(!1))},s=function(){var e,n,i,a,s,c;return(0,o.jsxs)(un.r.Group,{children:[(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock Microphone"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(e=null===t||void 0===t?void 0:t.lock_microphone)&&void 0!==e&&e,onChange:function(e){return r(e,"mic")},className:"".concat((null===t||void 0===t?void 0:t.lock_microphone)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock Webcams"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(n=null===t||void 0===t?void 0:t.lock_webcam)&&void 0!==n&&n,onChange:function(e){return r(e,"webcam")},className:"".concat((null===t||void 0===t?void 0:t.lock_webcam)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock Screen sharing"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(i=null===t||void 0===t?void 0:t.lock_screen_sharing)&&void 0!==i&&i,onChange:function(e){return r(e,"screenShare")},className:"".concat((null===t||void 0===t?void 0:t.lock_screen_sharing)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock Chat"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(a=null===t||void 0===t?void 0:t.lock_chat)&&void 0!==a&&a,onChange:function(e){return r(e,"chat")},className:"".concat((null===t||void 0===t?void 0:t.lock_chat)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock send message"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(s=null===t||void 0===t?void 0:t.lock_chat_send_message)&&void 0!==s&&s,onChange:function(e){return r(e,"sendChatMsg")},className:"".concat((null===t||void 0===t?void 0:t.lock_chat_send_message)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",dn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(un.r.Label,dn({className:"pr-4 w-full max-w-[300px]"},{children:"Lock chat file share"}),void 0),(0,o.jsx)(un.r,dn({checked:null!==(c=null===t||void 0===t?void 0:t.lock_chat_file_share)&&void 0!==c&&c,onChange:function(e){return r(e,"chatFile")},className:"".concat((null===t||void 0===t?void 0:t.lock_chat_file_share)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===t||void 0===t?void 0:t.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)]},void 0)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Re.u,dn({appear:!0,show:!0,as:i.Fragment},{children:(0,o.jsx)(Oe.V,dn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:a},{children:(0,o.jsxs)("div",dn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Re.u.Child,dn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",dn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Re.u.Child,dn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",dn({className:"inline-block w-full h-96 max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",dn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return a()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,dn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:"Room Lock Settings"}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",dn({className:"mt-6"},{children:s()}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)},void 0)};var mn=n(8966),xn=function(){return xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xn.apply(this,arguments)},bn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},wn=(0,Pe.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const jn=function(){var e=ge(),t=we(wn),n=gn((0,i.useState)("youtube"),2),r=n[0],a=n[1],s=gn((0,i.useState)(!1),2),l=s[0],u=s[1],d=gn((0,i.useState)(""),2),v=d[0],f=d[1],p=gn((0,i.useState)(""),2),h=p[0],m=p[1],x={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,i.useEffect)((function(){u("other"===r)}),[r]);var b=function(){e(Z(!1))},y=function(t){return void 0===t&&(t=!1),bn(void 0,void 0,void 0,(function(){var n,r,o;return yn(this,(function(i){switch(i.label){case 0:return e(Z(!1)),t?(n={task:"stop-rtmp",sid:ye.getState().session.currentRoom.sid},[4,Vt("rtmp",n)]):[2];case 1:return r=i.sent(),o="Please wait ending broadcasting",r.status||(o=r.msg),(0,c.Am)(o,{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Re.u,xn({appear:!0,show:t,as:i.Fragment},{children:(0,o.jsx)(Oe.V,xn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",xn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Re.u.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",xn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Re.u.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",xn({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",xn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,xn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:"Are you sure to end broadcasting?"}),void 0),(0,o.jsx)("div",xn({className:"mt-2"},{children:(0,o.jsx)("p",xn({className:"text-sm text-gray-500"},{children:"You are about to close RTMP broadcasting"}),void 0)}),void 0),(0,o.jsxs)("div",xn({className:"mt-4"},{children:[(0,o.jsx)("button",xn({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!0)}},{children:"OK"}),void 0),(0,o.jsx)("button",xn({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!1)}},{children:"Close"}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Re.u,xn({appear:!0,show:!t,as:i.Fragment},{children:(0,o.jsx)(Oe.V,xn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:b},{children:(0,o.jsxs)("div",xn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Re.u.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",xn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Re.u.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",xn({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",xn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,xn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:"RTMP Broadcasting"}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",xn({className:"mt-6"},{children:(0,o.jsxs)("form",xn({action:"#",method:"POST",onSubmit:function(t){return function(t){return bn(void 0,void 0,void 0,(function(){var n,o,i,a;return yn(this,(function(s){switch(s.label){case 0:return t.preventDefault(),"other"===r&&(0,mn.isEmpty)(v)||(0,mn.isEmpty)(h)?[2]:(n="",n="other"===r?v:x[r],(0,mn.isURL)(n,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:ye.getState().session.currentRoom.sid,rtmp_url:n+"/"+h},[4,Vt("rtmp",o)]):[2]);case 1:return i=s.sent(),a="RTMP broadcasting is starting. Please wait",i.status||(a=i.msg),(0,c.Am)(a,{toastId:"rtmp-status",type:"info"}),e(Z(!1)),[2]}}))}))}(t)}},{children:[(0,o.jsx)("div",xn({className:"s"},{children:(0,o.jsxs)("div",xn({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",xn({className:"col-span-6 sm:col-span-3"},{children:[(0,o.jsx)("label",xn({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:"Select provider"}),void 0),(0,o.jsxs)("select",xn({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return a(e.currentTarget.value)},value:r},{children:[(0,o.jsx)("option",xn({value:"youtube"},{children:"YouTube"}),void 0),(0,o.jsx)("option",xn({value:"facebook"},{children:"Facebook"}),void 0),(0,o.jsx)("option",xn({value:"other"},{children:"Other"}),void 0)]}),void 0)]}),void 0),l?(0,o.jsxs)("div",xn({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",xn({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:"Server URL"}),void 0),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:v,onChange:function(e){return f(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"},void 0)]}),void 0):null,(0,o.jsxs)("div",xn({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",xn({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:"Stream Key/Secret"}),void 0),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:h,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"},void 0)]}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",xn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",xn({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{children:"Broadcast"}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)},void 0)};var Sn=function(){return Sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sn.apply(this,arguments)},kn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_n=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),Tn=(0,Pe.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),Pn=(0,Pe.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e}));const An=function(){var e=ye.getState().session,t=ge(),n=we(_n),r=we(Pn),i=we(Tn);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Sn({className:"menu relative"},{children:(0,o.jsx)(Be.v,{children:function(n){var r=n.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Be.v.Button,Sn({className:"h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal text-brandColor1 text-[3px] lg:text-[5px]"},void 0)}),void 0),(0,o.jsx)(Re.u,Sn({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Be.v.Items,Sn({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-56 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Sn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Sn({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(Z(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-broadcasting text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),i?"Stop RTMP broadcasting":"Start RTMP broadcasting"]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",Sn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Sn({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return kn(void 0,void 0,void 0,(function(){var t,n;return Nn(this,(function(r){switch(r.label){case 0:return t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:"all",muted:!0},[4,Vt("muteUnmuteTrack",t)];case 1:return(n=r.sent()).status?(0,c.Am)("Muted all microphone",{toastId:"asked-status",type:"info"}):(0,c.Am)(n.msg,{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),"Mute all users"]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",Sn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Sn({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(X(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),"Room Lock Settings"]}),void 0)},void 0)}),void 0)]}),void 0)}),void 0)]},void 0)}},void 0)}),void 0)," ",n?(0,o.jsx)(hn,{},void 0):null," ",r?(0,o.jsx)(jn,{},void 0):null]},void 0)};var Rn=function(){return Rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rn.apply(this,arguments)};const On=i.memo((function(e){var t,n,r=e.currentRoom,i=null===(n=null===(t=ye.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",Rn({id:"main-footer",className:"h-[55px] lg:h-[70px] px-4 shadow-footer flex items-center justify-between"},{children:(0,o.jsxs)("div",Rn({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",Rn({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(rt,{currentRoom:r},void 0),(0,o.jsx)(_t,{currentRoom:r},void 0)]}),void 0),(0,o.jsxs)("div",Rn({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(It,{},void 0),(0,o.jsx)(Rt,{},void 0),(0,o.jsx)(nn,{currentRoom:r},void 0),(0,o.jsx)(Kt,{currentRoom:r},void 0),(0,o.jsx)(ln,{},void 0),i?(0,o.jsx)(An,{},void 0):null]}),void 0),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"},void 0)]}),void 0)}),void 0)}));var Cn=function(){return Cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cn.apply(this,arguments)};const En=i.memo((function(e){var t,n,r=e.onOpenAlert,i=null===(n=null===(t=ye.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,a=ge();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Be.v.Items,Cn({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Cn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Cn({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){a(pe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),"Settings"]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",Cn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Cn({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),"Logout"]}),void 0)},void 0)}),void 0),i?(0,o.jsx)("div",Cn({className:"py-1",role:"none"},{children:(0,o.jsx)(Be.v.Item,{children:(0,o.jsxs)("button",Cn({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "},void 0),"End"]}),void 0)},void 0)}),void 0):null]}),void 0)},void 0)}));var In=n(6311),Mn=function(){return Mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mn.apply(this,arguments)},Fn=(0,Pe.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Un=(0,Pe.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Ln=function(){var e=ge(),t=we(Fn),n=we(Un),r=function(){e(he(!t))},i=function(){e(me(!n))};return(0,o.jsx)("div",Mn({className:"mt-2"},{children:(0,o.jsxs)(un.r.Group,{children:[(0,o.jsxs)("div",Mn({className:"flex items-center mb-2"},{children:[(0,o.jsx)(un.r.Label,Mn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:"Show webcams"}),void 0),(0,o.jsx)(un.r,Mn({checked:t,onChange:r,className:"".concat(t?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(t?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",Mn({className:"flex items-center"},{children:[(0,o.jsx)(un.r.Label,Mn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:"Show Screen share"}),void 0),(0,o.jsx)(un.r,Mn({checked:n,onChange:i,className:"".concat(n?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)]},void 0)}),void 0)};var Dn=function(){return Dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dn.apply(this,arguments)},Vn=(0,Pe.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Wn=function(){var e=ge(),t=we(Vn),n=function(){e(xe(!t))};return(0,o.jsx)("div",Dn({className:"mt-2"},{children:(0,o.jsx)(un.r.Group,{children:(0,o.jsxs)("div",Dn({className:"flex items-center mb-2"},{children:[(0,o.jsx)(un.r.Label,Dn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:"Allow audio notification"}),void 0),(0,o.jsx)(un.r,Dn({checked:t,onChange:n,className:"".concat(t?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(t?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)},void 0)}),void 0)};var Bn=function(){return Bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bn.apply(this,arguments)},zn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Gn=(0,Pe.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const Hn=function(){var e=ge(),t=we(Gn),n=zn((0,i.useState)({"Data savings":[{id:1,elm:(0,o.jsx)(Ln,{},void 0)}],Notifications:[{id:1,elm:(0,o.jsx)(Wn,{},void 0)}]}),1)[0],r=function(){e(pe(!1))};var a=function(){return(0,o.jsx)("div",Bn({className:"max-w-full"},{children:(0,o.jsxs)(In.O.Group,Bn({vertical:!0},{children:[(0,o.jsx)(In.O.List,Bn({className:"flex p-1 space-x-1 bg-blue-900 rounded-xl"},{children:Object.keys(n).map((function(e){return(0,o.jsx)(In.O,Bn({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-sm leading-5 font-medium text-blue-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")}},{children:e}),e)}))}),void 0),(0,o.jsx)(In.O.Panels,Bn({className:"mt-2"},{children:Object.values(n).map((function(e,t){return(0,o.jsx)(In.O.Panel,Bn({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))},void 0)}),t)}))}),void 0)]}),void 0)}),void 0)};return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Re.u,Bn({appear:!0,show:t,as:i.Fragment},{children:(0,o.jsx)(Oe.V,Bn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:r},{children:(0,o.jsxs)("div",Bn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Re.u.Child,Bn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Bn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Re.u.Child,Bn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Bn({className:"inline-block w-full h-96 max-w-lg py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Bn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return r()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,Bn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:"Room Settings"}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",Bn({className:"mt-2"},{children:a()}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):null},void 0)};var Jn=function(){return Jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jn.apply(this,arguments)},Yn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Kn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Qn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},qn=(0,Pe.P1)((function(e){return e.session.currentRoom.metadata}),(function(e){return e}));const Xn=i.memo((function(e){var t,n=e.currentRoom,r=we(qn),a=Qn((0,i.useState)(""),2),s=a[0],l=a[1],u=Qn((0,i.useState)(!1),2),d=u[0],v=u[1],f=Qn((0,i.useState)(""),2),p=f[0],h=f[1],m=Qn((0,i.useState)(""),2),x=m[0],b=m[1],y=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";(0,i.useEffect)((function(){r&&l(r.room_title)}),[r]);var g=function(e){return void 0===e&&(e=!1),Yn(void 0,void 0,void 0,(function(){var t,r,o;return Kn(this,(function(i){switch(i.label){case 0:return v(!1),e?"logout"!==x?[3,1]:(n.disconnect(),[3,3]):[2];case 1:return"end Room"!==x?[3,3]:(t=ye.getState().session,r={room_id:t.currentRoom.room_id},[4,Vt("endRoom",r)]);case 2:(o=i.sent()).status||(0,c.Am)(o.msg,{type:"error"}),i.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",Jn({id:"main-header",className:"relative z-[99999] h-[50px] lg:h-[60px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("img",{className:"absolute top-[-90px] left-[-35px] w-[300px] pointer-events-none",src:"".concat(y,"/imgs/header-before2.png"),alt:"BeforeBG"},void 0),(0,o.jsx)("div",Jn({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("img",{src:"".concat(y,"/imgs/plugNmeet-logo.png"),alt:"logo"},void 0)}),void 0),(0,o.jsx)("div",Jn({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",Jn({className:"text-base text-black leading-[1] text-center"},{children:s}),void 0)}),void 0),(0,o.jsx)("div",Jn({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:(0,o.jsx)(Be.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Be.v.Button,Jn({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",Jn({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"},void 0)}),void 0)}),void 0),(0,o.jsx)(Re.u,Jn({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(En,{onOpenAlert:function(e){return function(e){b(e),"logout"===e?h("You are about to leave the session."):"end Room"===e&&h("You are about to end the session. All users will be disconnected."),v(!0)}(e)}},void 0)}),void 0)]},void 0)}},void 0)}),void 0),(0,o.jsx)("img",{className:"absolute top-[-105px] right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none",src:"".concat(y,"/imgs/header-before2.png"),alt:"BeforeBG"},void 0),d?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Re.u,Jn({appear:!0,show:d,as:i.Fragment},{children:(0,o.jsx)(Oe.V,Jn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:g},{children:(0,o.jsxs)("div",Jn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Re.u.Child,Jn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Jn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Re.u.Child,Jn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Jn({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Jn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Oe.V.Title,Jn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:"Are you sure to ".concat(x,"?")}),void 0),(0,o.jsx)("div",Jn({className:"mt-2"},{children:(0,o.jsx)("p",Jn({className:"text-sm text-gray-500"},{children:p}),void 0)}),void 0),(0,o.jsxs)("div",Jn({className:"mt-4"},{children:[(0,o.jsx)("button",Jn({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!0)}},{children:"OK"}),void 0),(0,o.jsx)("button",Jn({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!1)}},{children:"Close"}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):null]}),void 0),(0,o.jsx)(Hn,{},void 0)]},void 0)}));var Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zn.apply(this,arguments)};const $n=function(e){var t=e.participant;return(0,o.jsx)("div",Zn({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-[rgba(0,69,131)] flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name},void 0):(0,o.jsx)(i.Fragment,{children:t.name.slice(0,2).toUpperCase()},void 0)}),void 0)};var er=function(){return er=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},er.apply(this,arguments)};const tr=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",er({className:"text-[11px] xl:text-[13px] text-[#003767]"},{children:[t," ",n?" (me)":null]}),void 0)};var nr=function(){return nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nr.apply(this,arguments)};const rr=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",nr({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[8px]"},void 0)}),void 0):null},void 0)};var or=function(){return or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},or.apply(this,arguments)};const ir=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?n.isMuted?(0,o.jsx)("div",or({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):(0,o.jsx)("div",or({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):null},void 0)};var ar=function(){return ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ar.apply(this,arguments)};const sr=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",ar({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):null},void 0)};var cr,lr,ur,dr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},fr=!1,pr=0,hr=!1,mr=function(){var e=kr();(lr=new WebSocket(e)).onopen=function(){fr=!0,Sr(),ye.dispatch(M(!0)),ur&&(clearInterval(ur),ur=0,pr=0)},lr.onclose=function(){fr=!1,ye.dispatch(M(!1)),ur||hr||(ur=setInterval((function(){pr>10&&(clearInterval(ur),pr=0),lr=void 0,mr(),pr++}),2e3))},lr.onerror=function(){console.log("Error in websocket")},lr.onmessage=function(e){xr(e)}},xr=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return void console.log(e.data)}"USER"===t.type?br(t.body,t.message_id):"SYSTEM"===t.type&&yr(t)}},br=function(e,t){"CHAT"===e.type&&(e.message_id||(e.message_id=t),ye.dispatch(ie(e)))},yr=function(e){switch(e.body.type){case Bt.SEND_CHAT_MSGS:gr(e);break;case Bt.RENEW_TOKEN:wr(e);break;case Bt.INFO:case Bt.ALERT:jr(e)}},gr=function(e){re.selectAll(ye.getState()).filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return dr(void 0,void 0,void 0,(function(){var n,r;return vr(this,(function(o){return n=t,r={type:Wt.USER,body:n,to:e.body.from.sid,room_sid:cr.currentRoom.sid,message_id:""},_r(JSON.stringify(r)),[2]}))}))}))},wr=function(e){ye.dispatch(T(e.body.msg))},jr=function(e){switch(e.body.type){case Bt.INFO:(0,c.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Bt.ALERT:(0,c.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},Sr=function(){var e,t,n,r,o=y.selectAll(ye.getState()).filter((function(e){var t;return e.sid!==(null===(t=cr.currenUser)||void 0===t?void 0:t.sid)}));if(o.length){o.sort((function(e,t){return e.joinedAt-t.joinedAt}));var i=o[0],a={type:Wt.SYSTEM,room_sid:cr.currentRoom.sid,message_id:"",to:i.sid,body:{type:Bt.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=cr.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=cr.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};_r(JSON.stringify(a))}},kr=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n="ws://";"https:"===t.protocol&&(n="wss://"),e=n+t.host,"/"!==t.pathname&&(e+=t.pathname);var r=cr.token,o=cr.currenUser,i=cr.currentRoom;return e=e+"/ws?token="+r+"&roomSid="+i.sid+"&userSid="+(null===o||void 0===o?void 0:o.sid)+"&roomId="+i.room_id+"&userId="+(null===o||void 0===o?void 0:o.userId)},Nr=function(){return fr},_r=function(e){fr&&(null===lr||void 0===lr||lr.send(e))},Tr=function(){return Tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tr.apply(this,arguments)},Pr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ar=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Or=function(e){var t,n=e.userId,r=we((function(e){return y.selectById(e,n)})),a=ye.getState().session,s=Rr((0,i.useState)("Ask to share Microphone"),2),l=s[0],u=s[1],d=Rr((0,i.useState)(""),2),v=d[0],f=d[1];(0,i.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u("Ask to share Mic"),f("share Microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u("Ask to unmute Mic"),f("unmute Microphone")):(null===r||void 0===r?void 0:r.audioTracks)&&(u("Mute Microphone"),f("mute"))}),[null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var p=function(){return Pr(void 0,void 0,void 0,(function(){var e,t,n;return Ar(this,(function(o){switch(o.label){case 0:return e=ye.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,Vt("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,c.Am)("You've muted microphone for ".concat(null===r||void 0===r?void 0:r.name),{toastId:"asked-status",type:"info"}):(0,c.Am)(n.msg,{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(null===(t=a.currenUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Tr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Tr({onClick:function(){return function(){var e,t,n,o,i;if("mute"!==v){var s={type:Wt.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:Bt.INFO,from:{sid:null!==(t=null===(e=a.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=a.currenUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:(null===(i=a.currenUser)||void 0===i?void 0:i.name)+" asked you to "+v}};_r(JSON.stringify(s)),(0,c.Am)("You've asked ".concat(null===r||void 0===r?void 0:r.name," to ").concat(v),{toastId:"asked-status",type:"info"})}else p()}()}},{children:function(){return(0,o.jsx)("button",Tr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:l}),void 0)}}),void 0)}),void 0):null},void 0)};var Cr=function(){return Cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cr.apply(this,arguments)},Er=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ir=function(e){var t,n,r=e.userId,a=we((function(e){return y.selectById(e,r)})),s=null===(t=ye.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,l=ye.getState().session,u=Er((0,i.useState)("Ask to share Webcam"),2),d=u[0],v=u[1],f=Er((0,i.useState)(""),2),p=f[0],h=f[1];(0,i.useEffect)((function(){0===(null===a||void 0===a?void 0:a.videoTracks)?(v("Ask to share Webcam"),h("share Webcam")):(v("Ask to stop Webcam"),h("stop Webcam"))}),[null===a||void 0===a?void 0:a.videoTracks]);return(0,o.jsx)(i.Fragment,{children:(null===(n=l.currenUser)||void 0===n?void 0:n.userId)!==(null===a||void 0===a?void 0:a.userId)&&(null===s||void 0===s?void 0:s.allow_webcams)&&!s.admin_only_webcams?(0,o.jsx)("div",Cr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Cr({onClick:function(){return function(){var e,t,n,r,o,i={type:Wt.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:null===a||void 0===a?void 0:a.sid,body:{type:Bt.INFO,from:{sid:null!==(t=null===(e=l.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=l.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:"".concat(null===(o=l.currenUser)||void 0===o?void 0:o.name," asked you to ").concat(p)}};_r(JSON.stringify(i)),(0,c.Am)("You've asked ".concat(null===a||void 0===a?void 0:a.name," to ").concat(p),{toastId:"asked-status",type:"info"})}()}},{children:function(){return(0,o.jsx)("button",Cr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:d}),void 0)}}),void 0)}),void 0):null},void 0)};var Mr=function(){return Mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mr.apply(this,arguments)},Fr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ur=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Lr=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)})),r=ge();return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",Mr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Mr({onClick:function(){return Fr(void 0,void 0,void 0,(function(){var e,t,o;return Ur(this,(function(i){switch(i.label){case 0:return e=ye.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Bt.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,Vt("dataMessage",t)];case 1:return(o=i.sent()).status?r(Y(!1)):(0,c.Am)(o.msg,{type:"error"}),[2]}}))}))}},{children:function(){return(0,o.jsx)("button",Mr({className:"text-gray-900 group flex rounded-md items-center w-full px-2 py-1 text-xs lg:text-sm transition ease-in hover:bg-gray-100"},{children:"Lower hand"}),void 0)}}),void 0)}),void 0):null},void 0)};var Dr=function(){return Dr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dr.apply(this,arguments)},Vr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Wr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Br=function(e){var t,n=e.userId,r=null===(t=ye.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=we((function(e){return y.selectById(e,n)})),s=function(e){return Vr(void 0,void 0,void 0,(function(){var t,n,r,o,i,s;return Wr(this,(function(l){switch(l.label){case 0:switch(t=a.metadata,n=ye.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return i={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===a||void 0===a?void 0:a.userId,service:r,direction:o},[4,Vt("updateLockSettings",i)];case 1:return(s=l.sent()).status?(0,c.Am)("Applied new lock setting",{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(s.msg,{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("mic")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_microphone)?"Unlock microphone":"Lock microphone"}),void 0)}}),void 0)}),void 0),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("webcam")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_webcam)?"Unlock webcam":"Lock webcam"}),void 0)}}),void 0)}),void 0):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("screenShare")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_screen_sharing)?"Unlock screen sharing":"Lock screen sharing"}),void 0)}}),void 0)}),void 0):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("chat")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_chat)?"Unlock chat":"Lock chat"}),void 0)}}),void 0)}),void 0),(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("sendChatMsg")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_chat_send_message)?"Unlock send chat message":"Lock send chat message"}),void 0)}}),void 0)}),void 0),r.chat_features.allow_file_upload?(0,o.jsx)("div",Dr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,Dr({onClick:function(){return s("chatFile")}},{children:function(){return(0,o.jsx)("button",Dr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===a||void 0===a?void 0:a.metadata.lock_settings.lock_chat_file_share)?"Unlock send file":"Lock send file"}),void 0)}}),void 0)}),void 0):null]},void 0):null]},void 0)},void 0)};var zr=function(){return zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zr.apply(this,arguments)};const Gr=function(e){var t=e.userId,n=e.onOpenAlert;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",zr({className:"",role:"none"},{children:(0,o.jsx)(Be.v.Item,zr({onClick:function(){n(t)}},{children:function(){return(0,o.jsx)("button",zr({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white"},{children:"Remove participant"}),void 0)}}),void 0)}),void 0)},void 0)},void 0)};var Hr=function(){return Hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hr.apply(this,arguments)},Jr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Yr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Kr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Qr=function(e){var t=e.userId,n=e.name,r=Kr((0,i.useState)(!1),2),a=r[0],s=r[1],l=function(e){e===t&&s(!0)},u=function(e){return void 0===e&&(e=!1),Jr(void 0,void 0,void 0,(function(){var n,r,o;return Yr(this,(function(i){switch(i.label){case 0:return s(!1),e?(n=ye.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t},[4,Vt("removeParticipant",r)]):[2];case 1:return(o=i.sent()).status?(0,c.Am)("Participant removed",{toastId:"user-remove-status",type:"info"}):(0,c.Am)(o.msg,{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(Be.v,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Be.v.Button,Hr({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small brand-color1 opacity-50"},void 0)}),void 0),(0,o.jsx)(Re.u,Hr({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Be.v.Items,Hr({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)(Or,{userId:t},void 0),(0,o.jsx)(Ir,{userId:t},void 0),(0,o.jsx)(Lr,{userId:t},void 0),(0,o.jsx)(Br,{userId:t},void 0),(0,o.jsx)(Gr,{onOpenAlert:l,userId:t},void 0)]}),void 0)}),void 0)]},void 0)}},void 0),(0,o.jsx)(Re.u,Hr({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Oe.V,Hr({open:a,onClose:function(){return u()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Hr({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Oe.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",Hr({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",Hr({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsxs)(Oe.V.Title,Hr({className:"mb-4 md:mb-6 text-sm"},{children:["Are you sure to remove ",n,"?"]}),void 0),(0,o.jsx)("button",Hr({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return u(!0)}},{children:"Remove"}),void 0),(0,o.jsx)("button",Hr({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return u(!1)}},{children:"Cancel"}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0)]},void 0)},void 0)};var qr=function(){return qr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qr.apply(this,arguments)};const Xr=function(e){var t,n=e.participant,r=ye.getState().session.currenUser;return(0,o.jsx)("li",qr({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",qr({className:"flex items-center justify-between"},{children:[(0,o.jsxs)("div",qr({className:"left flex items-center "},{children:[(0,o.jsx)($n,{participant:n},void 0),(0,o.jsx)(tr,{name:n.name,isCurrentUser:(null===r||void 0===r?void 0:r.userId)===n.userId},void 0)]}),void 0),(0,o.jsxs)("div",qr({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(rr,{userId:n.userId},void 0),(0,o.jsx)(ir,{userId:n.userId},void 0),(0,o.jsx)(sr,{userId:n.userId},void 0),(null===(t=null===r||void 0===r?void 0:r.metadata)||void 0===t?void 0:t.is_admin)&&r.userId!==n.userId?(0,o.jsx)(Qr,{userId:n.userId,name:n.name},void 0):null]}),void 0)]}),void 0)}),void 0)};var Zr=function(){return Zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zr.apply(this,arguments)};const $r=i.memo((function(){var e=we(y.selectAll);return(0,o.jsx)("div",Zr({id:"main-left-panel",className:"participants-wrapper scrollBar relative z-10 left-0 top-0 h-full w-[200px] xl:w-[270px] px-2 xl:px-4 pt-2 xl:pt-5 overflow-auto multi-gradient"},{children:(0,o.jsxs)("div",Zr({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",Zr({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsxs)("p",Zr({className:"text-sm text-black"},{children:["Participants (",e.length,")"]}),void 0)}),void 0),(0,o.jsx)("div",Zr({className:"all-participants-wrap"},{children:function(){var t,n,r,i,a,s,c,l=ye.getState().session,u=null===(t=l.currenUser)||void 0===t?void 0:t.userId,d=null!==(i=null===(r=null===(n=l.currentRoom.metadata)||void 0===n?void 0:n.room_features)||void 0===r?void 0:r.allow_view_other_users_list)&&void 0!==i&&i,v=null!==(c=null===(s=null===(a=l.currenUser)||void 0===a?void 0:a.metadata)||void 0===s?void 0:s.is_admin)&&void 0!==c&&c;return e.map((function(e){if(v||d||e.metadata.is_admin||u===e.userId)return(0,o.jsx)(Xr,{participant:e},e.sid)}))}()}),void 0)]}),void 0)}),void 0)}));var eo=function(){return eo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eo.apply(this,arguments)};const to=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",eo({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-brandColor1"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name},void 0);var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(i.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()},void 0)}()}),void 0)};var no=function(){return no=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},no.apply(this,arguments)};const ro=i.memo((function(e){var t=e.body,n=e.currentUser,r=we((function(e){return y.selectById(e,t.from.userId)}));return(0,o.jsx)("div",no({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",no({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",no({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)}),void 0):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",no({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",no({className:"name pl-2 text-sm pb-1"},{children:"You"}),void 0),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)]}),void 0):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(to,{participant:r,from:t.from},void 0),(0,o.jsxs)("div",no({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",no({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name," ",(0,o.jsx)("span",no({style:{fontSize:"10px"}},{children:r?null:" (offline)"}),void 0)]}),void 0),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)]}),void 0)]},void 0)}),void 0)}),void 0)}));var oo=function(){return oo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oo.apply(this,arguments)},io=(0,Pe.P1)((function(e){return e.session.currenUser}),(function(e){return e}));const ao=function(){var e=(0,i.useRef)(null),t=we(re.selectAll),n=we(io);(0,i.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}));return(0,o.jsx)("div",oo({className:"pb-3",ref:e},{children:t.map((function(e){var t=e;return(0,o.jsx)(ro,{body:t,currentUser:n},t.message_id)}))}),void 0)};var so=n(1036),co=n.n(so),lo=n(6486),uo=n.n(lo),vo=n(5342),fo=n.n(vo),po=function(){return po=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},po.apply(this,arguments)},ho=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const mo=function(e){var t=e.isChatServiceReady,n=e.lockSendFile,r=e.currentRoom,a=(0,i.useRef)(null),s=i.useRef(null),l=ho((0,i.useState)(!1),2),u=l[0],d=l[1],v=function(e,t){var n,r="",o=new(fo())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(n=e.currenUser)||void 0===n?void 0:n.userId,resumable:!0},headers:{Authorization:e.token}});o.on("fileAdded",(function(e){r=e.fileName,o.isUploading()||(d(!0),o.upload())})),o.on("fileSuccess",(function(e,t){var n=JSON.parse(t);d(!1),setTimeout((function(){var e;c.Am.done(null!==(e=s.current)&&void 0!==e?e:"")}),300),n.status&&(f(n.filePath,n.fileName),(0,c.Am)("File uploaded successfully",{type:c.Am.TYPE.SUCCESS}))})),o.on("fileError",(function(e,t){var n=JSON.parse(t);d(!1),setTimeout((function(){var e;c.Am.done(null!==(e=s.current)&&void 0!==e?e:"")}),300),(0,c.Am)(n.msg,{type:c.Am.TYPE.ERROR})})),o.on("uploadStart",(function(){s.current=(0,c.Am)("Uploading "+r,{closeButton:!1,progress:0})})),o.on("fileProgress",(function(e){var t,n=e.progress(!1);c.Am.update(null!==(t=s.current)&&void 0!==t?t:"",{progress:Number(n)})})),o.addFiles(t)},f=function(e,t){if(Nr()){var n='<a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+e,'" target="_blank">').concat(t,"</a>"),o={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:r.localParticipant.sid,userId:r.localParticipant.identity,name:r.localParticipant.name},msg:n},i={type:Wt.USER,room_sid:r.sid,message_id:"",body:o};_r(JSON.stringify(i))}};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:a,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=ye.getState().session;v(n,t)}}(e)}},void 0),(0,o.jsx)("button",po({disabled:!t||n||u,onClick:function(){return function(){var e;u||null===(e=a.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[20px] opacity-50"},void 0)}),void 0)]},void 0)},void 0)};var xo=function(){return xo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xo.apply(this,arguments)},bo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},go=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},wo=(0,Pe.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),jo=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),So=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e}));const ko=function(e){var t=e.currentRoom,n=we(wo),r=we(jo),a=we(So),s=go((0,i.useState)(!1),2),c=s[0],l=s[1],u=go((0,i.useState)(!1),2),d=u[0],v=u[1],f=go((0,i.useState)(!0),2),p=f[0],h=f[1],m=go((0,i.useState)(""),2),x=m[0],b=m[1];(0,i.useEffect)((function(){ye.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||h(!1)}),[]),(0,i.useEffect)((function(){l(!!r),v(!!a)}),[r,a]),(0,i.useEffect)((function(){var e,t,n,o,i,a,s=null===(t=null===(e=ye.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,c=null===(o=null===(n=ye.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,u=null===(a=null===(i=ye.getState().session.currenUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin;s&&!u&&!1!==r&&l(!0),c&&!u&&!1!==r&&v(!0)}),[]);var y=function(){return bo(void 0,void 0,void 0,(function(){var e,n,r;return yo(this,(function(o){var i;return i=x,e=co()(i,{allowedTags:["b","i","strong","br"]}),uo().isEmpty(e)||(n={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:Wt.USER,room_sid:t.sid,message_id:"",body:n},Nr()&&(_r(JSON.stringify(r)),b(""))),[2]}))}))};return(0,o.jsxs)("div",xo({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm text-brandColor1/80 lg:text-brandColor1 placeholder:text-brandColor1/80 lg:placeholder:text-brandColor1",value:x,onChange:function(e){return b(e.currentTarget.value)},disabled:!n||c,placeholder:"Write message (new line: Shift + enter)",onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),y())}(e)}},void 0),(0,o.jsxs)("div",xo({className:"btns"},{children:[(0,o.jsx)("button",xo({disabled:!n||c,onClick:function(){return y()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send brand-color1 text-[20px]"},void 0)}),void 0),p?(0,o.jsx)(mo,{isChatServiceReady:n,lockSendFile:d,currentRoom:t},void 0):null]}),void 0)]}),void 0)};var No=function(){return No=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},No.apply(this,arguments)},_o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},To=(0,Pe.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const Po=i.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=we(To),a=_o((0,i.useState)(!1),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var e,t,n,o,i=null===(t=null===(e=ye.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,a=null===(o=null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;i&&!a&&!1!==r&&c(!1)}),[]),(0,i.useEffect)((function(){n&&c(!1)}),[n]),(0,i.useEffect)((function(){n||c(!r)}),[r,n]),(0,o.jsxs)("div",No({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsx)("div",No({className:"h-[calc(100%)] MessageModule-wrapper scrollBar relative z-10 right-0 top-0 w-[230px] xl:w-[300px] px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto multi-gradient"},{children:(0,o.jsx)("div",No({className:"all-MessageModule-wrap"},{children:(0,o.jsx)(ao,{},void 0)}),void 0)}),void 0),n?(0,o.jsx)("div",{className:"w-[10px] h-[10px] hiddenAnimation"},void 0):null,s?(0,o.jsx)("div",No({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(ko,{currentRoom:t},void 0)}),void 0):null]}),void 0)}));var Ao=function(){return Ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ao.apply(this,arguments)};const Ro=function(e){var t=e.speaker;return(0,o.jsxs)("div",Ao({className:"m-1 px-3 py-1 text-[#003767] text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] brand-color2 mr-2"},void 0),t.name]}),void 0)};var Oo=function(){return Oo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oo.apply(this,arguments)};const Co=i.memo((function(){var e=we(d.selectAll);return(0,o.jsx)("div",Oo({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Ro,{speaker:e},e.sid)})):null}),void 0)}));var Eo=function(){return Eo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Eo.apply(this,arguments)},Io=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Mo=function(e){var t=e.track,n=(0,i.useRef)(null),r=Io((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Eo({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[a?null:(0,o.jsx)("div",Eo({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Eo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0)}),void 0),(0,o.jsx)("button",Eo({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"},void 0)}),void 0),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute"},void 0)]}),void 0)};var Fo=function(){return Fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fo.apply(this,arguments)};const Uo=function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",Fo({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n},void 0)}),void 0)};var Lo=function(){return Lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lo.apply(this,arguments)},Do=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Vo=function(e){var t=e.track,n=(0,i.useRef)(null),r=Do((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Lo({className:"camera-video-player"},{children:[a?null:(0,o.jsx)("div",Lo({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Lo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0)}),void 0),(0,o.jsx)("button",Lo({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"},void 0)}),void 0),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"},void 0)]}),void 0)};var Wo=function(){return Wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wo.apply(this,arguments)},Bo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const zo=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)})),r=Bo((0,i.useState)("#FFFFFF"),2),a=r[0],s=r[1];(0,i.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case Ae.ConnectionQuality.Excellent:s("#38f105");break;case Ae.ConnectionQuality.Good:s("#c8f6bd");break;case Ae.ConnectionQuality.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",Wo({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:a},className:"pnm-network text-[7px]"},void 0)}),void 0)};var Go=function(){return Go=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Go.apply(this,arguments)};const Ho=function(e){var t=e.userId,n=we((function(e){return y.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",Go({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",Go({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"},void 0)}),void 0):(0,o.jsx)("p",Go({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"},void 0)}),void 0)}),void 0):null},void 0)};var Jo=function(){return Jo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jo.apply(this,arguments)};const Yo=i.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",Jo({className:"camera-modules"},{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(zo,{userId:t},void 0),(0,o.jsx)(Ho,{userId:t},void 0),(0,o.jsx)(Vo,{track:n},void 0)]},void 0)}),void 0)}));var Ko=function(){return Ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ko.apply(this,arguments)};const Qo=function(e){var t,n=e.participantType,r=e.participant,i=we((function(e){return d.selectById(e,r.identity)}));return(0,o.jsx)("div",Ko({className:"video-camera-item relative ".concat(i?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===Ae.Track.Source.Camera){var i=(0,o.jsxs)("div",Ko({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",Ko({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]}),void 0),(0,o.jsx)(Yo,{userId:r.identity,track:e},void 0)]}),e.trackSid);t.push(i)}})),t)}),void 0)};var qo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Xo=function(e){var t=qo((0,i.useState)([]),2),n=t[0],r=t[1],a=qo((0,i.useState)(0),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var i={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof Ae.LocalParticipant},a=e.getTracks().filter((function(e){return e.source===Ae.Track.Source.Camera}));if(t+=a.length,a.length){var s=(0,o.jsx)(Qo,{participantType:i,participant:e},e.sid);n.push(s)}}})),c(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var Zo=function(){return Zo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zo.apply(this,arguments)},$o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const ei=i.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=null!==n&&void 0!==n?n:25,a=ge(),s=Xo(t),c=s.allParticipants,l=s.totalNumWebcams,u=$o((0,i.useState)(0),2),d=u[0],v=u[1],f=$o((0,i.useState)([]),2),p=f[0],h=f[1],m=$o((0,i.useState)(!1),2),x=m[0],b=m[1],y=$o((0,i.useState)(!1),2),g=y[0],w=y[1];(0,i.useEffect)((function(){c.length<=r?h(c):(v(1),j(c,1,r))}),[c]),(0,i.useEffect)((function(){l>r?(b(1!==d),w(!(d>=l/r))):(b(!1),w(!1))}),[l,d,r]);var j=function(e,t,n){var r=$o(e).slice(0).slice((t-1)*n,t*n);h(r),a(C(1!==t))};return(0,o.jsx)(i.Fragment,{children:l>0?(0,o.jsx)("div",Zo({className:"all-webcam-wrapper total-cam-".concat(l)},{children:(0,o.jsx)("div",Zo({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(i.Fragment,{children:[x?(0,o.jsx)("button",Zo({type:"button",className:"previous-cam",onClick:function(){return j(c,d-1,r),void v(d-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"},void 0)}),void 0):null,(0,o.jsx)(i.Fragment,{children:p},void 0),g?(0,o.jsx)("button",Zo({type:"button",className:"next-cam",onClick:function(){return j(c,d+1,r),void v(d+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"},void 0)}),void 0):null]},void 0)}),void 0)}),void 0):null},void 0)}));var ti=function(){return ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ti.apply(this,arguments)},ni=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),ri=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),oi=(0,Pe.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const ii=i.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers,r=ge(),a=we(ni),s=we(ri),c=we(oi);(0,i.useEffect)((function(){r(J(!1))}),[r]);return(0,o.jsxs)("div",ti({className:"share-screen-wrapper is-share-screen-running"},{children:[!n||!c||s&&a?null:(0,o.jsx)(ei,{videoSubscribers:n,perPage:3},void 0),function(){if(t){var e=Array();return t.forEach((function(t){t.source===Ae.Track.Source.ScreenShare?e.push((0,o.jsx)(Mo,{track:t},t.trackSid)):t.source===Ae.Track.Source.ScreenShareAudio&&e.push((0,o.jsx)(Uo,{track:t},t.trackSid))})),e}return null}()]}),void 0)}));var ai=function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ai.apply(this,arguments)};const si=i.memo((function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",ai({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n},void 0)}),void 0)}));var ci=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const li=i.memo((function(e){var t=e.audioSubscribers,n=ci((0,i.useState)([]),2),r=n[0],a=n[1];return(0,i.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(si,{track:t},t.trackSid))}))})),a(e)}),[t]),(0,o.jsx)(i.Fragment,{children:r.length?r:null},void 0)}));var ui=(0,Pe.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),di=(0,Pe.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),vi=(0,Pe.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const fi=function(e){var t=e.audioSubscribers,n=e.videoSubscribers,r=e.screenShareTracks,a=we(ui),s=we(di),c=we(vi);return(0,o.jsx)(i.Fragment,{children:function(){var e;return(0,o.jsxs)(i.Fragment,{children:[c&&a&&r?(0,o.jsx)(ii,{videoSubscribers:n,screenShareTracks:r},void 0):null,!s||c&&a||!n?null:(0,o.jsx)(ei,{videoSubscribers:n,perPage:null!==(e=window.NUMBER_OF_WEBCAMS_PER_PAGE_PC)&&void 0!==e?e:25},void 0),t?(0,o.jsx)(li,{audioSubscribers:t},void 0):null]},void 0)}()},void 0)};var pi=function(){return pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pi.apply(this,arguments)},hi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},mi=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),xi=(0,Pe.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),bi=(0,Pe.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const yi=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,a=e.videoSubscribers,s=e.screenShareTracks,c=e.isRecorder,l=we(mi),u=we(bi),d=ge(),v=we(xi),f=hi((0,i.useState)(!0),2),p=f[0],h=f[1],m=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,i.useEffect)((function(){var e;(null===(e=ye.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(h(!1),d(H(!1)))}),[d]),(0,o.jsxs)("div",pi({id:"main-area",className:"".concat(c?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-130px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(v?"showChatPanel":"hideChatPanel"," ").concat(l?"showParticipantsPanel":"hideParticipantsPanel"," ").concat((null===s||void 0===s?void 0:s.size)&&u?"showScreenShare":"hideScreenShare")},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(m,"/imgs/app-banner.jpg"),alt:"AppBG"},void 0),(0,o.jsxs)("div",pi({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(Re.u,pi({className:"transition-left-panel",show:l,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)($r,{},void 0)}),void 0),(0,o.jsxs)("div",pi({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(Co,{},void 0),(0,o.jsx)(fi,{currentRoom:n,audioSubscribers:r,videoSubscribers:a,screenShareTracks:s},void 0)]}),void 0),p?(0,o.jsx)(Re.u,pi({className:"transition-right-panel",show:v,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(Po,{currentRoom:n,isRecorder:c},void 0)}),void 0):null]}),void 0)]}),void 0)};var gi=function(){return gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gi.apply(this,arguments)},wi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ji=(0,Pe.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const Si=function(e){var t=e.onCloseModal,n=wi((0,i.useState)(!0),2),r=n[0],a=n[1],s=we(ji),c=ge(),l=function(){a(!1),c(P(!1)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",gi({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",gi({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",gi({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return l()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)("p",gi({className:"text-base text-[#004D90] font-normal mb-5 text-center"},{children:"How would you like to join?"}),void 0),(0,o.jsxs)("div",gi({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",gi({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return c(Q(!0)),void l()}},{children:[(0,o.jsx)("div",gi({className:"h-[40px] w-[40px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1"},void 0)}),void 0),(0,o.jsx)("p",gi({className:"text-sm brand-color1 font-normal"},{children:"Microphone"}),void 0)]}),void 0),(0,o.jsxs)("button",gi({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",gi({className:"camera h-[40px] w-[40px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return l()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only brand-color1"},void 0)}),void 0),(0,o.jsx)("p",gi({className:"text-sm brand-color1 font-normal"},{children:"Listen only"}),void 0)]}),void 0)]}),void 0)]}),void 0)}),void 0):null},void 0)};var ki=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o;ye.dispatch(w({sid:e.sid,userId:e.identity,name:null!==(n=e.name)&&void 0!==n?n:"",metadata:e.metadata?JSON.parse(e.metadata):null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(o=null===(r=e.joinedAt)||void 0===r?void 0:r.getTime())&&void 0!==o?o:Date.now()})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=y.selectById(ye.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&ye.dispatch(O({isActive:!1,sharedBy:""})),ye.dispatch(j(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1)},this.connectionQualityChanged=function(e,n){ye.dispatch(S({id:n.identity,changes:{connectionQuality:e}})),e===Ae.ConnectionQuality.Poor&&n.sid===t.that.room.localParticipant.sid&&(0,c.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);ye.dispatch(S({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(ye.dispatch(E(r)),ye.dispatch(Y(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),ye.dispatch(J(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const Ni=ki;var _i=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;ye.dispatch(S({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.userId)&&ye.dispatch(z(!0))},this.trackUnmuted=function(e,t){var n;ye.dispatch(S({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=ye.getState().session.currenUser)||void 0===n?void 0:n.userId)&&ye.dispatch(z(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,i,a,s;if((this.roomMetadata||(this.roomMetadata=ye.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=ye.getState().session.currenUser),t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===Ae.Track.Source.Camera)&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(a=null===(i=this.currentUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===Ae.Track.Source.ScreenShare||e.source===Ae.Track.Source.ScreenShareAudio?(ye.dispatch(S({id:t.identity,changes:{screenShareTrack:1}})),ye.dispatch(O({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(ye.dispatch(S({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ae.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ae.Track.Source.Microphone})).length}})),e.source===Ae.Track.Source.Microphone?(this.that.updateAudioSubscribers(t),ye.dispatch(S({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===Ae.Track.Source.ScreenShare||e.source===Ae.Track.Source.ScreenShareAudio?(ye.dispatch(S({id:t.identity,changes:{screenShareTrack:0}})),ye.dispatch(O({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(ye.dispatch(S({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ae.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ae.Track.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===Ae.Track.Source.Microphone?this.that.updateAudioSubscribers(t,!1):this.that.updateVideoSubscribers(t,!1))},e}();const Ti=_i;var Pi=new TextDecoder,Ai=function(e){var t=this;this.dataReceived=function(e,n,r){t.requestedParticipant=n;var o=Pi.decode(e);if(o){var i;try{i=JSON.parse(o)}catch(a){return}r===Ae.DataPacket_Kind.RELIABLE&&"SYSTEM"===i.type&&t.handleSystemTypeData(i.body)}},this.handleSystemTypeData=function(e){switch(e.type){case Bt.RAISE_HAND:case Bt.INFO:(0,c.Am)(e.msg,{type:"info"}),t.playNotification(e.type);break;case Bt.ALERT:(0,c.Am)(e.msg,{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Bt.RAISE_HAND&&e!==Bt.ALERT||ye.dispatch(fe(!0))},this.that=e};const Ri=Ai;var Oi=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){console.log(t),uo().isEmpty(t)||(uo().isObject(t)?e.metadata=t:e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),ye.dispatch(I(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r=ye.getState().session.isActiveRecording;!r&&(null===(t=e.metadata)||void 0===t?void 0:t.is_recording)?(0,c.Am)("This session is being recording",{type:"info"}):r&&!(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)&&(0,c.Am)("This session is no longer recording",{type:"info"})},this.showRTMPNotification=function(){var t,n,r=ye.getState().session.isActiveRtmpBroadcasting;!r&&(null===(t=e.metadata)||void 0===t?void 0:t.is_active_rtmp)?(0,c.Am)("This session is broadcasting using RTMP",{type:"info"}):r&&!(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)&&(0,c.Am)("This session is no longer broadcasting by RTMP",{type:"info"})},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if(uo().isEmpty(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};ye.dispatch(ie(o))}}};const Ci=Oi;var Ei=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(e.length){var n=ye.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,i,a;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var c={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(a=null===(i=e.lastSpokeAt)||void 0===i?void 0:i.getTime())&&void 0!==a?a:Date.now()};ye.dispatch(f(c)),t.activeSpeakers.push(c)}))}else t.activeSpeakers=[]},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?ye.dispatch(p(t.activeSpeakers)):d.selectAll(ye.getState()).length&&ye.dispatch(h())}),1500)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const Ii=Ei;var Mi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Fi=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ui=function(){function e(e,t,n,r,o,i){var a=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.url=window.LIVEKIT_SERVER_URL,this.connect=function(){return Mi(a,void 0,void 0,(function(){var e;return Fi(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),cr=ye.getState().session,mr(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return Mi(a,void 0,void 0,(function(){var e=this;return Fi(this,(function(t){return ye.dispatch(A({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),"RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(t){e.handleParticipant.addParticipant(t),t.getTracks().forEach((function(n){n.isSubscribed&&(n.source===Ae.Track.Source.ScreenShare||n.source===Ae.Track.Source.ScreenShareAudio?(ye.dispatch(S({id:t.identity,changes:{screenShareTrack:1}})),ye.dispatch(O({isActive:!0,sharedBy:t.identity}))):e.updateVideoSubscribers(t))}))})),[2]}))}))},this.updateSession=function(){return Mi(a,void 0,void 0,(function(){return Fi(this,(function(e){return ye.dispatch(T(this.token)),ye.dispatch(R({sid:this._room.sid,room_id:this._room.name})),!uo().isEmpty(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r=new Ae.Room({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:Ae.VideoPresets.hd.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n}});return r.on(Ae.RoomEvent.Reconnecting,(function(){return a.roomConnectionStatusState("re-connecting")})),r.on(Ae.RoomEvent.Reconnected,(function(){return a.roomConnectionStatusState("connected")})),r.on(Ae.RoomEvent.Disconnected,a.onDisconnected),r.on(Ae.RoomEvent.RoomMetadataChanged,a.handleRoomMetadata.setRoomMetadata),r.on(Ae.RoomEvent.ActiveSpeakersChanged,a.handleActiveSpeakers.activeSpeakersChanged),r.on(Ae.RoomEvent.MediaDevicesError,a.mediaDevicesError),r.on(Ae.RoomEvent.DataReceived,a.handleDataMessages.dataReceived),r.on(Ae.RoomEvent.ParticipantConnected,a.handleParticipant.participantConnected),r.on(Ae.RoomEvent.ParticipantDisconnected,a.handleParticipant.participantDisconnected),r.on(Ae.RoomEvent.ParticipantMetadataChanged,a.handleParticipant.setParticipantMetadata),r.on(Ae.RoomEvent.ConnectionQualityChanged,a.handleParticipant.connectionQualityChanged),r.on(Ae.RoomEvent.LocalTrackPublished,a.handleMediaTracks.localTrackPublished),r.on(Ae.RoomEvent.LocalTrackUnpublished,a.handleMediaTracks.localTrackUnpublished),r.on(Ae.RoomEvent.TrackSubscribed,a.handleMediaTracks.trackSubscribed),r.on(Ae.RoomEvent.TrackUnpublished,a.handleMediaTracks.trackUnsubscribed),r.on(Ae.RoomEvent.TrackSubscriptionFailed,a.handleMediaTracks.trackSubscriptionFailed),r.on(Ae.RoomEvent.TrackMuted,a.handleMediaTracks.trackMuted),r.on(Ae.RoomEvent.TrackUnmuted,a.handleMediaTracks.trackUnmuted),r.on(Ae.RoomEvent.TrackStreamStateChanged,a.handleMediaTracks.trackStreamStateChanged),r},this.onDisconnected=function(){a.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),a.roomConnectionStatusState("disconnected"),fr&&(null===lr||void 0===lr||lr.close(),hr=!0),a.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(a.tokenRenewInterval),a.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){a.tokenRenewInterval=setInterval((function(){var e=ye.getState().session.token,t={type:Wt.SYSTEM,message_id:"",room_sid:a._room.sid,room_id:a._room.name,body:{type:Bt.RENEW_TOKEN,from:{sid:a._room.localParticipant.sid,userId:a._room.localParticipant.identity},msg:e}};_r(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?(a._screenShareTracksMap.set(e.source,e),t.sid!==a._room.localParticipant.sid&&e.source===Ae.Track.Source.ScreenShareAudio&&a._screenShareTracksMap.set(e.source,e)):a._screenShareTracksMap.delete(e.source),a.screenShareTracksState(new Map(a._screenShareTracksMap))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.sid?e.sid!==a._room.localParticipant.sid&&(t?a._audioSubscribersMap.set(e.sid,e):a._audioSubscribersMap.has(e.sid)&&a._audioSubscribersMap.delete(e.sid),a.audioSubscribersState(new Map(a._audioSubscribersMap)),ye.dispatch(U(a.audioSubscribersState.length))):console.log("participant.sid undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.sid)if(t?a._videoSubscribersMap.set(e.sid,e):a._videoSubscribersMap.has(e.sid)&&(console.log("removing..",e.sid),a._videoSubscribersMap.delete(e.sid)),ye.dispatch(F(a._videoSubscribersMap.size)),a._videoSubscribersMap.size<=1)a.videoSubscribersState(new Map(a._videoSubscribersMap));else{var n=Array.from(a._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=a._room.localParticipant)||void 0===t?void 0:t.sid)}));if(n.sort((function(e,t){var n,r,o,i,a,s,c,l,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var v=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(i=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==i?i:0)-v}return(null!==(s=null===(a=u.joinedAt)||void 0===a?void 0:a.getTime())&&void 0!==s?s:0)-(null!==(l=null===(c=d.joinedAt)||void 0===c?void 0:c.getTime())&&void 0!==l?l:0)})),a._room.localParticipant.getTracks().length){var r=[a._room.localParticipant.sid,a._room.localParticipant];n.unshift(r)}a.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.sid undefined")},this.token=ye.getState().session.token,this.audioSubscribersState=e,this.videoSubscribersState=t,this.screenShareTracksState=i,this.currentRoomState=n,this.errorState=r,this.roomConnectionStatusState=o,this.handleParticipant=new Ni(this),this.handleMediaTracks=new Ti(this),this.handleDataMessages=new Ri(this),this.handleRoomMetadata=new Ci,this.handleActiveSpeakers=new Ii(this),this.roomConnectionStatusState("connecting"),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const Li=Ui;var Di=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Vi=function(){var e=Di((0,i.useState)(),2),t=e[0],n=e[1],r=Di((0,i.useState)(),2),o=r[0],a=r[1],s=Di((0,i.useState)("loading.."),2),c=s[0],l=s[1],u=Di((0,i.useState)(),2),d=u[0],v=u[1],f=Di((0,i.useState)(),2),p=f[0],h=f[1],m=Di((0,i.useState)(),2),x=m[0],b=m[1];return{error:t,setError:n,roomConnectionStatus:c,setRoomConnectionStatus:l,currentRoom:o,audioSubscribers:d,videoSubscribers:p,screenShareTracks:x,startLivekitConnection:function(){new Li(v,h,a,n,l,b)}}};var Wi=function(){return Wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wi.apply(this,arguments)},Bi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},zi=(0,Pe.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),Gi=(0,Pe.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Hi=i.memo((function(){var e,t=ge(),n=(0,i.useRef)(null),r=we(zi),a=we(Gi),s=Bi((0,i.useState)(!1),2),c=s[0],l=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,i.useEffect)((function(){var e=n.current;r&&(!c&&a&&(null===e||void 0===e||e.play()),t(fe(!1)))}),[r,c,a,t]),(0,i.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return l(!0)})),e.addEventListener("ended",(function(){return l(!1)}))),function(){e&&(e.pause(),e.src="",e.removeEventListener("playing",(function(){return l(!0)})),e.removeEventListener("ended",(function(){return l(!1)})))}}),[]),(0,o.jsx)("div",Wi({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")},void 0)}),void 0)}));var Ji=function(){return Ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ji.apply(this,arguments)},Yi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ki=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Qi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const qi=function(){var e=ge(),t=Vi(),n=t.error,r=t.setError,a=t.roomConnectionStatus,s=t.setRoomConnectionStatus,c=t.currentRoom,l=t.audioSubscribers,u=t.videoSubscribers,d=t.screenShareTracks,v=t.startLivekitConnection,f=Qi((0,i.useState)(!0),2),p=f[0],h=f[1],m=Qi((0,i.useState)(!1),2),x=m[0],b=m[1],y=Qi((0,i.useState)(""),2),g=y[0],w=y[1],j=Qi((0,i.useState)("landscape-device"),2),S=j[0],k=j[1],N=Qi((0,i.useState)(""),2),_=N[0],P=N[1],A=(0,i.useRef)(null);(0,i.useEffect)((function(){var t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());if("undefined"===typeof n.access_token)h(!1),r({title:"Access token missing",text:"Access token is require which is missing"});else{c||(s("checking"),Yi(void 0,void 0,void 0,(function(){var t;return Ki(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Vt("verifyToken",{})];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),s("ready"),h(!1),r({title:"Verification failed!",text:"Token isn't valid!"}),[2];case 3:return s("ready"),h(!1),t.status?e(T(n.access_token)):r({title:"Verification failed!",text:t.msg}),[2]}}))})))}}),[e,c,r,s]),(0,i.useEffect)((function(){h("connecting"===a||"re-connecting"===a||"checking"===a)}),[a]),(0,i.useEffect)((function(){c&&("RECORDER_BOT"!==c.localParticipant.identity&&"RTMP_BOT"!==c.localParticipant.identity||b(!0))}),[c]),(0,i.useEffect)((function(){window.onresize=function(){e($(window.innerWidth));var t=ye.getState().bottomIconsActivity.isActiveChatPanel,n=ye.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&t&&n&&e(J(!1))},e($(window.innerWidth)),window.innerWidth<1024&&(e(J(!1)),e(H(!1)));var t="is-pc",n=new(Se())(window.navigator.userAgent);n.mobile()?t="is-mobile ":n.tablet()&&(t="is-tablet ");var r=n.os();"AndroidOS"===r?t+="is-android":"iOS"!==r&&"iPadOS"!==r||(t+="is-ios"),w(t);var o=window.matchMedia("(orientation: portrait)");o.matches&&k("portrait-device"),o.addEventListener("change",(function(e){e.matches?k("portrait-device"):k("landscape-device")}))}),[e]),(0,i.useEffect)((function(){R()}),[null===c||void 0===c?void 0:c.state]);var R=function(){var e=A.current;e&&(console.log(window.innerHeight),console.log(e.clientHeight),P("".concat(e.clientHeight,"px")))},O=function(){v()};return(0,o.jsx)("div",Ji({className:"".concat(S," ").concat(g),style:{height:_}},{children:p?(0,o.jsx)(Te,{text:a},void 0):n&&!p?(0,o.jsx)(Ne,{title:n.title,text:n.text},void 0):"connected"===(null===c||void 0===c?void 0:c.state)?c?(0,o.jsxs)("div",Ji({className:"plugNmeet-app overflow-hidden",ref:A},{children:[x?null:(0,o.jsx)(Xn,{currentRoom:c},void 0),(0,o.jsx)(yi,{currentRoom:c,audioSubscribers:l,videoSubscribers:u,screenShareTracks:d,isRecorder:x},void 0),x?null:(0,o.jsx)(On,{currentRoom:c},void 0),(0,o.jsx)(Hi,{},void 0)]}),void 0):null:"ready"===a?(0,o.jsx)(Si,{onCloseModal:O},void 0):null}),void 0)};var Xi=function(){return Xi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xi.apply(this,arguments)};a.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsxs)(s.zt,Xi({store:ye},{children:[(0,o.jsx)(qi,{},void 0),(0,o.jsx)(c.Ix,{},void 0)]}),void 0)},void 0),document.getElementById("plugNmeet-app"))},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{}},e=>{e.O(0,[736],(()=>{return t=934,e(e.s=t);var t}));e.O()}]);