/*! For license information please see main.7dc2d304d4361b35e1f8.js.LICENSE.txt */
(self.webpackChunkplugnmeet_client=self.webpackChunkplugnmeet_client||[]).push([[179],{77410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Abs:()=>r.SYM,Acos:()=>r.VGw,Acosh:()=>r.SpW,AdadeltaOptimizer:()=>r.zJI,AdagradOptimizer:()=>r.HeW,AdamOptimizer:()=>r.a4z,AdamaxOptimizer:()=>r.DBS,Add:()=>r.mm_,AddN:()=>r.Xze,All:()=>r.oT6,Any:()=>r.IKK,ArgMax:()=>r.sJF,ArgMin:()=>r.aJk,Asin:()=>r.M2y,Asinh:()=>r.qw7,Atan:()=>r.jMg,Atan2:()=>r.QCc,Atanh:()=>r.Oyi,AvgPool:()=>r.JhU,AvgPool3D:()=>r._k9,AvgPool3DGrad:()=>r.IMb,AvgPoolGrad:()=>r.ROF,BatchMatMul:()=>r.XLW,BatchToSpaceND:()=>r.zws,Bincount:()=>r.zvY,BroadcastArgs:()=>r.eEB,BroadcastTo:()=>r.Ly9,Cast:()=>r.RFZ,Ceil:()=>r.gJX,ClipByValue:()=>r.xnO,Complex:()=>r.Zz9,ComplexAbs:()=>r.yj2,Concat:()=>r.Eh3,Conv2D:()=>r.mhS,Conv2DBackpropFilter:()=>r.wUP,Conv2DBackpropInput:()=>r.wm,Conv3D:()=>r.x12,Conv3DBackpropFilterV2:()=>r.o2y,Conv3DBackpropInputV2:()=>r.ik2,Cos:()=>r.mc4,Cosh:()=>r.TR1,CropAndResize:()=>r.VcC,Cumsum:()=>r.iHb,DataStorage:()=>r.JLz,DenseBincount:()=>r.QRR,DepthToSpace:()=>r.T0n,DepthwiseConv2dNative:()=>r.cie,DepthwiseConv2dNativeBackpropFilter:()=>r.sL$,DepthwiseConv2dNativeBackpropInput:()=>r.y7R,Diag:()=>r.$w,Dilation2D:()=>r.p4S,Dilation2DBackpropFilter:()=>r.Vn9,Dilation2DBackpropInput:()=>r.ekb,ENV:()=>r.ViN,Einsum:()=>r.$g6,Elu:()=>r.SX0,EluGrad:()=>r.HEU,Environment:()=>r.qAh,Equal:()=>r.hdR,Erf:()=>r.Omj,Exp:()=>r.NEP,ExpandDims:()=>r.YFo,Expm1:()=>r.Y0y,FFT:()=>r.vwp,Fill:()=>r.deh,FlipLeftRight:()=>r.Uyb,Floor:()=>r.OR,FloorDiv:()=>r.jeX,FromPixels:()=>r.eBW,FusedBatchNorm:()=>r.sHE,FusedConv2D:()=>r._V0,FusedDepthwiseConv2D:()=>r.luS,GatherNd:()=>r.q1x,GatherV2:()=>r.qi_,Greater:()=>r.iZT,GreaterEqual:()=>r.Acj,IFFT:()=>r.Qg5,Identity:()=>r.iJz,Imag:()=>r.J_u,IsFinite:()=>r.avt,IsInf:()=>r.iWB,IsNan:()=>r.r7n,KernelBackend:()=>r.Zuw,LRN:()=>r.eZ0,LRNGrad:()=>r.Hhh,LeakyRelu:()=>r.J$2,Less:()=>r.vtC,LessEqual:()=>r.CAk,LinSpace:()=>r.e7N,Log:()=>r.ZbH,Log1p:()=>r.kU,LogSoftmax:()=>r.qCd,LogicalAnd:()=>r.PYm,LogicalNot:()=>r.VfG,LogicalOr:()=>r.MZg,Max:()=>r.YoZ,MaxPool:()=>r.mTV,MaxPool3D:()=>r.OAf,MaxPool3DGrad:()=>r.OU7,MaxPoolGrad:()=>r.OV7,MaxPoolWithArgmax:()=>r.vFR,Maximum:()=>r.BMI,Mean:()=>r.q2K,Min:()=>r.c17,Minimum:()=>r.q8u,MirrorPad:()=>r.jQs,Mod:()=>r.Vbg,MomentumOptimizer:()=>r.rIn,Multinomial:()=>r.NZg,Multiply:()=>r.wYn,Neg:()=>r.kuV,NonMaxSuppressionV3:()=>r.uv1,NonMaxSuppressionV4:()=>r.cye,NonMaxSuppressionV5:()=>r.W0H,NotEqual:()=>r.yQU,OP_SCOPE_SUFFIX:()=>r.zvA,OneHot:()=>r.we_,OnesLike:()=>r.qWM,Optimizer:()=>r.gaJ,OptimizerConstructors:()=>r.eEe,Pack:()=>r.QiL,PadV2:()=>r.lyA,Pool:()=>r.Kgp,Pow:()=>r.pe_,Prelu:()=>r.o0g,Prod:()=>r.DlI,RMSPropOptimizer:()=>r.gVI,Range:()=>r.e6w,Rank:()=>r.yw1,Real:()=>r.xJR,RealDiv:()=>r.oHH,Reciprocal:()=>r.$HU,Reduction:()=>r.IH3,Relu:()=>r.qkr,Relu6:()=>r.SbG,Reshape:()=>r.HZH,ResizeBilinear:()=>r._Yw,ResizeBilinearGrad:()=>r.zbQ,ResizeNearestNeighbor:()=>r.dpD,ResizeNearestNeighborGrad:()=>r.Hmb,Reverse:()=>r.mKl,RotateWithOffset:()=>r.b9H,Round:()=>r.e07,Rsqrt:()=>r.bV0,SGDOptimizer:()=>r.DYp,ScatterNd:()=>r.xQA,Select:()=>r.PhF,Selu:()=>r.oFR,Sigmoid:()=>r.a5O,Sign:()=>r.i5y,Sin:()=>r.RQH,Sinh:()=>r.wYB,Slice:()=>r.p2w,Softmax:()=>r.Gcp,Softplus:()=>r.MRv,SpaceToBatchND:()=>r.TQc,SparseFillEmptyRows:()=>r.O3z,SparseReshape:()=>r.nhH,SparseSegmentMean:()=>r.w3H,SparseSegmentSum:()=>r.ZjV,SparseToDense:()=>r.D2d,SplitV:()=>r.L8s,Sqrt:()=>r.FKq,Square:()=>r.bK0,SquaredDifference:()=>r._tC,Step:()=>r.h8e,StridedSlice:()=>r.jQk,StringNGrams:()=>r._JP,StringSplit:()=>r.s1s,StringToHashBucketFast:()=>r.XkS,Sub:()=>r.Tr8,Sum:()=>r.GBy,Tan:()=>r.sEM,Tanh:()=>r.MIZ,Tensor:()=>r.esB,TensorBuffer:()=>r.YDk,Tile:()=>r.n9L,TopK:()=>r.cWu,Transform:()=>r.wx7,Transpose:()=>r.G3Y,Unique:()=>r.kpP,Unpack:()=>r.ToN,UnsortedSegmentSum:()=>r.Qvg,Variable:()=>r._wD,ZerosLike:()=>r.RuY,_FusedMatMul:()=>r.usg,abs:()=>r.WnP,acos:()=>r.Khb,acosh:()=>r.__u,add:()=>r.IHx,addN:()=>r.QBD,all:()=>r.$6P,any:()=>r.YjB,argMax:()=>r.NqF,argMin:()=>r.vHJ,asin:()=>r.ZRM,asinh:()=>r.VfV,atan:()=>r.z4N,atan2:()=>r.fvJ,atanh:()=>r.C80,avgPool:()=>r.wS1,avgPool3d:()=>r.uR5,backend:()=>r.y3$,backend_util:()=>r.Wap,basicLSTMCell:()=>r.zEQ,batchNorm:()=>r.tgs,batchNorm2d:()=>r.Dxk,batchNorm3d:()=>r.JY5,batchNorm4d:()=>r.p3b,batchToSpaceND:()=>r.E4h,bincount:()=>r.yE8,booleanMaskAsync:()=>r.anm,broadcastArgs:()=>r.XsQ,broadcastTo:()=>r.UFq,broadcast_util:()=>r.Jyw,browser:()=>r.Xhn,buffer:()=>r.f3b,cast:()=>r.pju,ceil:()=>r.mDi,clipByValue:()=>r.iUl,clone:()=>r.d9v,complex:()=>r.PYB,concat:()=>r.zoF,concat1d:()=>r.gME,concat2d:()=>r.Izb,concat3d:()=>r.MNy,concat4d:()=>r.ZaL,conv1d:()=>r.PAt,conv2d:()=>r.Tek,conv2dTranspose:()=>r.bc,conv3d:()=>r.pdZ,conv3dTranspose:()=>r.$QV,copyRegisteredKernels:()=>r.T3b,cos:()=>r.mCk,cosh:()=>r.f9Y,cosineWindow:()=>r.mew,cumsum:()=>r.zbp,customGrad:()=>r.cbc,denseBincount:()=>r.ppE,deprecationWarn:()=>r.MXe,depthToSpace:()=>r.nTT,depthwiseConv2d:()=>r.B10,device_util:()=>r.C2$,diag:()=>r.Ka3,dilation2d:()=>r.WmZ,disableDeprecationWarnings:()=>r.cFr,dispose:()=>r.B90,disposeVariables:()=>r.N8o,div:()=>r.hiC,divNoNan:()=>r.NTj,dot:()=>r.AKD,dropout:()=>r.rvX,einsum:()=>r.WYO,elu:()=>r.pyx,enableDebugMode:()=>r.Ra$,enableProdMode:()=>r.G48,enclosingPowerOfTwo:()=>r.GRh,engine:()=>r.SRH,env:()=>r.OBj,equal:()=>r.DgJ,erf:()=>r.qNN,exp:()=>r.Qqt,expandDims:()=>r.dt4,expm1:()=>r.t$B,eye:()=>r.iyy,fft:()=>r.kp_,fill:()=>r.hlL,findBackend:()=>r.x3e,findBackendFactory:()=>r.zel,floor:()=>r.GWj,floorDiv:()=>r.qPi,fused:()=>r.imm,gather:()=>r.Iqj,gatherND:()=>r.dbB,gather_util:()=>r.DaI,getBackend:()=>r.N_N,getGradient:()=>r.ukX,getKernel:()=>r.pIF,getKernelsForBackend:()=>r.trD,grad:()=>r.UQy,grads:()=>r.tiA,greater:()=>r.pjt,greaterEqual:()=>r.brS,ifft:()=>r.Sxn,imag:()=>r.asL,image:()=>r.BHj,inTopKAsync:()=>r.V3u,io:()=>r.io,irfft:()=>r.wx0,isFinite:()=>r.xVT,isInf:()=>r.UWc,isNaN:()=>r.i2d,keep:()=>r.CnY,kernel_impls:()=>r.GDt,leakyRelu:()=>r.hi7,less:()=>r.d9m,lessEqual:()=>r.zN1,linalg:()=>r.$r2,linspace:()=>r.SX3,localResponseNormalization:()=>r.G9k,log:()=>r.cM7,log1p:()=>r.Krr,logSigmoid:()=>r.e_t,logSoftmax:()=>r.CmS,logSumExp:()=>r.l_t,logicalAnd:()=>r.HvI,logicalNot:()=>r.hJK,logicalOr:()=>r.K5V,logicalXor:()=>r.egP,losses:()=>r.MB5,matMul:()=>r.OI3,math:()=>r.mAU,max:()=>r.Fp7,maxPool:()=>r._sB,maxPool3d:()=>r.YQQ,maxPoolWithArgmax:()=>r.Ip$,maximum:()=>r.gWQ,mean:()=>r.J69,memory:()=>r.sq6,meshgrid:()=>r.ry_,min:()=>r.VV$,minimum:()=>r.LTh,mirrorPad:()=>r.VdP,mod:()=>r.wQq,moments:()=>r.Gi7,movingAverage:()=>r.p_,mul:()=>r.dC7,multiRNNCell:()=>r.rq4,multinomial:()=>r.SJ_,neg:()=>r.W76,nextFrame:()=>r.glt,norm:()=>r.KOy,notEqual:()=>r.Quu,oneHot:()=>r.lfX,ones:()=>r.iUs,onesLike:()=>r.JpU,op:()=>r.op,outerProduct:()=>r.N2O,pad:()=>r.vku,pad1d:()=>r.pNR,pad2d:()=>r.koy,pad3d:()=>r.t1L,pad4d:()=>r.lGY,pool:()=>r.d_R,pow:()=>r.sQ3,prelu:()=>r.AL3,print:()=>r.S0v,prod:()=>r.WVs,profile:()=>r.N5s,rand:()=>r.TN_,randomGamma:()=>r.wzB,randomNormal:()=>r.nGf,randomUniform:()=>r.LGj,range:()=>r.w6H,ready:()=>r.Cd_,real:()=>r.kwC,reciprocal:()=>r.M25,registerBackend:()=>r.jqO,registerGradient:()=>r.LiG,registerKernel:()=>r.wCN,relu:()=>r.UYe,relu6:()=>r.btT,removeBackend:()=>r.cjG,reshape:()=>r.XLQ,reverse:()=>r.GYS,reverse1d:()=>r.SDf,reverse2d:()=>r.diP,reverse3d:()=>r.sx7,reverse4d:()=>r.mG2,rfft:()=>r.QEs,round:()=>r.NMM,rsqrt:()=>r.bp0,scalar:()=>r.iD$,scatterND:()=>r.snQ,scatter_util:()=>r.yV1,selu:()=>r.U8D,separableConv2d:()=>r.U_I,serialization:()=>r.m7h,setBackend:()=>r.CQI,setPlatform:()=>r.VYu,setdiff1dAsync:()=>r.ODp,sigmoid:()=>r.XD2,sign:()=>r.Xxe,signal:()=>r.tdS,sin:()=>r.O$l,sinh:()=>r.R_K,slice:()=>r.tPi,slice1d:()=>r.jZU,slice2d:()=>r.SmN,slice3d:()=>r.CnO,slice4d:()=>r.p0P,slice_util:()=>r.kuN,softmax:()=>r.XAC,softplus:()=>r.Wvh,spaceToBatchND:()=>r.fBT,sparse:()=>r.rVs,sparseToDense:()=>r.ers,spectral:()=>r.uN7,split:()=>r.Vl2,sqrt:()=>r._b3,square:()=>r.h62,squaredDifference:()=>r.$i,squeeze:()=>r.L9e,stack:()=>r.knu,step:()=>r.Nbs,stridedSlice:()=>r.NXj,string:()=>r.Z_8,sub:()=>r.luU,sum:()=>r.Smz,sumOutType:()=>r.z4k,tan:()=>r.ORZ,tanh:()=>r.AEp,tensor:()=>r.XeE,tensor1d:()=>r.RRF,tensor2d:()=>r.odF,tensor3d:()=>r.wOQ,tensor4d:()=>r.yXz,tensor5d:()=>r.Bfx,tensor6d:()=>r.xZs,tensor_util:()=>r.piX,test_util:()=>r.p3L,tidy:()=>r.lub,tile:()=>r.Gg6,time:()=>r.XVJ,topk:()=>r.hg7,train:()=>r.p_j,transpose:()=>r.p4s,truncatedNormal:()=>r.Xu6,unique:()=>r.Two,unregisterGradient:()=>r.bt3,unregisterKernel:()=>r.nEe,unsortedSegmentSum:()=>r.pUJ,unstack:()=>r.HHK,upcastType:()=>r.x8V,util:()=>r.D5U,valueAndGrad:()=>r.h76,valueAndGrads:()=>r.fNQ,variable:()=>r.VD$,variableGrads:()=>r.pnJ,version_core:()=>r.jTM,where:()=>r.arb,whereAsync:()=>r.itS,zeros:()=>r.lls,zerosLike:()=>r.P84});n(85186);var r=n(86931)},19747:(e,t,n)=>{"use strict";var r,o=n(85893),i=n(67294),a=n(73935),s=n(26372),c=n(39249),l=(n(21407),n(41796)),u=n(68718),d=n(26071),f=n(65538),p=null!==(r=window.STATIC_ASSETS_PATH)&&void 0!==r?r:"/assets";l.ZP.use(d.Z).use(u.Db).use(f.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:p+"/locales/{{lng}}/{{ns}}.json"}});const m=l.ZP;var v,h=n(85973),b=(0,h.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),g=b.getSelectors((function(e){return e.activeSpeakers})),x=(0,h.oM)({name:"activeSpeakers",initialState:b.getInitialState(),reducers:{addSpeaker:b.addOne,addManySpeakers:b.addMany,setAllSpeakers:b.setAll,removeSpeakers:b.removeAll}}),y=(v=x.actions).addSpeaker,w=(v.addManySpeakers,v.removeSpeakers),S=v.setAllSpeakers;const _=x.reducer;var j,k=(0,h.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),T=k.getSelectors((function(e){return e.participants})),E=(0,h.oM)({name:"participants",initialState:k.getInitialState(),reducers:{addParticipant:k.addOne,removeParticipant:k.removeOne,updateParticipant:k.updateOne}}),N=(j=E.actions).addParticipant,R=j.removeParticipant,A=j.updateParticipant;const C=E.reducer;var P,F=(0,h.oM)({name:"session",initialState:{token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,chat_features:{allow_chat:!0,allow_file_upload:!0},shared_note_pad_features:{allowed_shared_note_pad:!1,is_active:!1,visible:!1},whiteboard_features:{allowed_whiteboard:!0,visible:!1}}}}},reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currenUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currenUser&&(e.currenUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),O=(P=F.actions).addToken,I=P.toggleStartup,M=P.addCurrentUser,D=P.addCurrentRoom,U=P.updateScreenSharing,L=P.setWebcamPaginating,B=P.updateCurrentUserMetadata,W=P.updateCurrentRoomMetadata,V=P.updateIsChatServiceReady,G=P.updateTotalVideoSubscribers,H=P.updateTotalAudioSubscribers,z=P.updateMuteOnStart,q=P.updateUserDeviceType;const X=F.reducer;var J,Y,$={type:"none"},K=null!==(J=window.STATIC_ASSETS_PATH)&&void 0!==J?J:"./assets",Q=["architecture-5082700_1280","porch-691330_1280","saxon-switzerland-539418_1280","shibuyasky-4768679_1280"].map((function(e){return"".concat(K,"/backgrounds/").concat(e,".jpg")})),Z={isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveSharedNotePad:!1,isActiveWhiteboard:!1,isMicMuted:!1,screenWidth:1024,screenHeight:500,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,totalUnreadChatMsgs:0,virtualBackground:$},ee=(0,h.oM)({name:"bottomIconsActivity",initialState:Z,reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload,e.isActiveChatPanel&&(e.totalUnreadChatMsgs=0)},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload,e.isActiveScreenshare&&(e.isActiveSharedNotePad=!1,e.isActiveWhiteboard=!1,e.isActiveParticipantsPanel=!1)},updateIsActiveSharedNotePad:function(e,t){e.isActiveSharedNotePad=t.payload,e.isActiveSharedNotePad&&(e.isActiveParticipantsPanel=!1)},updateIsActiveWhiteboard:function(e,t){e.isActiveWhiteboard=t.payload,e.isActiveWhiteboard&&(e.isActiveParticipantsPanel=!1)},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateScreenHeight:function(e,t){e.screenHeight=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateTotalUnreadChatMsgs:function(e){e.isActiveChatPanel||(e.totalUnreadChatMsgs+=1)},updateVirtualBackground:function(e,t){e.virtualBackground=t.payload}}}),te=(Y=ee.actions).updateIsActiveMicrophone,ne=Y.updateIsMicMuted,re=Y.updateIsActiveWebcam,oe=Y.updateIsActiveChatPanel,ie=Y.updateIsActiveParticipantsPanel,ae=Y.updateIsActiveRaisehand,se=(Y.updateIsActiveRecording,Y.updateIsActiveScreenshare),ce=Y.updateIsActiveSharedNotePad,le=Y.updateIsActiveWhiteboard,ue=Y.updateShowMicrophoneModal,de=Y.updateShowVideoShareModal,fe=Y.updateShowLockSettingsModal,pe=Y.updateShowRtmpModal,me=Y.updateScreenWidth,ve=Y.updateScreenHeight,he=Y.updateTotalUnreadChatMsgs,be=Y.updateVirtualBackground;const ge=ee.reducer;var xe,ye=(0,h.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),we=ye.getSelectors((function(e){return e.chatMessages})),Se=(0,h.oM)({name:"chat-messages",initialState:ye.getInitialState(),reducers:{addChatMessage:ye.addOne,removeChatMessage:ye.removeOne,updateChatMessage:ye.updateOne}}),_e=(xe=Se.actions).addChatMessage;xe.removeChatMessage,xe.updateChatMessage;const je=Se.reducer;var ke,Te=(0,h.oM)({name:"room-settings",initialState:{isShowRoomSettingsModal:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0},reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload}}}),Ee=(ke=Te.actions).addAudioDevices,Ne=ke.addVideoDevices,Re=ke.updateSelectedAudioDevice,Ae=ke.updateSelectedVideoDevice,Ce=ke.updatePlayAudioNotification,Pe=ke.updateShowRoomSettingsModal,Fe=ke.updateActivateWebcamsView,Oe=ke.updateActiveScreenSharingView,Ie=ke.updateAllowPlayAudioNotification;const Me=Te.reducer;var De,Ue=(0,h.oM)({name:"whiteboard",initialState:{excalidrawElements:"",mousePointerLocation:"",whiteboardFiles:"",requestedWhiteboardData:{requested:!1,sendTo:""}},reducers:{updateExcalidrawElements:function(e,t){e.excalidrawElements=t.payload},updateMousePointerLocation:function(e,t){e.mousePointerLocation=t.payload},addWhiteboardFile:function(e,t){var n=[];e.whiteboardFiles&&(n=JSON.parse(e.whiteboardFiles)),n.push(t.payload),e.whiteboardFiles=JSON.stringify(n)},addWhiteboardFileAsJSON:function(e,t){e.whiteboardFiles=t.payload},updateRequestedWhiteboardData:function(e,t){e.requestedWhiteboardData=t.payload}}}),Le=(De=Ue.actions).updateExcalidrawElements,Be=De.updateMousePointerLocation,We=De.addWhiteboardFile,Ve=De.addWhiteboardFileAsJSON,Ge=De.updateRequestedWhiteboardData;const He=Ue.reducer;var ze=(0,h.xC)({reducer:{participants:C,activeSpeakers:_,session:X,bottomIconsActivity:ge,chatMessages:je,roomSettings:Me,whiteboard:He},devTools:!1}),qe=function(){return(0,s.I0)()},Xe=s.v9,Je=n(12437),Ye=n.n(Je),$e=n(22327),Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ke.apply(this,arguments)};const Qe=function(e){var t,n=e.title,r=e.text,i=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",Ke({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(i,"/imgs/app-banner.jpg"),alt:"AppBG"}),(0,o.jsxs)("div",Ke({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] pt"},{children:[(0,o.jsx)("h2",Ke({className:"text-3xl font-medium mb-4 mt-[88px]"},{children:n})),(0,o.jsx)("p",{children:r})]}))]}))};var Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ze.apply(this,arguments)};const et=function(e){var t=e.text;return(0,o.jsx)("div",Ze({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",Ze({className:"inner"},{children:[(0,o.jsxs)("div",Ze({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})),(0,o.jsx)("p",Ze({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}))]}))}))};var tt=n(20573),nt=n(78219),rt=n(56727),ot=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},it=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function at(e){return ot(this,void 0,void 0,(function(){var t,n,r,o,i,a;return it(this,(function(s){switch(s.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if((r=(r=s.sent()).filter((function(t){return t.kind===e}))).length>1&&"default"===r[0].deviceId){for(o=r[0],i=1;i<r.length;i+=1)if(r[i].groupId===o.groupId){a=r[0],r[0]=r[i],r[i]=a;break}return[2,r.filter((function(e){return e!==o}))]}return n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}var st=function(e){return e.toString(16).padStart(2,"0")},ct=function(e){void 0===e&&(e=20);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,st).join("")},lt=function(e){void 0===e&&(e=10);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Number(t.join(""))},ut=function(){return ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ut.apply(this,arguments)};const dt=function(e){var t=e.deviceId,n=e.onSourcePlayback,r=e.onMediaStream,a=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=a.current,n={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(n).then((function(t){e&&(r(t),e.srcObject=t)})),function(){e&&(e.pause(),e.removeAttribute("src"))}}),[t]);return(0,o.jsx)("div",ut({className:"preview-camera-webcam"},{children:(0,o.jsx)("video",{className:"my-5 w-full",ref:a,autoPlay:!0,height:"50",onLoadedData:function(e){var t=e.target;n({htmlElement:t,width:330,height:200})}})}))};var ft={"640x360":[640,360],"256x256":[256,256],"256x144":[256,144],"160x96":[160,96]},pt={model:"meet",backend:"wasmSimd",inputResolution:"160x96",pipeline:"webgl2"};var mt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ht=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function bt(e,t,n,r,o,i,a){var s=r.getContext("2d"),c=ht(ft[n.inputResolution],2),l=c[0],u=c[1],d=l*u,f=new ImageData(l,u),p=document.createElement("canvas");p.width=l,p.height=u;var m,v=p.getContext("2d"),h=i._getInputMemoryOffset()/4,b=i._getOutputMemoryOffset()/4;function g(){return mt(this,void 0,void 0,(function(){var e,t;return vt(this,(function(n){switch(n.label){case 0:return[4,o.segmentPerson(p)];case 1:for(e=n.sent(),t=0;t<d;t++)f.data[4*t+3]=e.data[t]?255:0;return v.putImageData(f,0,0),[2]}}))}))}return{render:function(){return mt(this,void 0,void 0,(function(){return vt(this,(function(r){switch(r.label){case 0:return"none"!==t.type&&function(){if(v.drawImage(e.htmlElement,0,0,e.width,e.height,0,0,l,u),"meet"===n.model||"mlkit"===n.model)for(var t=v.getImageData(0,0,l,u),r=0;r<d;r++)i.HEAPF32[h+3*r]=t.data[4*r]/255,i.HEAPF32[h+3*r+1]=t.data[4*r+1]/255,i.HEAPF32[h+3*r+2]=t.data[4*r+2]/255}(),a(),"none"===t.type?[3,3]:"bodyPix"!==n.model?[3,2]:[4,g()];case 1:return r.sent(),[3,3];case 2:!function(){i._runInference();for(var e=0;e<d;e++)if("meet"===n.model){var t=i.HEAPF32[b+2*e],r=i.HEAPF32[b+2*e+1],o=Math.max(t,r),a=Math.exp(t-o),s=Math.exp(r-o);f.data[4*e+3]=255*s/(a+s)}else if("mlkit"===n.model){r=i.HEAPF32[b+e];f.data[4*e+3]=255*r}v.putImageData(f,0,0)}(),r.label=3;case 3:return a(),function(){s.globalCompositeOperation="copy",s.filter="none",(null===m||void 0===m?void 0:m.smoothSegmentationMask)&&("blur"===t.type?s.filter="blur(8px)":"image"===t.type&&(s.filter="blur(4px)"));"none"!==t.type&&(s.drawImage(p,0,0,l,u,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.filter="none");s.drawImage(e.htmlElement,0,0),"blur"===t.type&&(s.globalCompositeOperation="destination-over",s.filter="blur(8px)",s.drawImage(e.htmlElement,0,0))}(),[2]}}))}))},updatePostProcessingConfig:function(e){m=e},cleanUp:function(){}}}var gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},xt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yt=String.raw;function wt(e,t,n,r,o){var i=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(e.getProgramInfoLog(r)));return r}(e,t,n),a=e.getAttribLocation(i,"a_position");e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0);var s=e.getAttribLocation(i,"a_texCoord");return e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),i}function St(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(e.getShaderInfoLog(r)));return r}function _t(e,t,n,r,o,i){void 0===o&&(o=e.NEAREST),void 0===i&&(i=e.NEAREST);var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),e.texStorage2D(e.TEXTURE_2D,1,t,n,r),a}function jt(e,t,n,r,o,i,a){return gt(this,void 0,void 0,(function(){var s,c;return xt(this,(function(l){switch(l.label){case 0:return s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),[4,kt(e,s)];case 1:return c=l.sent(),e.deleteSync(s),c!==e.WAIT_FAILED&&(e.bindBuffer(t,n),e.getBufferSubData(t,r,o,i,a),e.bindBuffer(t,null)),[2]}}))}))}function kt(e,t){return new Promise((function(n){requestAnimationFrame((function r(){var o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?n(o):requestAnimationFrame(r):n(o)}))}))}var Tt,Et,Nt,Rt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function At(e,t,n,r,o,i){var a=function(e,t,n,r,o,i){var a=yt(Tt||(Tt=Rt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "]))),s=.5,c=i.width*s,l=i.height*s,u=1/c,d=1/l,f=St(e,e.FRAGMENT_SHADER,a),p=wt(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),v=e.getUniformLocation(p,"u_personMask"),h=e.getUniformLocation(p,"u_texelSize"),b=_t(e,e.RGBA8,c,l,e.NEAREST,e.LINEAR),g=_t(e,e.RGBA8,c,l,e.NEAREST,e.LINEAR),x=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,x),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0);var y=e.createFramebuffer();function w(){e.viewport(0,0,c,l),e.useProgram(p),e.uniform1i(m,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o);for(var t=0;t<3;t++)e.uniform2f(h,0,d),e.bindFramebuffer(e.FRAMEBUFFER,x),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,b),e.uniform1i(m,2),e.uniform2f(h,u,0),e.bindFramebuffer(e.FRAMEBUFFER,y),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,g)}function S(){e.deleteFramebuffer(y),e.deleteFramebuffer(x),e.deleteTexture(g),e.deleteTexture(b),e.deleteProgram(p),e.deleteShader(f)}return e.bindFramebuffer(e.FRAMEBUFFER,y),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,g,0),e.useProgram(p),e.uniform1i(v,1),{render:w,cleanUp:S}}(e,t,n,r,o,i),s=function(e,t,n,r){var o=yt(Et||(Et=Rt(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),i=yt(Nt||(Nt=Rt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "]))),a=r.width,s=r.height,c=St(e,e.VERTEX_SHADER,o),l=St(e,e.FRAGMENT_SHADER,i),u=wt(e,c,l,t,n),d=e.getUniformLocation(u,"u_inputFrame"),f=e.getUniformLocation(u,"u_personMask"),p=e.getUniformLocation(u,"u_blurredInputFrame"),m=e.getUniformLocation(u,"u_coverage");function v(){e.viewport(0,0,a,s),e.useProgram(u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function h(t){e.useProgram(u),e.uniform2f(m,t[0],t[1])}function b(){e.deleteProgram(u),e.deleteShader(l),e.deleteShader(c)}return e.useProgram(u),e.uniform1i(d,0),e.uniform1i(f,1),e.uniform1i(p,2),e.uniform2f(m,0,1),{render:v,updateCoverage:h,cleanUp:b}}(e,n,r,i);return{render:function(){a.render(),s.render()},updateCoverage:function(e){s.updateCoverage(e)},cleanUp:function(){s.cleanUp(),a.cleanUp()}}}var Ct,Pt,Ft=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var Ot,It=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Mt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};var Dt,Ut=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Lt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};var Bt,Wt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Vt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function Gt(e,t,n,r,o,i){var a=yt(Bt||(Bt=Wt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "]))),s=i._getInputMemoryOffset()/4,c=Vt(ft[o.inputResolution],2),l=c[0],u=c[1],d=l*u,f=St(e,e.FRAGMENT_SHADER,a),p=wt(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),v=_t(e,e.RGBA8,l,u),h=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,v,0);var b=new Uint8Array(4*d);return e.useProgram(p),e.uniform1i(m,0),{render:function(){e.viewport(0,0,l,u),e.useProgram(p),e.bindFramebuffer(e.FRAMEBUFFER,h),e.drawArrays(e.TRIANGLE_STRIP,0,4),function(e,t,n,r,o,i,a,s){gt(this,void 0,void 0,(function(){var c;return xt(this,(function(l){switch(l.label){case 0:return c=e.createBuffer(),e.bindBuffer(e.PIXEL_PACK_BUFFER,c),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,n,r,o,i,a,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),[4,jt(e,e.PIXEL_PACK_BUFFER,c,0,s)];case 1:return l.sent(),e.deleteBuffer(c),[2,s]}}))}))}(e,0,0,l,u,e.RGBA,e.UNSIGNED_BYTE,b);for(var t=0;t<d;t++){var n=s+3*t,r=4*t;i.HEAPF32[n]=b[r]/255,i.HEAPF32[n+1]=b[r+1]/255,i.HEAPF32[n+2]=b[r+2]/255}},cleanUp:function(){e.deleteFramebuffer(h),e.deleteTexture(v),e.deleteProgram(p),e.deleteShader(f)}}}var Ht,zt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},qt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};var Xt,Jt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Yt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},$t=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Kt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function Qt(e,t,n,r,o,i,a){var s=yt(Xt||(Xt=Jt(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),c=e.width,l=e.height,u=Kt(ft[r.inputResolution],2),d=u[0],f=u[1],p=o.getContext("webgl2"),m=St(p,p.VERTEX_SHADER,s),v=p.createVertexArray();p.bindVertexArray(v);var h=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,h),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),p.STATIC_DRAW);var b=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,b),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),p.STATIC_DRAW);var g=p.createTexture();p.bindTexture(p.TEXTURE_2D,g),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);var x=_t(p,p.RGBA8,d,f),y=_t(p,p.RGBA8,c,l),w=Gt(p,m,h,b,r,i),S="meet"===r.model?function(e,t,n,r,o,i,a){var s=yt(Ht||(Ht=zt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "]))),c=i._getOutputMemoryOffset()/4,l=qt(ft[o.inputResolution],2),u=l[0],d=l[1],f=St(e,e.FRAGMENT_SHADER,s),p=wt(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),v=_t(e,e.RG32F,u,d),h=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,v),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RG,e.FLOAT,i.HEAPF32,c),e.bindFramebuffer(e.FRAMEBUFFER,h),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(h),e.deleteTexture(v),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,h,b,r,i,x):function(e,t,n,r,o,i,a){var s=yt(Dt||(Dt=Ut(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "]))),c=i._getOutputMemoryOffset()/4,l=Lt(ft[o.inputResolution],2),u=l[0],d=l[1],f=St(e,e.FRAGMENT_SHADER,s),p=wt(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),v=_t(e,e.R32F,u,d),h=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,v),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RED,e.FLOAT,i.HEAPF32,c),e.bindFramebuffer(e.FRAMEBUFFER,h),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(h),e.deleteTexture(v),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,h,b,r,i,x),_=function(e,t,n,r,o,i,a,s){var c=yt(Ot||(Ot=It(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "]))),l=Mt(ft[i.inputResolution],2),u=l[0],d=l[1],f=s.width,p=s.height,m=1/f,v=1/p,h=St(e,e.FRAGMENT_SHADER,c),b=wt(e,t,h,n,r),g=e.getUniformLocation(b,"u_inputFrame"),x=e.getUniformLocation(b,"u_segmentationMask"),y=e.getUniformLocation(b,"u_texelSize"),w=e.getUniformLocation(b,"u_step"),S=e.getUniformLocation(b,"u_radius"),_=e.getUniformLocation(b,"u_offset"),j=e.getUniformLocation(b,"u_sigmaTexel"),k=e.getUniformLocation(b,"u_sigmaColor"),T=e.createFramebuffer();function E(t){t*=Math.max(f/u,p/d);var n=Math.max(1,.66*Math.sqrt(t)),r=t,o=n>1?.5*n:0,i=Math.max(m,v)*t;e.useProgram(b),e.uniform1f(w,n),e.uniform1f(S,r),e.uniform1f(_,o),e.uniform1f(j,i)}function N(t){e.useProgram(b),e.uniform1f(k,t)}return e.bindFramebuffer(e.FRAMEBUFFER,T),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.useProgram(b),e.uniform1i(g,0),e.uniform1i(x,1),e.uniform2f(y,m,v),E(0),N(0),{render:function(){e.viewport(0,0,f,p),e.useProgram(b),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,T),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateSigmaSpace:E,updateSigmaColor:N,cleanUp:function(){e.deleteFramebuffer(T),e.deleteProgram(b),e.deleteShader(h)}}}(p,m,h,b,x,r,y,o),j="blur"===n.type?At(p,m,h,b,y,o):function(e,t,n,r,o,i){var a=yt(Ct||(Ct=Ft(["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "],["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "]))),s=yt(Pt||(Pt=Ft(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "]))),c=i.width,l=i.height,u=c/l,d=St(e,e.VERTEX_SHADER,a),f=St(e,e.FRAGMENT_SHADER,s),p=wt(e,d,f,t,n),m=e.getUniformLocation(p,"u_backgroundScale"),v=e.getUniformLocation(p,"u_backgroundOffset"),h=e.getUniformLocation(p,"u_inputFrame"),b=e.getUniformLocation(p,"u_personMask"),g=e.getUniformLocation(p,"u_background"),x=e.getUniformLocation(p,"u_coverage"),y=e.getUniformLocation(p,"u_lightWrapping"),w=e.getUniformLocation(p,"u_blendMode");e.useProgram(p),e.uniform2f(m,1,1),e.uniform2f(v,0,0),e.uniform1i(h,0),e.uniform1i(b,1),e.uniform2f(x,0,1),e.uniform1f(y,0),e.uniform1f(w,0);var S=null;function _(t){S=_t(e,e.RGBA8,t.naturalWidth,t.naturalHeight,e.LINEAR,e.LINEAR),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.naturalWidth,t.naturalHeight,e.RGBA,e.UNSIGNED_BYTE,t);var n=0,r=0,o=t.naturalWidth,i=t.naturalHeight;o/i<u?(i=o/u,r=(t.naturalHeight-i)/2):(o=i*u,n=(t.naturalWidth-o)/2);var a=o/t.naturalWidth,s=i/t.naturalHeight;n/=t.naturalWidth,r/=t.naturalHeight,e.uniform2f(m,a,s),e.uniform2f(v,n,r)}return(null===o||void 0===o?void 0:o.complete)?_(o):o&&(o.onload=function(){_(o)}),{render:function(){e.viewport(0,0,c,l),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,r),null!==S&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,S),e.uniform1i(g,2)),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateCoverage:function(t){e.useProgram(p),e.uniform2f(x,t[0],t[1])},updateLightWrapping:function(t){e.useProgram(p),e.uniform1f(y,t)},updateBlendMode:function(t){e.useProgram(p),e.uniform1f(w,"screen"===t?0:1)},cleanUp:function(){e.deleteTexture(S),e.deleteProgram(p),e.deleteShader(f),e.deleteShader(d)}}}(p,h,b,y,t,o);return{render:function(){return Yt(this,void 0,void 0,(function(){return $t(this,(function(t){return p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,g),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,e.htmlElement),p.bindVertexArray(v),w.render(),a(),i._runInference(),a(),S.render(),_.render(),j.render(),[2]}))}))},updatePostProcessingConfig:function(e){if(_.updateSigmaSpace(e.jointBilateralFilter.sigmaSpace),_.updateSigmaColor(e.jointBilateralFilter.sigmaColor),"image"===n.type)(t=j).updateCoverage(e.coverage),t.updateLightWrapping(e.lightWrapping),t.updateBlendMode(e.blendMode);else if("blur"===n.type){j.updateCoverage(e.coverage)}else{var t;(t=j).updateCoverage([0,.9999]),t.updateLightWrapping(0)}},cleanUp:function(){j.cleanUp(),_.cleanUp(),S.cleanUp(),w.cleanUp(),p.deleteTexture(y),p.deleteTexture(x),p.deleteTexture(g),p.deleteBuffer(b),p.deleteBuffer(h),p.deleteVertexArray(v),p.deleteShader(m)}}}var Zt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},en=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const nn=function(e,t,n,r,o){var a=tn((0,i.useState)(null),2),s=a[0],c=a[1],l=(0,i.useRef)(null),u=(0,i.useRef)(null),d=tn((0,i.useState)(0),2),f=d[0],p=d[1],m=tn((0,i.useState)([]),2),v=m[0],h=m[1];return(0,i.useEffect)((function(){var i,a=!0,s=0,d=0,f=0,m=0,v=[],b="webgl2"===n.pipeline?Qt(e,l.current,t,n,u.current,o,g):bt(e,t,n,u.current,r,o,g);function g(){var e=Date.now();v[f]=e-d,d=e,f++}return function e(){return Zt(this,void 0,void 0,(function(){return en(this,(function(t){switch(t.label){case 0:return a?(d=Date.now(),[4,b.render()]):[2];case 1:return t.sent(),function(){var e=Date.now();v[f]=e-d,m++,e>=s+1e3&&(p(1e3*m/(e-s)),h(v),s=e,m=0);f=0}(),i=requestAnimationFrame(e),[2]}}))}))}(),c(b),function(){a=!1,cancelAnimationFrame(i),b.cleanUp(),c(null)}}),[e,t,n,r,o]),{pipeline:s,backgroundImageRef:l,canvasRef:u,fps:f,durations:v}};var rn=function(){return rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rn.apply(this,arguments)};const on=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.segmentationConfig,a=e.postProcessingConfig,s=e.bodyPix,c=e.tflite,l=e.id,u=e.onCanvasRef,d=nn(t,n,r,s,c),f=d.pipeline,p=d.backgroundImageRef,m=d.canvasRef;return(0,i.useEffect)((function(){f&&f.updatePostProcessingConfig(a)}),[f,a]),(0,i.useEffect)((function(){u&&u(m)}),[m]),(0,o.jsxs)("div",rn({className:"root preview-camera-webcam"},{children:["image"===n.type&&(0,o.jsx)("img",{ref:p,className:"render",src:n.url,alt:"",hidden:"webgl2"===r.pipeline}),(0,o.jsx)("canvas",{ref:m,className:"render w-full my-5",width:t.width,height:t.height,id:l},r.pipeline)]}))};var an={smoothSegmentationMask:!0,jointBilateralFilter:{sigmaSpace:1,sigmaColor:.1},coverage:[.5,.75],lightWrapping:.3,blendMode:"screen"},sn=n(56124),cn=(n(85186),n(86931)),ln=(n(68607),function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}),un=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},dn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const fn=function(){var e=dn((0,i.useState)(),2),t=e[0],n=e[1];return(0,i.useEffect)((function(){!function(){ln(this,void 0,void 0,(function(){var e;return un(this,(function(t){switch(t.label){case 0:return console.log("Loading TensorFlow.js and BodyPix segmentation model"),[4,cn.Cd_()];case 1:return t.sent(),e=n,[4,sn.zD()];case 2:return e.apply(void 0,[t.sent()]),console.log("TensorFlow.js and BodyPix loaded"),[2]}}))}))}()}),[]),t};var pn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},vn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const hn=function(e){var t,n=vn((0,i.useState)(),2),r=n[0],o=n[1],a=vn((0,i.useState)(),2),s=a[0],c=a[1],l=vn((0,i.useState)(),2),u=l[0],d=l[1],f=vn((0,i.useState)(!1),2),p=f[0],m=f[1],v=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,i.useEffect)((function(){!function(){pn(this,void 0,void 0,(function(){var e;return mn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,createTFLiteSIMDModule()];case 1:return e=t.sent(),c(e),o(e),m(!0),[3,3];case 2:t.sent();try{createTFLiteModule().then(o)}catch(n){console.warn("Failed to create TFLite WebAssembly module.",n)}return[3,3];case 3:return[2]}}))}))}()}),[]),(0,i.useEffect)((function(){!function(){pn(this,void 0,void 0,(function(){var t,n,o,i;return mn(this,(function(a){switch(a.label){case 0:if(!r||p&&!s||!p&&"wasmSimd"===e.backend||"meet"!==e.model&&"mlkit"!==e.model)return[2];if(d(void 0),!(t="wasmSimd"===e.backend?s:r))throw new Error("TFLite backend unavailable: ".concat(e.backend));return n=function(e,t){switch(e){case"meet":return"256x144"===t?"segm_full_v679":"segm_lite_v681";case"mlkit":return"selfiesegmentation_mlkit-256x256-2021_01_19-v1215.f16";default:throw new Error("No TFLite file for this segmentation model: ".concat(e))}}(e.model,e.inputResolution),console.log("Loading tflite model:",n),[4,fetch("".concat(v,"/models/").concat(n,".tflite"))];case 1:return[4,a.sent().arrayBuffer()];case 2:return o=a.sent(),console.log("Model buffer size:",o.byteLength),i=t._getModelBufferMemoryOffset(),console.log("Model buffer memory offset:",i),console.log("Loading model buffer..."),t.HEAPU8.set(new Uint8Array(o),i),console.log("_loadModel result:",t._loadModel(o.byteLength)),console.log("Input memory offset:",t._getInputMemoryOffset()),console.log("Input height:",t._getInputHeight()),console.log("Input width:",t._getInputWidth()),console.log("Input channels:",t._getInputChannelCount()),console.log("Output memory offset:",t._getOutputMemoryOffset()),console.log("Output height:",t._getOutputHeight()),console.log("Output width:",t._getOutputWidth()),console.log("Output channels:",t._getOutputChannelCount()),d(t),[2]}}))}))}()}),[r,s,p,e.model,e.backend,e.inputResolution]),{tflite:u,isSIMDSupported:p}};var bn=function(){return bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bn.apply(this,arguments)},gn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const xn=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.id,a=e.onCanvasRef,s=gn((0,i.useState)(pt),2),c=s[0],l=s[1],u=fn(),d=hn(c),f=d.tflite,p=d.isSIMDSupported;return(0,i.useEffect)((function(){u&&l((function(e){return"wasmSimd"!==e.backend||p?e:bn(bn({},e),{backend:"wasm"})}))}),[p]),(0,o.jsx)(o.Fragment,{children:t&&u&&f?(0,o.jsx)(on,{sourcePlayback:t,backgroundConfig:null!==n&&void 0!==n?n:$,segmentationConfig:c,postProcessingConfig:an,bodyPix:u,tflite:f,id:r,onCanvasRef:a}):null})};var yn=function(){return yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yn.apply(this,arguments)},wn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Sn=function(e){var t=e.onSelect,n=wn((0,i.useState)($),2),r=n[0],a=n[1],s=function(e,n){var r={type:e,url:n};a(r),t(r)};return(0,o.jsxs)("div",yn({className:"flex flex-wrap items-center justify-start p-3 bg-slate-100 shadow-header"},{children:[(0,o.jsx)("div",yn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in  ".concat("none"===r.type?"border-brandColor2 scale-95":""),onClick:function(){return s("none","")}},{children:(0,o.jsx)("i",{className:"pnm-ban-solid"})})),(0,o.jsx)("div",yn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in ".concat("blur"===r.type?"border-brandColor2 scale-95":""),onClick:function(){return s("blur","")}},{children:(0,o.jsx)("i",{className:"pnm-blur"})})),Q.map((function(e){return(0,o.jsx)("div",yn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center transition transform scale-90 hover:scale-95 ease-in border-2 border-solid border-transparent ".concat(r.url===e?"border-brandColor2 scale-95":""),onClick:function(){return s("image",e)}},{children:(0,o.jsx)("img",{src:e,alt:e,className:"object-cover w-full h-full"})}),e)}))]}))};var _n=function(){return _n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_n.apply(this,arguments)},jn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const kn=function(e){var t,n=e.deviceId,r=jn((0,i.useState)(),2),a=r[0],s=r[1],c=jn((0,i.useState)(!1),2),l=c[0],u=c[1],d=jn((0,i.useState)(),2),f=d[0],p=d[1],m=jn((0,i.useState)(),2),v=m[0],h=m[1],b=jn((0,i.useState)(),2),g=b[0],x=b[1],y=null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.userId,w=qe(),S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(0,i.useEffect)((function(){f!==n&&(u(!1),p(n))}),[n]),(0,i.useEffect)((function(){u(!1);a&&setTimeout((function(){u(!0)}),500)}),[a]),(0,i.useEffect)((function(){return function(){g&&g.getTracks().forEach((function(e){e.stop()}))}}),[g]);return(0,o.jsxs)("div",_n({className:"mt-5"},{children:[n?(0,o.jsx)("div",_n({style:v?{display:"none"}:{display:""}},{children:(0,o.jsx)(dt,{deviceId:n,onSourcePlayback:s,onMediaStream:x})})):null,l&&a&&y&&v?(0,o.jsx)(xn,{sourcePlayback:a,backgroundConfig:v,id:y}):null,S?null:(0,o.jsx)(Sn,{onSelect:function(e){w(be(e)),"none"===e.type?(u(!1),h(void 0)):(!l&&n&&u(!0),h(e))}})]}))};var Tn=function(){return Tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tn.apply(this,arguments)},En=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},An=(0,tt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Cn=function(e){var t=e.onSelectedDevice,n=Xe(An),r=Rn((0,i.useState)(!0),2),a=r[0],s=r[1],c=Rn((0,i.useState)(""),2),l=c[0],u=c[1],d=Rn((0,i.useState)([]),2),f=d[0],p=d[1],m=qe(),v=(0,$e.$)().t;(0,i.useEffect)((function(){En(void 0,void 0,void 0,(function(){var e,t,n;return Nn(this,(function(r){switch(r.label){case 0:return[4,at("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",Tn({value:e.deviceId},{children:e.label}),e.deviceId)})),p(n),u(e[0].deviceId),t.length&&m(Ne(t)),[2]}}))}))}),[m]),(0,i.useEffect)((function(){n&&s(!0)}),[n]);var h=function(){s(!1),m(de(!1)),m(re(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(rt.uT,Tn({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(rt.Vq,Tn({open:a,onClose:function(){return h()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Tn({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Tn({className:"popup-inner bg-white w-full max-w-md rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Tn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return h()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,Tn({className:"mb-6"},{children:v("footer.modal.select-webcam")})),(0,o.jsx)("div",Tn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",Tn({value:l,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}))})),(0,o.jsx)("div",Tn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(kn,{deviceId:l})})),(0,o.jsx)("div",Tn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",Tn({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return En(void 0,void 0,void 0,(function(){return Nn(this,(function(e){return h(),l?(t(l),[2]):[2]}))}))}},{children:v("share")}))}))]}))]}))}))})):null})};var Pn=function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pn.apply(this,arguments)},Fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},On=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},In=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Mn=(0,tt.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),Dn=(0,tt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const Un=function(e){var t=e.currentRoom,n=qe(),r=(0,$e.$)().t,a=Xe(Mn),s=Xe(Dn),c=In((0,i.useState)(),2),l=c[0],u=c[1],d=In((0,i.useState)(),2),f=d[0],p=d[1];(0,i.useEffect)((function(){var e=a.map((function(e){return(0,o.jsx)("div",Pn({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:function(){return(0,o.jsx)("p",Pn({className:"".concat(s===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}))}})}),e.id)}));u(e)}),[s,a]),(0,i.useEffect)((function(){f&&n(Ae(f))}),[f,n]);return(0,o.jsxs)(rt.v2.Items,Pn({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[l,(0,o.jsx)("div",Pn({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:function(){return(0,o.jsx)("p",Pn({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Fn(void 0,void 0,void 0,(function(){return On(this,(function(n){return e.track&&e.track.source===nt.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(re(!1)),n(Ae("")),void n(be({type:"none"}))}},{children:r("footer.menus.leave-webcam")}))}})}))]}))};var Ln=function(){return Ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ln.apply(this,arguments)};const Bn=function(e){var t=e.currentRoom;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(rt.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(rt.v2.Button,{children:[(0,o.jsx)("div",Ln({className:"camera relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer has-tooltip"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 text-[10px] lg:text-[14px]"})})),(0,o.jsx)("div",Ln({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"})}))]}),(0,o.jsx)(rt.uT,Ln({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Un,{currentRoom:t})}))]})}})})};var Wn=function(){return Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wn.apply(this,arguments)},Vn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Gn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Hn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},zn=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),qn=(0,tt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),Xn=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e})),Jn=(0,tt.P1)((function(e){return e.bottomIconsActivity.virtualBackground}),(function(e){return e})),Yn=(0,tt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const $n=function(e){var t=e.currentRoom,n=qe(),r="desktop"===ze.getState().session.userDeviceType,a=Xe(qn),s=Xe(zn),c=Xe(Xn),l=Xe(Jn),u=Xe(Yn),d=(0,$e.$)().t,f=Hn((0,i.useState)(!0),2),p=f[0],m=f[1],v=Hn((0,i.useState)(!1),2),h=v[0],b=v[1],g=Hn((0,i.useState)(),2),x=g[0],y=g[1],w=Hn((0,i.useState)(),2),S=w[0],_=w[1],j=Hn((0,i.useState)(),2),k=j[0],E=j[1];(0,i.useEffect)((function(){var e,t,n,r=ze.getState().session,o=r.currentRoom.metadata,i=r.currenUser;(null===(e=o.room_features)||void 0===e?void 0:e.allow_webcams)?(null===(t=o.room_features)||void 0===t?void 0:t.admin_only_webcams)&&!(null===(n=null===i||void 0===i?void 0:i.metadata)||void 0===n?void 0:n.is_admin)&&m(!1):m(!1)}),[]),(0,i.useEffect)((function(){if(c){b(!0);var e=T.selectById(ze.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===nt.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(re(!1)))}else b(!1)}),[c,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,i=null===(r=null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==c&&b(!0)}),[]),(0,i.useEffect)((function(){s||!k||u||k.stop(),s||u||!x||y(void 0)}),[u]),(0,i.useEffect)((function(){if(u&&x&&u!==x){"none"===l.type?function(e){Vn(void 0,void 0,void 0,(function(){return Gn(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))}))}(u):function(e){Vn(void 0,void 0,void 0,(function(){return Gn(this,(function(t){switch(t.label){case 0:return[4,N(e)];case 1:return t.sent(),[2]}}))}))}(u),y(u)}}),[u]),(0,i.useEffect)((function(){return k&&_({htmlElement:k.attach(),width:320,height:180}),function(){k&&k.stop()}}),[k]);var N=function(e){return Vn(void 0,void 0,void 0,(function(){var r,o,i;return Gn(this,(function(a){switch(a.label){case 0:return r=nt.VideoPresets.h720.resolution,"none"!==l.type&&(o=new nt.VideoPreset(160,96,6e4,15),r=o.resolution),[4,(0,nt.createLocalVideoTrack)({deviceId:e,resolution:r})];case 1:return i=a.sent(),"none"!==l.type?[3,3]:[4,t.localParticipant.publishTrack(i)];case 2:return a.sent(),n(re(!0)),[3,4];case 3:E(i),a.label=4;case 4:return[2]}}))}))},R=function(e){return Vn(void 0,void 0,void 0,(function(){return Gn(this,(function(t){switch(t.label){case 0:return y(e),[4,N(e)];case 1:return t.sent(),n(Ae(e)),[2]}}))}))},A=function(e){e.current.captureStream(15).getTracks().forEach((function(e){return Vn(void 0,void 0,void 0,(function(){return Gn(this,(function(r){switch(r.label){case 0:return e.kind!==nt.Track.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e,{source:nt.Track.Source.Camera,name:"canvas"})];case 1:r.sent(),n(re(!0)),r.label=2;case 2:return[2]}}))}))}))};return(0,o.jsx)(o.Fragment,{children:p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",Wn({className:"camera footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){h||s||n(de(!s))}},{children:[s?null:(0,o.jsx)("span",Wn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:d(c?"footer.icons.webcam-locked":"footer.icons.start-webcam")})),(0,o.jsxs)(o.Fragment,{children:[s?null:(0,o.jsx)("i",{className:"pnm-webcam brand-color1 text-[10px] lg:text-[14px]"}),h?(0,o.jsx)("div",Wn({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null]}),s?(0,o.jsx)(Bn,{currentRoom:t}):null]})),a?(0,o.jsx)(Cn,{onSelectedDevice:R}):null,(0,o.jsx)(o.Fragment,{children:S&&x&&"none"!==l.type?(0,o.jsx)("div",Wn({style:{display:"none"}},{children:(0,o.jsx)(xn,{sourcePlayback:S,id:x,backgroundConfig:l,onCanvasRef:A})})):null})]}):null})};var Kn=function(){return Kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kn.apply(this,arguments)},Qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Zn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},er=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},tr=(0,tt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const nr=function(e){var t,n,r=e.currentRoom,a=Xe(tr),s=er((0,i.useState)(!0),2),c=s[0],l=s[1],u=er((0,i.useState)(""),2),d=u[0],f=u[1],p=er((0,i.useState)([]),2),m=p[0],v=p[1],h=qe(),b=(0,$e.$)().t,g=null!==(n=null===(t=ze.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,i.useEffect)((function(){Qn(void 0,void 0,void 0,(function(){var e,t,n;return Zn(this,(function(r){switch(r.label){case 0:return[4,at("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",Kn({value:e.deviceId},{children:e.label}),e.deviceId)})),v(n),f(e[0].deviceId),t.length&&h(Ee(t)),[2]}}))}))}),[h]),(0,i.useEffect)((function(){a&&l(!0)}),[a]);var x=function(){l(!1),h(ue(!1))};return(0,o.jsx)(i.Fragment,{children:a?(0,o.jsx)(rt.uT,Kn({show:c,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(rt.Vq,Kn({open:c,onClose:function(){return x()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Kn({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Kn({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Kn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return x()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,Kn({className:"mb-6"},{children:b("footer.modal.select-microphone")})),(0,o.jsx)("div",Kn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",Kn({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:m}))})),(0,o.jsx)("div",Kn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",Kn({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return Qn(void 0,void 0,void 0,(function(){return Zn(this,(function(e){switch(e.label){case 0:return l(!1),h(ue(!1)),d?[4,(0,nt.createLocalTracks)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return Qn(void 0,void 0,void 0,(function(){return Zn(this,(function(t){switch(t.label){case 0:return e.kind!==nt.Track.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),h(te(!0)),t.label=2;case 2:return[2]}}))}))})),g&&setTimeout((function(){return Qn(void 0,void 0,void 0,(function(){return Zn(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return Qn(void 0,void 0,void 0,(function(){return Zn(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===nt.Track.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),h(ne(!0)),h(z(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),h(Re(d)),[2]}}))}))}},{children:b("join")}))}))]}))]}))}))})):null})};var rr=function(){return rr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rr.apply(this,arguments)},or=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ir=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ar=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},sr=(0,tt.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),cr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),lr=(0,tt.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const ur=function(e){var t=e.currentRoom,n=qe(),r=(0,$e.$)().t,a=Xe(sr),s=Xe(cr),c=Xe(lr),l=ar((0,i.useState)(),2),u=l[0],d=l[1],f=ar((0,i.useState)(),2),p=f[0],m=f[1];(0,i.useEffect)((function(){var e=a.map((function(e){return(0,o.jsx)("div",rr({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:function(){return(0,o.jsx)("p",rr({className:"".concat(c===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return m(e.id)}},{children:e.label}))}})}),e.id)}));d(e)}),[a,c]),(0,i.useEffect)((function(){var e;p&&(e=p,or(void 0,void 0,void 0,(function(){return ir(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(Re(p)))}),[p,t,n]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(rt.v2.Items,rr({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",rr({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:function(){return(0,o.jsx)("p",rr({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-brandColor1 hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return or(void 0,void 0,void 0,(function(){return ir(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===nt.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ne(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:r(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}))}})})),(0,o.jsx)("div",rr({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:function(){return(0,o.jsx)("p",rr({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return or(void 0,void 0,void 0,(function(){return ir(this,(function(n){return e.track&&e.kind===nt.Track.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(te(!1)),n(ne(!1)),void n(Re(""))}},{children:r("footer.menus.leave-microphone")}))}})}))]}))})};var dr=function(){return dr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dr.apply(this,arguments)},fr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const pr=function(e){var t=e.currentRoom,n=Xe(fr);return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",{children:(0,o.jsx)(rt.v2,{children:function(e){var r=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(rt.v2.Button,{children:[(0,o.jsxs)("div",dr({className:"microphone relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:[n?null:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 text-[10px] lg:text-[14px]"}),n?(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 text-[10px] lg:text-[14px]"}):null]})),(0,o.jsx)("div",dr({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"})}))]}),(0,o.jsx)(rt.uT,dr({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ur,{currentRoom:t})}))]})}})})})};var mr=function(){return mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mr.apply(this,arguments)},vr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},hr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),br=(0,tt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),gr=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e}));const xr=function(e){var t=e.currentRoom,n=qe(),r="desktop"===ze.getState().session.userDeviceType,a=(0,$e.$)().t,s=Xe(br),c=Xe(hr),l=Xe(gr),u=vr((0,i.useState)(!1),2),d=u[0],f=u[1];(0,i.useEffect)((function(){if(l){f(!0);var e=T.selectById(ze.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===nt.Track.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(te(!1)),n(ne(!1)))}else f(!1)}),[l,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,i=null===(r=null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==l&&f(!0)}),[]);return(0,o.jsxs)("div",{children:[s?(0,o.jsx)(nr,{currentRoom:t}):null,(0,o.jsxs)("div",mr({className:"microphone footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){d||c||n(ue(!0))}},{children:[c?null:(0,o.jsx)("span",mr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:a(d?"footer.icons.microphone-locked":"footer.icons.start-microphone-sharing")})),c?null:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-[10px] lg:text-[14px]"}),d?(0,o.jsx)("div",mr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null]}),c?(0,o.jsx)(pr,{currentRoom:t}):null]}))]})};var yr=function(){return yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yr.apply(this,arguments)},wr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Sr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),_r=(0,tt.P1)((function(e){return e.bottomIconsActivity.totalUnreadChatMsgs}),(function(e){return e}));const jr=function(){var e=qe(),t="desktop"===ze.getState().session.userDeviceType,n=(0,$e.$)().t,r=Xe(Sr),a=Xe(_r),s=wr((0,i.useState)("brand-color1"),2),c=s[0],l=s[1],u=wr((0,i.useState)(!0),2),d=u[0],f=u[1];(0,i.useEffect)((function(){l(r?"brand-color2":"brand-color1")}),[r]),(0,i.useEffect)((function(){var t;(null===(t=ze.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(f(!1),e(oe(!1)))}),[e]);return(0,o.jsx)(i.Fragment,{children:d?(0,o.jsxs)("div",yr({className:"message footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(oe(!r))}},{children:[(0,o.jsx)("span",yr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")})),(0,o.jsx)("i",{className:"pnm-chat ".concat(c," text-[12px] lg:text-[16px]")}),!r&&a>0?(0,o.jsx)("div",yr({className:"unseen-message-count bg-brandRed w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:a})):null]})):null})};var kr=function(){return kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kr.apply(this,arguments)},Tr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Er=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const Nr=function(){var e=qe(),t="desktop"===ze.getState().session.userDeviceType,n=(0,$e.$)().t,r=Xe(Er),a=Tr((0,i.useState)("brand-color1"),2),s=a[0],c=a[1];(0,i.useEffect)((function(){c(r?"brand-color2":"brand-color1")}),[r]);return(0,o.jsxs)("div",kr({className:"participants footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ie(!r))}},{children:[(0,o.jsx)("span",kr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-users-list":"footer.icons.show-users-list")})),(0,o.jsx)("i",{className:"pnm-participant ".concat(s," text-[12px] lg:text-[16px]")})]}))};var Rr=n(9669),Ar=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Cr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Pr=n.n(Rr)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),Fr=function(){if(ze.getState().session.token)return ze.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const Or=function(e,t){return Ar(void 0,void 0,void 0,(function(){return Cr(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Pr.post(e,JSON.stringify(t),{headers:{Authorization:Fr(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var Ir,Mr,Dr;!function(e){e.USER="USER",e.SYSTEM="SYSTEM",e.WHITEBOARD="WHITEBOARD"}(Ir||(Ir={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS",e.INIT_WHITEBOARD="INIT_WHITEBOARD"}(Mr||(Mr={})),function(e){e.SCENE_UPDATE="SCENE_UPDATE",e.POINTER_UPDATE="POINTER_UPDATE",e.ADD_WHITEBOARD_FILE="ADD_WHITEBOARD_FILE"}(Dr||(Dr={}));var Ur=function(){return Ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ur.apply(this,arguments)},Lr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Br=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Wr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Vr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const Gr=function(e){var t=e.currentRoom,n="desktop"===ze.getState().session.userDeviceType,r=(0,$e.$)().t,a=qe(),s=Xe(Vr),l=Wr((0,i.useState)("brand-color1"),2),u=l[0],d=l[1];(0,i.useEffect)((function(){d(s?"brand-color2":"brand-color1")}),[s]);return(0,o.jsxs)("div",Ur({className:"hands footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return Lr(void 0,void 0,void 0,(function(){var e,n;return Br(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Mr.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,Or("dataMessage",e)]);case 1:return(n=o.sent()).status?(a(ae(!0)),(0,c.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,c.Am)(n.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Mr.LOWER_HAND,msg:Mr.LOWER_HAND},[4,Or("dataMessage",e)];case 3:(n=o.sent()).status?a(ae(!1)):(0,c.Am)(n.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",Ur({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(s?"footer.icons.lower-hand":"footer.icons.raise-hand")})),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")})]}))};var Hr=function(){return Hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hr.apply(this,arguments)},zr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},qr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Jr=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),Yr=(0,tt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),$r=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const Kr=function(e){var t=e.currentRoom,n="desktop"===ze.getState().session.userDeviceType,r=qe(),a=(0,$e.$)().t,s=Xe(Jr),l=Xe(Yr),u=Xe($r),d=Xr((0,i.useState)("brand-color1"),2),f=d[0],p=d[1],m=Xr((0,i.useState)(!0),2),v=m[0],h=m[1],b=Xr((0,i.useState)(!1),2),g=b[0],x=b[1];(0,i.useEffect)((function(){p(s?"brand-color2":"brand-color1")}),[s]),(0,i.useEffect)((function(){var e;(null===(e=ze.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_webcams)||h(!1)}),[]);var y=(0,i.useCallback)((function(){s&&(t.localParticipant.tracks.forEach((function(e){e.source!==nt.Track.Source.ScreenShare&&e.source!==nt.Track.Source.ScreenShareAudio||!e.track||t.localParticipant.unpublishTrack(e.track)})),r(se(!1)),r(U({isActive:!1,sharedBy:""})))}),[s,r,t]);(0,i.useEffect)((function(){u?(x(!0),y()):x(!1)}),[r,y,u]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_screen_sharing,i=null===(r=null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==u&&x(!0)}),[]),(0,i.useEffect)((function(){!l&&s&&r(se(!1))}),[l]);return(0,o.jsx)(o.Fragment,{children:v?(0,o.jsxs)("div",Hr({className:"share-screen footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return zr(void 0,void 0,void 0,(function(){return qr(this,(function(e){switch(e.label){case 0:return g?[2]:s?[3,2]:l?((0,c.Am)(a("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,nt.createLocalScreenTracks)({audio:!0})];case 1:return e.sent().forEach((function(e){return zr(void 0,void 0,void 0,(function(){return qr(this,(function(n){switch(n.label){case 0:return[4,t.localParticipant.publishTrack(e)];case 1:return n.sent(),[2]}}))}))})),r(se(!0)),r(U({isActive:!0,sharedBy:t.localParticipant.identity})),[3,3];case 2:y(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",Hr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s?a("footer.icons.stop-screen-sharing"):s||g?g?a("footer.icons.screen-sharing-locked"):void 0:a("footer.icons.start-screen-sharing")})),(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(f," text-[12px] lg:text-[16px]")}),g?(0,o.jsx)("div",Hr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null]})]})):null})};var Qr=function(){return Qr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qr.apply(this,arguments)},Zr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},eo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},to=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},no=(0,tt.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const ro=function(){var e,t,n="desktop"===ze.getState().session.userDeviceType,r=(0,$e.$)().t,a=Xe(no),s=to((0,i.useState)(!1),2),l=s[0],u=s[1],d=to((0,i.useState)(!1),2),f=d[0],p=d[1],m=to((0,i.useState)(!0),2),v=m[0],h=m[1],b=null===(t=null===(e=ze.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,g=0;(0,i.useEffect)((function(){return a?(p(!0),clearTimeout(g),u(!1)):!a&&f&&(p(!1),clearTimeout(g),u(!1)),function(){clearTimeout(g)}}),[a,f,g]),(0,i.useEffect)((function(){var e;(null===(e=ze.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||h(!1)}),[]);var x=function(){return Zr(void 0,void 0,void 0,(function(){var e,t,n;return eo(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:ze.getState().session.currentRoom.sid},[4,Or("recording",e)];case 1:return t=o.sent(),n="footer.notice.start-recording-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),g=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},y=function(){return Zr(void 0,void 0,void 0,(function(){var e,t,n;return eo(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:ze.getState().session.currentRoom.sid},[4,Or("recording",e)];case 1:return t=o.sent(),n="footer.notice.stop-recording-service-in-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),g=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:v&&b?(0,o.jsxs)("button",Qr({className:"".concat(a?"record":""," footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(n?"has-tooltip":""),onClick:function(){return u(!0),void(a?y():x())},disabled:l},{children:[(0,o.jsx)("span",Qr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(a?"footer.icons.stop-recording":"footer.icons.start-recording")})),(0,o.jsx)("i",{className:"pnm-rec brand-color1 text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"})]})):null})};var oo=function(){return oo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oo.apply(this,arguments)},io=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ao=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},so=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const co=function(){var e=qe(),t=(0,$e.$)().t,n=Xe(so),r=ze.getState().session,a=function(e,n){return io(void 0,void 0,void 0,(function(){var o,i,a;return ao(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",i={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",service:n,direction:o},[4,Or("updateLockSettings",i)];case 1:return(a=s.sent()).status?(0,c.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(a.msg,{type:"error"}),[2]}}))}))},s=function(){e(fe(!1))},l=function(){var e,r,i,s,c,l;return(0,o.jsxs)(rt.rs.Group,{children:[(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-microphone")})),(0,o.jsx)(rt.rs,oo({checked:null!==(e=null===n||void 0===n?void 0:n.lock_microphone)&&void 0!==e&&e,onChange:function(e){return a(e,"mic")},className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-webcams")})),(0,o.jsx)(rt.rs,oo({checked:null!==(r=null===n||void 0===n?void 0:n.lock_webcam)&&void 0!==r&&r,onChange:function(e){return a(e,"webcam")},className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-screen-sharing")})),(0,o.jsx)(rt.rs,oo({checked:null!==(i=null===n||void 0===n?void 0:n.lock_screen_sharing)&&void 0!==i&&i,onChange:function(e){return a(e,"screenShare")},className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat")})),(0,o.jsx)(rt.rs,oo({checked:null!==(s=null===n||void 0===n?void 0:n.lock_chat)&&void 0!==s&&s,onChange:function(e){return a(e,"chat")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-send-message")})),(0,o.jsx)(rt.rs,oo({checked:null!==(c=null===n||void 0===n?void 0:n.lock_chat_send_message)&&void 0!==c&&c,onChange:function(e){return a(e,"sendChatMsg")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",oo({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(rt.rs.Label,oo({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat-file-share")})),(0,o.jsx)(rt.rs,oo({checked:null!==(l=null===n||void 0===n?void 0:n.lock_chat_file_share)&&void 0!==l&&l,onChange:function(e){return a(e,"chatFile")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rt.uT,oo({appear:!0,show:!0,as:i.Fragment},{children:(0,o.jsx)(rt.Vq,oo({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:s},{children:(0,o.jsxs)("div",oo({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rt.uT.Child,oo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",oo({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rt.uT.Child,oo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",oo({className:"inline-block w-full h-96 max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",oo({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,oo({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",oo({className:"mt-6"},{children:l()}))]}))}))]}))}))}))})})};var lo=n(48966),uo=function(){return uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uo.apply(this,arguments)},fo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},po=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},mo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},vo=(0,tt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const ho=function(){var e=qe(),t=(0,$e.$)().t,n=Xe(vo),r=mo((0,i.useState)("youtube"),2),a=r[0],s=r[1],l=mo((0,i.useState)(!1),2),u=l[0],d=l[1],f=mo((0,i.useState)(""),2),p=f[0],m=f[1],v=mo((0,i.useState)(""),2),h=v[0],b=v[1],g={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,i.useEffect)((function(){d("other"===a)}),[a]);var x=function(){e(pe(!1))},y=function(n){return void 0===n&&(n=!1),fo(void 0,void 0,void 0,(function(){var r,o,i;return po(this,(function(a){switch(a.label){case 0:return e(pe(!1)),n?(r={task:"stop-rtmp",sid:ze.getState().session.currentRoom.sid},[4,Or("rtmp",r)]):[2];case 1:return o=a.sent(),i=t("footer.notice.rtmp-ending"),o.status||(i=o.msg),(0,c.Am)(t(i),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rt.uT,uo({appear:!0,show:n,as:i.Fragment},{children:(0,o.jsx)(rt.Vq,uo({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",uo({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rt.uT.Child,uo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",uo({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rt.uT.Child,uo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",uo({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",uo({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,uo({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")})),(0,o.jsx)("div",uo({className:"mt-2"},{children:(0,o.jsx)("p",uo({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}))})),(0,o.jsxs)("div",uo({className:"mt-4"},{children:[(0,o.jsx)("button",uo({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!0)}},{children:t("ok")})),(0,o.jsx)("button",uo({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rt.uT,uo({appear:!0,show:!n,as:i.Fragment},{children:(0,o.jsx)(rt.Vq,uo({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:x},{children:(0,o.jsxs)("div",uo({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rt.uT.Child,uo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",uo({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rt.uT.Child,uo({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",uo({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",uo({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return x()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,uo({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",uo({className:"mt-6"},{children:(0,o.jsxs)("form",uo({action:"#",method:"POST",onSubmit:function(n){return function(n){return fo(void 0,void 0,void 0,(function(){var r,o,i,s;return po(this,(function(l){switch(l.label){case 0:return n.preventDefault(),"other"===a&&(0,lo.isEmpty)(p)||(0,lo.isEmpty)(h)?[2]:(r="",r="other"===a?p:g[a],(0,lo.isURL)(r,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:ze.getState().session.currentRoom.sid,rtmp_url:r+"/"+h},[4,Or("rtmp",o)]):[2]);case 1:return i=l.sent(),s="footer.notice.rtmp-starting",i.status||(s=i.msg),(0,c.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(pe(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",uo({className:"s"},{children:(0,o.jsxs)("div",uo({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",uo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",uo({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")})),(0,o.jsxs)("select",uo({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:a},{children:[(0,o.jsx)("option",uo({value:"youtube"},{children:"YouTube"})),(0,o.jsx)("option",uo({value:"facebook"},{children:"Facebook"})),(0,o.jsx)("option",uo({value:"other"},{children:"Other"}))]}))]})),u?(0,o.jsxs)("div",uo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",uo({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")})),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:p,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]})):null,(0,o.jsxs)("div",uo({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",uo({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:h,onChange:function(e){return b(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]}))]}))})),(0,o.jsx)("div",uo({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",uo({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{children:t("footer.modal.rtmp-start-broadcast")}))}))]}))}))]}))}))]}))}))}))})})};var bo=function(){return bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bo.apply(this,arguments)},go=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},xo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yo=(0,tt.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),wo=(0,tt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),So=(0,tt.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e})),_o=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e}));const jo=function(){var e=ze.getState().session,t=qe(),n=(0,$e.$)().t,r=Xe(yo),i=Xe(_o),a=Xe(So),s=Xe(wo);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",bo({className:"menu relative"},{children:(0,o.jsx)(rt.v2,{children:function(r){var a=r.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rt.v2.Button,bo({className:"footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal text-brandColor1 text-[3px] lg:text-[5px]"})})),(0,o.jsx)(rt.uT,bo({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(rt.v2.Items,bo({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-56 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",bo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",bo({className:"footer-podcast-button text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(pe(!0))}},{children:[s?(0,o.jsxs)("div",bo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})):null,(0,o.jsx)("i",{className:"pnm-broadcasting text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),n(s?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}))})})),(0,o.jsx)("div",bo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",bo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return go(void 0,void 0,void 0,(function(){var t,r;return xo(this,(function(o){switch(o.label){case 0:return t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:"all",muted:!0},[4,Or("muteUnmuteTrack",t)];case 1:return(r=o.sent()).status?(0,c.Am)(n("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,c.Am)(n(r.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),n("footer.menus.mute-all-users")]}))})})),(0,o.jsx)("div",bo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",bo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return go(void 0,void 0,void 0,(function(){var e,r,o;return xo(this,(function(a){switch(a.label){case 0:return(e=null===(o=ze.getState().session.currentRoom.metadata)||void 0===o?void 0:o.room_features.shared_note_pad_features.host)||i?[3,2]:[4,Or("etherpad/create",{})];case 1:return(r=a.sent()).status?t(ce(!0)):(0,c.Am)(n(r.msg),{type:"error"}),[3,6];case 2:return!e||i?[3,4]:[4,Or("etherpad/changeStatus",{room_id:ze.getState().session.currentRoom.room_id,is_active:!0})];case 3:return(r=a.sent()).status?t(ce(!0)):(0,c.Am)(n(r.msg),{type:"error"}),[3,6];case 4:return e&&i?[4,Or("etherpad/changeStatus",{room_id:ze.getState().session.currentRoom.room_id,is_active:!1})]:[3,6];case 5:(r=a.sent()).status?t(ce(!1)):(0,c.Am)(n(r.msg),{type:"error"}),a.label=6;case 6:return[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-notepad text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),n(i?"footer.menus.disable-shared-notepad":"footer.menus.enable-shared-notepad")]}))})})),(0,o.jsx)("div",bo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",bo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(fe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),n("footer.menus.room-lock-settings")]}))})}))]}))}))]})}})}))," ",r?(0,o.jsx)(co,{}):null," ",a?(0,o.jsx)(ho,{}):null]})};var ko=function(){return ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ko.apply(this,arguments)},To=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Eo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},No=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ro=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Ao=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),Co=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible}),(function(e){return e}));const Po=function(){var e,t,n=(0,$e.$)().t,r=qe(),a="desktop"===ze.getState().session.userDeviceType,s=No((0,i.useState)("brand-color1"),2),c=s[0],l=s[1],u=Xe(Ro),d=Xe(Ao),f=Xe(Co),p=No((0,i.useState)(!1),2),m=p[0],v=p[1],h=null===(t=null===(e=ze.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin;(0,i.useEffect)((function(){r(ce(!!d))}),[d,r]),(0,i.useEffect)((function(){u?(l("brand-color2"),ze.getState().bottomIconsActivity.isActiveWhiteboard&&r(le(!1))):l("brand-color1")}),[u,r]),(0,i.useEffect)((function(){d&&r(ce(!!f))}),[f]),(0,i.useEffect)((function(){var e,t,n;if(h){var r=ze.getState().session.currentRoom;if(m||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.shared_note_pad_features.visible)){m||v(!0);var o=function(e){return To(void 0,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return[4,Or("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(u&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible)){var i={room_id:r.room_id,visible_white_board:!1,visible_notepad:!0};setTimeout((function(){o(i)}),500)}else if(!u&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.visible)){var a={room_id:r.room_id,visible_notepad:!1};o(a)}}else v(!0)}}),[u]);return(0,o.jsx)(o.Fragment,{children:d?(0,o.jsxs)("div",ko({className:"shared-notepad h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(a?"has-tooltip":""),onClick:function(){return To(void 0,void 0,void 0,(function(){return Eo(this,(function(e){return ze.getState().bottomIconsActivity.isActiveScreenshare||r(ce(!u)),[2]}))}))}},{children:[(0,o.jsx)("span",ko({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(u?"footer.icons.hide-shared-notepad":"footer.icons.show-shared-notepad")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-notepad ".concat(c," text-[12px] lg:text-[16px]")})})]})):null})};var Fo=function(){return Fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fo.apply(this,arguments)},Oo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Io=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Mo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Do=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Uo=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible}),(function(e){return e}));const Lo=function(){var e,t,n,r=(0,$e.$)().t,a=qe(),s="desktop"===ze.getState().session.userDeviceType,c=Mo((0,i.useState)("brand-color1"),2),l=c[0],u=c[1],d=Mo((0,i.useState)(!1),2),f=d[0],p=d[1],m=Xe(Do),v=Xe(Uo),h=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.allowed_whiteboard,b=null===(n=null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;(0,i.useEffect)((function(){m?(u("brand-color2"),ze.getState().bottomIconsActivity.isActiveSharedNotePad&&a(ce(!1))):u("brand-color1")}),[a,m]),(0,i.useEffect)((function(){h&&(v?a(le(!0)):v||a(le(!1)))}),[v]),(0,i.useEffect)((function(){var e,t,n;if(b){var r=ze.getState().session.currentRoom;if(f||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.visible)){f||p(!0);var o=function(e){return Oo(void 0,void 0,void 0,(function(){return Io(this,(function(t){switch(t.label){case 0:return[4,Or("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(m&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible)){var i={room_id:r.room_id,visible_white_board:!0,visible_notepad:!1};setTimeout((function(){o(i)}),500)}else if(!m&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.whiteboard_features.visible)){var a={room_id:r.room_id,visible_white_board:!1};o(a)}}else p(!0)}}),[m]);return(0,o.jsx)(o.Fragment,{children:h?(0,o.jsxs)("div",Fo({className:"whiteboard h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(s?"has-tooltip":""),onClick:function(){return Oo(void 0,void 0,void 0,(function(){return Io(this,(function(e){return ze.getState().bottomIconsActivity.isActiveScreenshare||a(le(!m)),[2]}))}))}},{children:[(0,o.jsx)("span",Fo({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(m?"footer.icons.hide-whiteboard":"footer.icons.show-whiteboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-whiteboard ".concat(l," text-[12px] lg:text-[16px]")})})]})):null})};var Bo=function(){return Bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bo.apply(this,arguments)};const Wo=i.memo((function(e){var t,n,r=e.currentRoom,i=null===(n=null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",Bo({id:"main-footer",className:"h-[55px] lg:h-[60px] px-4 shadow-footer flex items-center justify-between"},{children:(0,o.jsxs)("div",Bo({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",Bo({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)($n,{currentRoom:r}),(0,o.jsx)(xr,{currentRoom:r})]})),(0,o.jsxs)("div",Bo({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(Nr,{}),(0,o.jsx)(jr,{}),(0,o.jsx)(Kr,{currentRoom:r}),(0,o.jsx)(Gr,{currentRoom:r}),(0,o.jsx)(Lo,{}),(0,o.jsx)(Po,{}),(0,o.jsx)(ro,{}),i?(0,o.jsx)(jo,{}):null]})),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"})]}))}))}));var Vo=function(){return Vo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vo.apply(this,arguments)};const Go=i.memo((function(e){var t,n,r=e.onOpenAlert,i=null===(n=null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,a=qe(),s=(0,$e.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(rt.v2.Items,Vo({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Vo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",Vo({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){a(Pe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),s("header.menus.settings")]}))})})),(0,o.jsx)("div",Vo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",Vo({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),s("header.menus.logout")]}))})})),i?(0,o.jsx)("div",Vo({className:"py-1",role:"none"},{children:(0,o.jsx)(rt.v2.Item,{children:(0,o.jsxs)("button",Vo({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "}),s("header.menus.end")]}))})})):null]}))})}));var Ho=function(){return Ho=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ho.apply(this,arguments)},zo=(0,tt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),qo=(0,tt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Xo=function(){var e=qe(),t=(0,$e.$)().t,n=Xe(zo),r=Xe(qo),i=function(){e(Fe(!n))},a=function(){e(Oe(!r))};return(0,o.jsx)("div",Ho({className:"mt-2"},{children:(0,o.jsxs)(rt.rs.Group,{children:[(0,o.jsxs)("div",Ho({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(rt.rs.Label,Ho({className:"pr-4 w-full"},{children:t("header.room-settings.show-webcams")})),(0,o.jsx)(rt.rs,Ho({checked:n,onChange:i,className:"".concat(n?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",Ho({className:"flex items-center justify-between"},{children:[(0,o.jsx)(rt.rs.Label,Ho({className:"pr-4 w-full"},{children:t("header.room-settings.show-screen-share")})),(0,o.jsx)(rt.rs,Ho({checked:r,onChange:a,className:"".concat(r?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(r?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})}))};var Jo=function(){return Jo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jo.apply(this,arguments)},Yo=(0,tt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const $o=function(){var e=qe(),t=(0,$e.$)().t,n=Xe(Yo),r=function(){e(Ie(!n))};return(0,o.jsx)("div",Jo({className:"mt-2"},{children:(0,o.jsx)(rt.rs.Group,{children:(0,o.jsxs)("div",Jo({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(rt.rs.Label,Jo({className:"pr-4 w-full"},{children:t("header.room-settings.allow-audio-notification")})),(0,o.jsx)(rt.rs,Jo({checked:n,onChange:r,className:"".concat(n?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))})}))};const Ko=[{code:"en",text:"English"},{code:"es",text:"Spanish"},{code:"pt",text:"Portuguese"},{code:"zh-CN",text:"Chinese simplified"}];var Qo=function(){return Qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qo.apply(this,arguments)};const Zo=function(){var e=(0,$e.$)(),t=e.t,n=e.i18n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Qo({className:"s"},{children:(0,o.jsx)("div",Qo({className:"grid"},{children:(0,o.jsxs)("div",Qo({className:"flex items-center justify-start"},{children:[(0,o.jsx)("label",Qo({htmlFor:"language",className:"w-2/5 block text-sm font-medium text-gray-700 mr-5"},{children:t("header.room-settings.language")})),(0,o.jsx)("select",Qo({id:"language",name:"language",value:n.languages[0],onChange:function(e){return n.changeLanguage(e.target.value)},className:"mt-1 block w-3/5 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:Ko.map((function(e){var t=e.code,n=e.text;return(0,o.jsx)("option",Qo({value:t},{children:n}),t)}))}))]}))}))}))})};var ei=function(){return ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ei.apply(this,arguments)},ti=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ni=(0,tt.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const ri=function(){var e=qe(),t=(0,$e.$)().t,n=Xe(ni),r=ti((0,i.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(Zo,{})}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)(Xo,{})}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)($o,{})}]}),1)[0],a=function(){e(Pe(!1))};var s=function(){return(0,o.jsx)("div",ei({className:"max-w-full"},{children:(0,o.jsxs)(rt.OK.Group,ei({vertical:!0},{children:[(0,o.jsx)(rt.OK.List,ei({className:"flex p-1 space-x-1 bg-blue-900 rounded-xl"},{children:Object.keys(r).map((function(e){return(0,o.jsx)(rt.OK,ei({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-xs sm:text-sm leading-5 font-medium text-blue-700 rounded-lg outline-none","ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))})),(0,o.jsx)(rt.OK.Panels,ei({className:"mt-2"},{children:Object.values(r).map((function(e,t){return(0,o.jsx)(rt.OK.Panel,ei({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))})}),t)}))}))]}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rt.uT,ei({appear:!0,show:n,as:i.Fragment},{children:(0,o.jsx)(rt.Vq,ei({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:a},{children:(0,o.jsxs)("div",ei({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rt.uT.Child,ei({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ei({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rt.uT.Child,ei({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ei({className:"inline-block w-full h-96 max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ei({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return a()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,ei({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ei({className:"mt-2"},{children:s()}))]}))}))]}))}))}))}):null})};var oi=function(){return oi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oi.apply(this,arguments)},ii=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ai=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},si=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ci=(0,tt.P1)((function(e){return e.session.currentRoom.metadata}),(function(e){return e}));const li=i.memo((function(e){var t,n,r=e.currentRoom,a=Xe(ci),s=(0,$e.$)().t,l=si((0,i.useState)(""),2),u=l[0],d=l[1],f=si((0,i.useState)(!1),2),p=f[0],m=f[1],v=si((0,i.useState)(""),2),h=v[0],b=v[1],g=si((0,i.useState)(""),2),x=g[0],y=g[1],w=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",S=null!==(n=window.CUSTOM_LOGO)&&void 0!==n?n:"".concat(w,"/imgs/plugNmeet-logo.png");(0,i.useEffect)((function(){a&&d(a.room_title)}),[a]);var _=function(e){return void 0===e&&(e=!1),ii(void 0,void 0,void 0,(function(){var t,n,o;return ai(this,(function(i){switch(i.label){case 0:return m(!1),e?"logout"!==x?[3,1]:(r.disconnect(),[3,3]):[2];case 1:return"end Room"!==x?[3,3]:(t=ze.getState().session,n={room_id:t.currentRoom.room_id},[4,Or("endRoom",n)]);case 2:(o=i.sent()).status||(0,c.Am)(o.msg,{type:"error"}),i.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",oi({id:"main-header",className:"relative z-[99999] h-[50px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("img",{className:"absolute top-[-90px] left-[-35px] w-[300px] pointer-events-none",src:"".concat(w,"/imgs/header-before2.png"),alt:"BeforeBG"}),(0,o.jsx)("div",oi({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("img",{className:window.CUSTOM_LOGO?"h-8":"h-5",src:S,alt:"logo"})})),(0,o.jsx)("div",oi({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",oi({className:"text-base text-black leading-[1] text-center"},{children:u}))})),(0,o.jsx)("div",oi({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:(0,o.jsx)(rt.v2,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rt.v2.Button,oi({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",oi({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"})}))})),(0,o.jsx)(rt.uT,oi({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Go,{onOpenAlert:function(e){return function(e){y(e),"logout"===e?b(s("header.menus.alert.logout")):"end Room"===e&&b(s("header.menus.alert.end")),m(!0)}(e)}})}))]})}})})),(0,o.jsx)("img",{className:"absolute top-[-105px] right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none",src:"".concat(w,"/imgs/header-before2.png"),alt:"BeforeBG"}),p?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rt.uT,oi({appear:!0,show:p,as:i.Fragment},{children:(0,o.jsx)(rt.Vq,oi({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:_},{children:(0,o.jsxs)("div",oi({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rt.uT.Child,oi({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",oi({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rt.uT.Child,oi({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",oi({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",oi({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return _()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,oi({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:s("header.menus.alert.confirm")})),(0,o.jsx)("div",oi({className:"mt-2"},{children:(0,o.jsx)("p",oi({className:"text-sm text-gray-500"},{children:h}))})),(0,o.jsxs)("div",oi({className:"mt-4"},{children:[(0,o.jsx)("button",oi({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!0)}},{children:s("ok")})),(0,o.jsx)("button",oi({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!1)}},{children:s("close")}))]}))]}))}))]}))}))}))}):null]})),(0,o.jsx)(ri,{})]})}));var ui=function(){return ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ui.apply(this,arguments)};const di=function(e){var t=e.participant;return(0,o.jsx)("div",ui({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-[rgba(0,69,131)] flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name}):(0,o.jsx)(i.Fragment,{children:t.name.slice(0,2).toUpperCase()})}))};var fi=function(){return fi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fi.apply(this,arguments)};const pi=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",fi({className:"text-[11px] xl:text-[13px] text-[#003767]"},{children:[t," ",n?" (me)":null]}))};var mi=function(){return mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mi.apply(this,arguments)};const vi=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",mi({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[8px]"})})):null})};var hi=function(){return hi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hi.apply(this,arguments)};const bi=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?n.isMuted?(0,o.jsx)("div",hi({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 opacity-50 text-[8px]"})})):(0,o.jsx)("div",hi({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 opacity-50 text-[8px]"})})):null})};var gi=function(){return gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gi.apply(this,arguments)};const xi=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",gi({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 opacity-50 text-[8px]"})})):null})};var yi,wi,Si,_i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ji=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ki=!1,Ti=0,Ei=!1,Ni=function(){var e=Ui();(wi=new WebSocket(e)).onopen=function(){ki=!0,Di(),ze.dispatch(V(!0)),Si&&(clearInterval(Si),Si=0,Ti=0)},wi.onclose=function(){ki=!1,ze.dispatch(V(!1)),Si||Ei||(Si=setInterval((function(){Ti>10&&(clearInterval(Si),Ti=0),wi=void 0,Ni(),Ti++}),2e3))},wi.onerror=function(){console.log("Error in websocket")},wi.onmessage=function(e){Ri(e)}},Ri=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return void console.log(e.data)}"USER"===t.type?Ai(t.body,t.message_id):"SYSTEM"===t.type?Ci(t):"WHITEBOARD"===t.type&&Mi(t.body)}},Ai=function(e,t){"CHAT"===e.type&&(e.message_id||(e.message_id=t),ze.dispatch(_e(e)),e.isPrivate||ze.getState().bottomIconsActivity.isActiveChatPanel||ze.dispatch(he()))},Ci=function(e){switch(e.body.type){case Mr.SEND_CHAT_MSGS:Pi(e);break;case Mr.INIT_WHITEBOARD:Fi(e);break;case Mr.RENEW_TOKEN:Oi(e);break;case Mr.INFO:case Mr.ALERT:Ii(e)}},Pi=function(e){we.selectAll(ze.getState()).filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return _i(void 0,void 0,void 0,(function(){var n,r;return ji(this,(function(o){return n=t,r={type:Ir.USER,body:n,to:e.body.from.sid,room_sid:yi.currentRoom.sid,message_id:""},Bi(JSON.stringify(r)),[2]}))}))}))},Fi=function(e){ze.getState().whiteboard.requestedWhiteboardData.requested||ze.dispatch(Ge({requested:!0,sendTo:e.body.from.sid}))},Oi=function(e){ze.dispatch(O(e.body.msg))},Ii=function(e){switch(e.body.type){case Mr.INFO:(0,c.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Mr.ALERT:(0,c.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},Mi=function(e){"SCENE_UPDATE"===e.type?ze.dispatch(Le(e.msg)):"POINTER_UPDATE"===e.type?ze.dispatch(Be(e.msg)):"ADD_WHITEBOARD_FILE"===e.type&&ze.dispatch(Ve(e.msg))},Di=function(){var e,t,n,r,o,i,a,s,c=T.selectAll(ze.getState()).filter((function(e){var t;return e.sid!==(null===(t=yi.currenUser)||void 0===t?void 0:t.sid)}));if(c.length){c.sort((function(e,t){return e.joinedAt-t.joinedAt}));var l=c[0],u={type:Ir.SYSTEM,room_sid:yi.currentRoom.sid,message_id:"",to:l.sid,body:{type:Mr.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=yi.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=yi.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};Bi(JSON.stringify(u));var d={type:Ir.SYSTEM,room_sid:yi.currentRoom.sid,message_id:"",to:l.sid,body:{type:Mr.INIT_WHITEBOARD,from:{sid:null!==(i=null===(o=yi.currenUser)||void 0===o?void 0:o.sid)&&void 0!==i?i:"",userId:null!==(s=null===(a=yi.currenUser)||void 0===a?void 0:a.userId)&&void 0!==s?s:""},msg:""}};Bi(JSON.stringify(d))}},Ui=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n="ws://";"https:"===t.protocol&&(n="wss://"),e=n+t.host,"/"!==t.pathname&&(e+=t.pathname);var r=yi.token,o=yi.currenUser,i=yi.currentRoom;return e=e+"/ws?token="+r+"&roomSid="+i.sid+"&userSid="+(null===o||void 0===o?void 0:o.sid)+"&roomId="+i.room_id+"&userId="+(null===o||void 0===o?void 0:o.userId)},Li=function(){return ki},Bi=function(e){ki&&(null===wi||void 0===wi||wi.send(e))},Wi=function(){return Wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wi.apply(this,arguments)},Vi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Gi=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Hi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const zi=function(e){var t,n=e.userId,r=Xe((function(e){return T.selectById(e,n)})),a=ze.getState().session,s=Hi((0,i.useState)("Ask to share Microphone"),2),l=s[0],u=s[1],d=Hi((0,i.useState)(""),2),f=d[0],p=d[1],m=(0,$e.$)().t;(0,i.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u(m("left-panel.menus.items.ask-to-share-microphone")),p("left-panel.menus.items.share-microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u(m("left-panel.menus.items.ask-to-unmute-mic")),p("left-panel.menus.items.unmute-mic")):(null===r||void 0===r?void 0:r.audioTracks)&&(u(m("left-panel.menus.items.mute-mic")),p("mute"))}),[m,null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var v=function(){return Vi(void 0,void 0,void 0,(function(){var e,t,n;return Gi(this,(function(o){switch(o.label){case 0:return e=ze.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,Or("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,c.Am)(m("left-panel.menus.notice.you-have-muted-to",{name:null===r||void 0===r?void 0:r.name}),{toastId:"asked-status",type:"info"}):(0,c.Am)(m(n.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(null===(t=a.currenUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Wi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Wi({onClick:function(){return function(){var e,t,n,o,i;if("mute"!==f){var s={type:Ir.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:Mr.INFO,from:{sid:null!==(t=null===(e=a.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=a.currenUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:m("left-panel.menus.notice.asked-you-to",{name:null===(i=a.currenUser)||void 0===i?void 0:i.name})+m(f)}};Bi(JSON.stringify(s)),(0,c.Am)(m("left-panel.menus.notice.you-have-asked",{name:null===r||void 0===r?void 0:r.name})+m(f),{toastId:"asked-status",type:"info"})}else v()}()}},{children:function(){return(0,o.jsx)("button",Wi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:l}))}}))})):null})};var qi=function(){return qi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qi.apply(this,arguments)},Xi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ji=function(e){var t,n,r=e.userId,a=(0,$e.$)().t,s=Xe((function(e){return T.selectById(e,r)})),l=null===(t=ze.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=ze.getState().session,d=Xi((0,i.useState)("Ask to share Webcam"),2),f=d[0],p=d[1],m=Xi((0,i.useState)(""),2),v=m[0],h=m[1];(0,i.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(p(a("left-panel.menus.items.ask-to-share-webcam")),h("left-panel.menus.items.share-webcam")):(p(a("left-panel.menus.items.ask-to-stop-webcam")),h("left-panel.menus.items.stop-webcam"))}),[a,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(i.Fragment,{children:(null===(n=u.currenUser)||void 0===n?void 0:n.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===l||void 0===l?void 0:l.allow_webcams)&&!l.admin_only_webcams?(0,o.jsx)("div",qi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,qi({onClick:function(){return function(){var e,t,n,r,o,i={type:Ir.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:Mr.INFO,from:{sid:null!==(t=null===(e=u.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=u.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:a("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currenUser)||void 0===o?void 0:o.name})+a(v)}};Bi(JSON.stringify(i)),(0,c.Am)(a("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+a(v),{toastId:"asked-status",type:"info"})}()}},{children:function(){return(0,o.jsx)("button",qi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:f}))}}))})):null})};var Yi=function(){return Yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yi.apply(this,arguments)},$i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ki=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Qi=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)})),r=qe(),a=(0,$e.$)().t;return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",Yi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Yi({onClick:function(){return $i(void 0,void 0,void 0,(function(){var e,t,o;return Ki(this,(function(i){switch(i.label){case 0:return e=ze.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Mr.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,Or("dataMessage",t)];case 1:return(o=i.sent()).status?r(ae(!1)):(0,c.Am)(a(o.msg),{type:"error"}),[2]}}))}))}},{children:function(){return(0,o.jsx)("button",Yi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:a("footer.icons.lower-hand")}))}}))})):null})};var Zi=function(){return Zi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zi.apply(this,arguments)},ea=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ta=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const na=function(e){var t,n=e.userId,r=null===(t=ze.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=(0,$e.$)().t,s=Xe((function(e){return T.selectById(e,n)})),l=function(e){return ea(void 0,void 0,void 0,(function(){var t,n,r,o,i,l;return ta(this,(function(u){switch(u.label){case 0:switch(t=s.metadata,n=ze.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return i={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===s||void 0===s?void 0:s.userId,service:r,direction:o},[4,Or("updateLockSettings",i)];case 1:return(l=u.sent()).status?(0,c.Am)(a("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(a(l.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("mic")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_microphone)?a("left-panel.menus.items.unlock-microphone"):a("left-panel.menus.items.lock-microphone")}))}}))})),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("webcam")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_webcam)?a("left-panel.menus.items.unlock-webcam"):a("left-panel.menus.items.lock-webcam")}))}}))})):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("screenShare")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_screen_sharing)?a("left-panel.menus.items.unlock-screen-sharing"):a("left-panel.menus.items.lock-screen-sharing")}))}}))})):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("chat")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat)?a("left-panel.menus.items.unlock-chat"):a("left-panel.menus.items.lock-chat")}))}}))})),(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("sendChatMsg")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_send_message)?a("left-panel.menus.items.unlock-send-chat-message"):a("left-panel.menus.items.lock-send-chat-message")}))}}))})),r.chat_features.allow_file_upload?(0,o.jsx)("div",Zi({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,Zi({onClick:function(){return l("chatFile")}},{children:function(){return(0,o.jsx)("button",Zi({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_file_share)?a("left-panel.menus.items.unlock-send-file"):a("left-panel.menus.items.lock-send-file")}))}}))})):null]}):null]})})};var ra=function(){return ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ra.apply(this,arguments)};const oa=function(e){var t=e.userId,n=e.onOpenAlert,r=(0,$e.$)().t;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",ra({className:"",role:"none"},{children:(0,o.jsx)(rt.v2.Item,ra({onClick:function(){n(t)}},{children:function(){return(0,o.jsx)("button",ra({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white"},{children:r("left-panel.menus.items.remove-participant")}))}}))}))})})};var ia=function(){return ia=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ia.apply(this,arguments)},aa=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},sa=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ca=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const la=function(e){var t=e.userId,n=e.name,r=ca((0,i.useState)(!1),2),a=r[0],s=r[1],l=(0,$e.$)().t,u=function(e){e===t&&s(!0)},d=function(e){return void 0===e&&(e=!1),aa(void 0,void 0,void 0,(function(){var n,r,o;return sa(this,(function(i){switch(i.label){case 0:return s(!1),e?(n=ze.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t},[4,Or("removeParticipant",r)]):[2];case 1:return(o=i.sent()).status?(0,c.Am)(l("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,c.Am)(l(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(rt.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rt.v2.Button,ia({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small brand-color1 opacity-50"})})),(0,o.jsx)(rt.uT,ia({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(rt.v2.Items,ia({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)(zi,{userId:t}),(0,o.jsx)(Ji,{userId:t}),(0,o.jsx)(Qi,{userId:t}),(0,o.jsx)(na,{userId:t}),(0,o.jsx)(oa,{onOpenAlert:u,userId:t})]}))}))]})}}),(0,o.jsx)(rt.uT,ia({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(rt.Vq,ia({open:a,onClose:function(){return d()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",ia({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(rt.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",ia({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",ia({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return d()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(rt.Vq.Title,ia({className:"mb-4 md:mb-6 text-sm"},{children:l("left-panel.menus.notice.confirm",{name:n})})),(0,o.jsx)("button",ia({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!0)}},{children:l("left-panel.menus.notice.remove")})),(0,o.jsx)("button",ia({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!1)}},{children:l("cancel")}))]}))]}))}))}))]})})};var ua=function(){return ua=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ua.apply(this,arguments)};const da=function(e){var t,n=e.participant,r=ze.getState().session.currenUser;return(0,o.jsx)("li",ua({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",ua({className:"flex items-center justify-between"},{children:[(0,o.jsxs)("div",ua({className:"left flex items-center "},{children:[(0,o.jsx)(di,{participant:n}),(0,o.jsx)(pi,{name:n.name,isCurrentUser:(null===r||void 0===r?void 0:r.userId)===n.userId})]})),(0,o.jsxs)("div",ua({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(vi,{userId:n.userId}),(0,o.jsx)(bi,{userId:n.userId}),(0,o.jsx)(xi,{userId:n.userId}),(null===(t=null===r||void 0===r?void 0:r.metadata)||void 0===t?void 0:t.is_admin)&&r.userId!==n.userId?(0,o.jsx)(la,{userId:n.userId,name:n.name}):null]}))]}))}))};var fa=function(){return fa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fa.apply(this,arguments)};const pa=i.memo((function(){var e=Xe(T.selectAll),t=(0,$e.$)().t;return(0,o.jsx)("div",fa({id:"main-left-panel",className:"participants-wrapper scrollBar relative z-10 left-0 top-0 h-full w-[200px] xl:w-[270px] px-2 xl:px-4 pt-2 xl:pt-5 overflow-auto multi-gradient"},{children:(0,o.jsxs)("div",fa({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",fa({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",fa({className:"text-sm text-black"},{children:t("left-panel.participants",{total:e.length})}))})),(0,o.jsx)("div",fa({className:"all-participants-wrap"},{children:function(){var t,n,r,i,a,s,c,l=ze.getState().session,u=null===(t=l.currenUser)||void 0===t?void 0:t.userId,d=null!==(i=null===(r=null===(n=l.currentRoom.metadata)||void 0===n?void 0:n.room_features)||void 0===r?void 0:r.allow_view_other_users_list)&&void 0!==i&&i,f=null!==(c=null===(s=null===(a=l.currenUser)||void 0===a?void 0:a.metadata)||void 0===s?void 0:s.is_admin)&&void 0!==c&&c;return e.map((function(e){if(f||d||e.metadata.is_admin||u===e.userId)return(0,o.jsx)(da,{participant:e},e.sid)}))}()}))]}))}))}));var ma=function(){return ma=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ma.apply(this,arguments)};const va=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",ma({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-brandColor1"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name});var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(i.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()})}()}))};var ha=function(){return ha=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ha.apply(this,arguments)};const ba=i.memo((function(e){var t=e.body,n=e.currentUser,r=Xe((function(e){return T.selectById(e,t.from.userId)})),a=(0,$e.$)().t;return(0,o.jsx)("div",ha({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",ha({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",ha({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})})):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",ha({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",ha({className:"name pl-2 text-sm pb-1"},{children:a("right-panel.you")})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]})):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(va,{participant:r,from:t.from}),(0,o.jsxs)("div",ha({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",ha({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name," ",(0,o.jsx)("span",ha({style:{fontSize:"10px"}},{children:r?null:" (offline)"}))]})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]}))]})}))}))}));var ga=function(){return ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ga.apply(this,arguments)},xa=(0,tt.P1)((function(e){return e.session.currenUser}),(function(e){return e}));const ya=function(){var e=(0,i.useRef)(null),t=Xe(we.selectAll),n=Xe(xa);(0,i.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}));return(0,o.jsx)("div",ga({className:"pb-3",ref:e},{children:t.map((function(e){var t=e;return(0,o.jsx)(ba,{body:t,currentUser:n},t.message_id)}))}))};var wa=n(91036),Sa=n.n(wa),_a=n(65342),ja=n.n(_a),ka=function(){return ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ka.apply(this,arguments)},Ta=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ea=function(e){var t,n,r,a=e.isChatServiceReady,s=e.lockSendFile,l=e.currentRoom,u=(0,i.useRef)(null),d=i.useRef(null),f=Ta((0,i.useState)(!1),2),p=f[0],m=f[1],v=(0,$e.$)().t,h=null===(t=ze.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.chat_features,b=null!==(r=null===(n=null===h||void 0===h?void 0:h.allowed_file_types)||void 0===n?void 0:n.map((function(e){return"."+e})).join(","))&&void 0!==r?r:"*",g=function(e,t){var n,r,o="",i=new(ja())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(n=e.currenUser)||void 0===n?void 0:n.userId,resumable:!0},headers:{Authorization:e.token},fileType:null!==(r=null===h||void 0===h?void 0:h.allowed_file_types)&&void 0!==r?r:[],fileTypeErrorCallback:function(e){(0,c.Am)(v("notifications.file-type-not-allow",{filetype:e.type}),{type:c.Am.TYPE.ERROR})},maxFileSize:(null===h||void 0===h?void 0:h.max_file_size)?1e6*(null===h||void 0===h?void 0:h.max_file_size):void 0,maxFileSizeErrorCallback:function(){(0,c.Am)(v("notifications.max-file-size-exceeds"),{type:c.Am.TYPE.ERROR})}});i.on("fileAdded",(function(e){o=e.fileName,i.isUploading()||(m(!0),i.upload())})),i.on("fileSuccess",(function(e,t){var n=JSON.parse(t);m(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=d.current)&&void 0!==e?e:"")}),300),n.status&&(x(n.filePath,n.fileName),(0,c.Am)(v("right-panel.file-upload-success"),{type:c.Am.TYPE.SUCCESS}))})),i.on("fileError",(function(e,t){var n=JSON.parse(t);m(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=d.current)&&void 0!==e?e:"")}),300),(0,c.Am)(v(n.msg),{type:c.Am.TYPE.ERROR})})),i.on("uploadStart",(function(){d.current=(0,c.Am)(v("right-panel.uploading-file",{fileName:o}),{closeButton:!1,progress:0})})),i.on("fileProgress",(function(e){var t,n=e.progress(!1);c.Am.update(null!==(t=d.current)&&void 0!==t?t:"",{progress:Number(n)})})),i.addFiles(t)},x=function(e,t){if(Li()){var n='<a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+e,'" target="_blank">').concat(t,"</a>"),r={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:l.localParticipant.sid,userId:l.localParticipant.identity,name:l.localParticipant.name},msg:n},o={type:Ir.USER,room_sid:l.sid,message_id:"",body:r};Bi(JSON.stringify(o))}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:u,accept:b,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=ze.getState().session;g(n,t)}}(e)}}),(0,o.jsx)("button",ka({disabled:!a||s||p,onClick:function(){return function(){var e;p||null===(e=u.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[20px] opacity-50"})}))]})})};var Na=function(){return Na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Na.apply(this,arguments)},Ra=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Aa=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ca=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Pa=(0,tt.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),Fa=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),Oa=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e}));const Ia=function(e){var t=e.currentRoom,n=Xe(Pa),r=Xe(Fa),a=Xe(Oa),s=(0,$e.$)().t,c=Ca((0,i.useState)(!1),2),l=c[0],u=c[1],d=Ca((0,i.useState)(!1),2),f=d[0],p=d[1],m=Ca((0,i.useState)(!0),2),v=m[0],h=m[1],b=Ca((0,i.useState)(""),2),g=b[0],x=b[1];(0,i.useEffect)((function(){ze.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||h(!1)}),[]),(0,i.useEffect)((function(){u(!!r),p(!!a)}),[r,a]),(0,i.useEffect)((function(){var e,t,n,o,i,a,s=null===(t=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,c=null===(o=null===(n=ze.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,l=null===(a=null===(i=ze.getState().session.currenUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin;s&&!l&&!1!==r&&u(!0),c&&!l&&!1!==r&&p(!0)}),[]);var y=function(){return Ra(void 0,void 0,void 0,(function(){var e,n,r;return Aa(this,(function(o){var i;return i=g,e=Sa()(i,{allowedTags:["b","i","strong","br"],allowedSchemes:["mailto","tel"]}),(0,lo.isEmpty)(e)||(n={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:Ir.USER,room_sid:t.sid,message_id:"",body:n},Li()&&(Bi(JSON.stringify(r)),x(""))),[2]}))}))};return(0,o.jsxs)("div",Na({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm text-brandColor1 placeholder:text-brandColor1/70",value:g,onChange:function(e){return x(e.currentTarget.value)},disabled:!n||l,placeholder:s("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),y())}(e)}}),(0,o.jsxs)("div",Na({className:"btns"},{children:[(0,o.jsx)("button",Na({disabled:!n||l,onClick:function(){return y()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send brand-color1 text-[20px]"})})),v?(0,o.jsx)(Ea,{isChatServiceReady:n,lockSendFile:f,currentRoom:t}):null]}))]}))};var Ma=function(){return Ma=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ma.apply(this,arguments)},Da=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ua=(0,tt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const La=i.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=Xe(Ua),a=Da((0,i.useState)(!1),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var e,t,n,o,i=null===(t=null===(e=ze.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,a=null===(o=null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;i&&!a&&!1!==r&&c(!1)}),[]),(0,i.useEffect)((function(){n&&c(!1)}),[n]),(0,i.useEffect)((function(){n||c(!r)}),[r,n]),(0,o.jsxs)("div",Ma({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsx)("div",Ma({className:"h-[calc(100%)] MessageModule-wrapper scrollBar relative z-10 right-0 top-0 w-[230px] xl:w-[300px] px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto multi-gradient"},{children:(0,o.jsx)("div",Ma({className:"all-MessageModule-wrap"},{children:(0,o.jsx)(ya,{})}))})),n?(0,o.jsx)("div",{className:"w-[10px] h-[10px] hiddenAnimation"}):null,s?(0,o.jsx)("div",Ma({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(Ia,{currentRoom:t})})):null]}))}));var Ba=function(){return Ba=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ba.apply(this,arguments)};const Wa=function(e){var t=e.speaker;return(0,o.jsxs)("div",Ba({className:"m-1 px-3 py-1 text-[#003767] text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] brand-color2 mr-2"}),t.name]}))};var Va=function(){return Va=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Va.apply(this,arguments)};const Ga=i.memo((function(){var e=Xe(g.selectAll);return(0,o.jsx)("div",Va({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Wa,{speaker:e},e.sid)})):null}))}));var Ha=function(){return Ha=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ha.apply(this,arguments)},za=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const qa=function(e){var t=e.track,n=(0,i.useRef)(null),r=za((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Ha({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[a?null:(0,o.jsx)("div",Ha({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Ha({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("button",Ha({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"})})),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute"})]}))};var Xa=function(){return Xa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xa.apply(this,arguments)};const Ja=function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",Xa({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))};var Ya=function(){return Ya=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ya.apply(this,arguments)},$a=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ka=function(e){var t=e.track,n=(0,i.useRef)(null),r=$a((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Ya({className:"camera-video-player"},{children:[a?null:(0,o.jsx)("div",Ya({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Ya({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("button",Ya({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"})})),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"})]}))};var Qa=function(){return Qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qa.apply(this,arguments)},Za=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const es=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)})),r=Za((0,i.useState)("#FFFFFF"),2),a=r[0],s=r[1];(0,i.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case nt.ConnectionQuality.Excellent:s("#38f105");break;case nt.ConnectionQuality.Good:s("#c8f6bd");break;case nt.ConnectionQuality.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",Qa({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:a},className:"pnm-network text-[7px]"})}))};var ts=function(){return ts=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ts.apply(this,arguments)};const ns=function(e){var t=e.userId,n=Xe((function(e){return T.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",ts({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",ts({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"})})):(0,o.jsx)("p",ts({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"})}))})):null})};var rs=function(){return rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rs.apply(this,arguments)};const os=i.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",rs({className:"camera-modules"},{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(es,{userId:t}),(0,o.jsx)(ns,{userId:t}),(0,o.jsx)(Ka,{track:n})]})}))}));var is=function(){return is=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},is.apply(this,arguments)};const as=function(e){var t,n=e.participantType,r=e.participant,i=Xe((function(e){return g.selectById(e,r.identity)}));return(0,o.jsx)("div",is({className:"video-camera-item relative ".concat(i?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===nt.Track.Source.Camera){var i=(0,o.jsxs)("div",is({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",is({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]})),(0,o.jsx)(os,{userId:r.identity,track:e})]}),e.trackSid);t.push(i)}})),t)}))};var ss=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const cs=function(e){var t=ss((0,i.useState)([]),2),n=t[0],r=t[1],a=ss((0,i.useState)(0),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var i={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof nt.LocalParticipant},a=e.getTracks().filter((function(e){return e.source===nt.Track.Source.Camera}));if(t+=a.length,a.length){var s=(0,o.jsx)(as,{participantType:i,participant:e},e.sid);n.push(s)}}})),c(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var ls=function(){return ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ls.apply(this,arguments)},us=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const ds=i.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=null!==n&&void 0!==n?n:25,a=qe(),s=cs(t),c=s.allParticipants,l=s.totalNumWebcams,u=us((0,i.useState)(0),2),d=u[0],f=u[1],p=us((0,i.useState)([]),2),m=p[0],v=p[1],h=us((0,i.useState)(!1),2),b=h[0],g=h[1],x=us((0,i.useState)(!1),2),y=x[0],w=x[1];(0,i.useEffect)((function(){c.length<=r?v(c):(f(1),S(c,1,r))}),[c]),(0,i.useEffect)((function(){l>r?(g(1!==d),w(!(d>=l/r))):(g(!1),w(!1))}),[l,d,r]);var S=function(e,t,n){var r=us(e).slice(0).slice((t-1)*n,t*n);v(r),a(L(1!==t))};return(0,o.jsx)(i.Fragment,{children:l>0?(0,o.jsx)("div",ls({className:"all-webcam-wrapper total-cam-".concat(l)},{children:(0,o.jsx)("div",ls({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(i.Fragment,{children:[b?(0,o.jsx)("button",ls({type:"button",className:"previous-cam",onClick:function(){return S(c,d-1,r),void f(d-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"})})):null,(0,o.jsx)(i.Fragment,{children:m}),y?(0,o.jsx)("button",ls({type:"button",className:"next-cam",onClick:function(){return S(c,d+1,r),void f(d+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"})})):null]})}))})):null})}));var fs=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),ps=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),ms=(0,tt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const vs=function(e){var t=e.videoSubscribers,n=Xe(fs),r=Xe(ps),i=Xe(ms);return(0,o.jsx)(o.Fragment,{children:!t||!i||r&&n?null:(0,o.jsx)(ds,{videoSubscribers:t,perPage:3})})};var hs=function(){return hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hs.apply(this,arguments)};const bs=i.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers,r=qe();(0,i.useEffect)((function(){return function(){r(se(!1))}}),[r]);return(0,o.jsxs)("div",hs({className:"share-screen-wrapper is-share-screen-running"},{children:[(0,o.jsx)(vs,{videoSubscribers:n}),function(){if(t){var e=Array();return t.forEach((function(t){t.source===nt.Track.Source.ScreenShare?e.push((0,o.jsx)(qa,{track:t},t.trackSid)):t.source===nt.Track.Source.ScreenShareAudio&&e.push((0,o.jsx)(Ja,{track:t},t.trackSid))})),e}return null}()]}))}));var gs=function(){return gs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gs.apply(this,arguments)};const xs=i.memo((function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",gs({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))}));var ys=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const ws=i.memo((function(e){var t=e.audioSubscribers,n=ys((0,i.useState)([]),2),r=n[0],a=n[1];return(0,i.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(xs,{track:t},t.trackSid))}))})),a(e)}),[t]),(0,o.jsx)(i.Fragment,{children:r.length?r:null})}));var Ss=function(){return Ss=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ss.apply(this,arguments)},_s=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},js=(0,tt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features}),(function(e){return e}));const ks=i.memo((function(e){var t=e.videoSubscribers,n=qe(),r=Xe(js),a=ze.getState().session.currenUser,s=_s((0,i.useState)(),2),c=s[0],l=s[1];(0,i.useEffect)((function(){n(ie(!1))}),[n]);var u=function(){l(!0)};return(0,o.jsxs)("div",Ss({className:"middle-fullscreen-wrapper h-full flex"},{children:[(0,o.jsx)(vs,{videoSubscribers:t}),function(){var e;if((null===r||void 0===r?void 0:r.is_active)&&r.host){var t=r.host;return r.host.match("host.docker.internal")&&(t="http://localhost:9001"),t=(null===(e=null===a||void 0===a?void 0:a.metadata)||void 0===e?void 0:e.is_admin)?"".concat(t,"/p/").concat(r.note_pad_id,"?userName=").concat(a.name):"".concat(t,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===a||void 0===a?void 0:a.name),(0,o.jsxs)("div",Ss({className:"notepad-wrapper h-[calc(100%-50px)] w-full flex-1 sm:px-5 mt-9"},{children:[c?null:(0,o.jsx)("div",Ss({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Ss({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:t,onLoad:u})]}))}return null}()]}))}));var Ts=n(23493),Es=n.n(Ts),Ns=n(74474),Rs=n.n(Ns),As=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Cs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ps=function(e,t,n){var r,o,i;return!(!t||!(t.id===(null===(r=e.editingElement)||void 0===r?void 0:r.id)||t.id===(null===(o=e.resizingElement)||void 0===o?void 0:o.id)||t.id===(null===(i=e.draggingElement)||void 0===i?void 0:i.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fs.apply(this,arguments)},Os=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Is=function(){var e=(0,i.useRef)(null),t=i.useRef(null),n=Os((0,i.useState)(!1),2),r=n[0],a=n[1],s=(0,$e.$)().t,l=qe(),u=function(e,n){var r,o="",i=new(ja())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(r=e.currenUser)||void 0===r?void 0:r.userId,resumable:!0},headers:{Authorization:e.token},fileType:["jpg","jpeg","png","svg"],fileTypeErrorCallback:function(e){(0,c.Am)(s("notifications.file-type-not-allow",{filetype:e.type}),{type:c.Am.TYPE.ERROR})},maxFileSize:2e6,maxFileSizeErrorCallback:function(){(0,c.Am)(s("notifications.max-file-size-exceeds"),{type:c.Am.TYPE.ERROR})}});i.on("fileAdded",(function(e){o=e.fileName,i.isUploading()||(a(!0),i.upload())})),i.on("fileSuccess",(function(e,n){var r=JSON.parse(n);a(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=t.current)&&void 0!==e?e:"")}),300),r.status&&(!function(e,t){var n,r,o,i,a={id:ct(),filePath:e,fileName:t};l(We(a));var s=ze.getState().whiteboard.whiteboardFiles,c=ze.getState().session,u={type:Dr.ADD_WHITEBOARD_FILE,from:{sid:null!==(r=null===(n=c.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(i=null===(o=c.currenUser)||void 0===o?void 0:o.userId)&&void 0!==i?i:""},msg:s},d={type:Ir.WHITEBOARD,room_sid:c.currentRoom.sid,room_id:c.currentRoom.room_id,message_id:"",body:u};Bi(JSON.stringify(d))}(r.filePath,r.fileName),(0,c.Am)(s("right-panel.file-upload-success"),{type:c.Am.TYPE.SUCCESS}))})),i.on("fileError",(function(e,n){var r=JSON.parse(n);a(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=t.current)&&void 0!==e?e:"")}),300),(0,c.Am)(s(r.msg),{type:c.Am.TYPE.ERROR})})),i.on("uploadStart",(function(){t.current=(0,c.Am)(s("right-panel.uploading-file",{fileName:o}),{closeButton:!1,progress:0})})),i.on("fileProgress",(function(e){var n,r=e.progress(!1);c.Am.update(null!==(n=t.current)&&void 0!==n?n:"",{progress:Number(r)})})),i.addFiles(n)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:e,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=ze.getState().session;u(n,t)}}(e)},accept:".png,.jpg,.jpeg,.svg"}),(0,o.jsx)("button",Fs({disabled:r,onClick:function(){return function(){var t;r||null===(t=e.current)||void 0===t||t.click()}()},className:"w-10 h-7 flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[14px] opacity-50"})}))]})})};var Ms,Ds=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Us=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ls="",Bs="",Ws="",Vs=50,Gs=50,Hs=function(e,t,n){return Ds(void 0,void 0,void 0,(function(){return Us(this,(function(r){return[2,new Promise((function(r,o){return Ds(void 0,void 0,void 0,(function(){var i,a,s;return Us(this,(function(c){switch(c.label){case 0:return[4,fetch(e)];case 1:return[4,c.sent().blob()];case 2:return(i=c.sent())||o(null),Ls=t,(Ms=n)<0&&(Ms=1),a=new FileReader,s=new FileReader,a.onloadend=function(){"unknown"!==(Bs=qs(a))?s.readAsDataURL(i):o(null)},a.readAsArrayBuffer(i),s.onload=function(){if(Ws=(Ws=s.result).replace("application/octet-stream",Bs),"image/svg+xml"!==Bs){var e=new Image;e.src=Ws,e.onload=function(){Vs=e.height,Gs=e.width,Vs>100&&(Vs=.2*e.height,Gs=.2*e.width);var t=zs();r(t)}}else{var t=zs();r(t)}},[2]}}))}))}))]}))}))},zs=function(){return{image:{id:Ls,dataURL:Ws,mimeType:Bs,created:Date.now()},elm:{id:Ls,type:"image",x:360,y:115,width:Gs,height:Vs,angle:0,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],strokeSharpness:"round",seed:lt(),version:Ms+1,versionNonce:lt(),isDeleted:!1,boundElements:null,updated:Date.now(),link:null,status:"pending",fileId:Ls,scale:[1,1]}}},qs=function(e){for(var t,n=new Uint8Array(e.result).subarray(0,4),r="",o=0;o<n.length;o++)r+=n[o].toString(16);switch(r){case"89504e47":t="image/png";break;case"47494638":t="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":t="image/jpeg";break;case"3c3f786d":case"3c737667":t="image/svg+xml";break;default:t="unknown"}return t},Xs=function(){return Xs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xs.apply(this,arguments)},Js=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ys=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},$s=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ks=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qs=(0,tt.P1)((function(e){return e.whiteboard.excalidrawElements}),(function(e){return e})),Zs=(0,tt.P1)((function(e){return e.whiteboard.mousePointerLocation}),(function(e){return e})),ec=(0,tt.P1)((function(e){return e.whiteboard.whiteboardFiles}),(function(e){return e})),tc=(0,tt.P1)((function(e){return e.whiteboard.requestedWhiteboardData}),(function(e){return e}));const nc=i.memo((function(e){var t=e.videoSubscribers,n=ze.getState().session.currenUser,r=ze.getState().session.currentRoom,a=-1,s=new Map,c=[],l=[],u=(0,$e.$)().i18n,d=qe(),f=Xe(T.selectAll),p=$s(function(){var e=As((0,i.useState)(null),2),t=e[0],n=e[1];return[t,(0,i.useCallback)((function(e){return n(e)}),[])]}(),2),m=p[0],v=p[1],h=$s((0,i.useState)(!0),2),b=h[0],g=h[1],x=$s((0,i.useState)("light"),2),y=x[0],w=x[1],S=Xe(Qs),_=Xe(Zs),j=Xe(ec),k=Xe(tc);(0,i.useEffect)((function(){var e;return m||((null===(e=null===n||void 0===n?void 0:n.metadata)||void 0===e?void 0:e.is_admin)&&g(!1),w("light")),function(){if(m){var e=JSON.stringify(m.getSceneElementsIncludingDeleted());d(Le(e))}}}),[m]),(0,i.useEffect)((function(){m||function(){var e=ze.getState().session,t=T.selectAll(ze.getState()).filter((function(t){var n;return t.sid!==(null===(n=e.currenUser)||void 0===n?void 0:n.sid)}));if(t.length){t.sort((function(e,t){return e.joinedAt-t.joinedAt}));var n=t;n.length>2&&(n=t.slice(0,2)),n.forEach((function(t){var n,r,o,i,a={type:Ir.SYSTEM,room_sid:e.currentRoom.sid,message_id:"",to:t.sid,body:{type:Mr.INIT_WHITEBOARD,from:{sid:null!==(r=null===(n=e.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(i=null===(o=e.currenUser)||void 0===o?void 0:o.userId)&&void 0!==i?i:""},msg:""}};setTimeout((function(){Bi(JSON.stringify(a))}),500)}))}}(),k.requested&&m&&function(e,t){var n,r,o,i,a=e.getSceneElementsIncludingDeleted(),s=ze.getState().session,c={sid:null!==(r=null===(n=s.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(i=null===(o=s.currenUser)||void 0===o?void 0:o.userId)&&void 0!==i?i:""};if(a.length){var l={type:Dr.SCENE_UPDATE,from:c,msg:JSON.stringify(a)},u={type:Ir.WHITEBOARD,room_sid:s.currentRoom.sid,room_id:s.currentRoom.room_id,message_id:"",body:l,to:t};Bi(JSON.stringify(u))}var d=ze.getState().whiteboard.whiteboardFiles;d&&(l={type:Dr.ADD_WHITEBOARD_FILE,from:c,msg:d},u={type:Ir.WHITEBOARD,room_sid:s.currentRoom.sid,room_id:s.currentRoom.room_id,message_id:"",body:l,to:t},Bi(JSON.stringify(u)));ze.dispatch(Ge({requested:!1,sendTo:""}))}(m,k.sendTo)}),[k,m]),(0,i.useEffect)((function(){m&&(f.forEach((function(e){e.metadata.is_admin&&(s.has(e.userId)||s.set(e.userId,{}))})),m.updateScene({collaborators:s}))}),[f,m]),(0,i.useEffect)((function(){if(S&&m){var e=JSON.parse(S),t=function(e,t,n){var r,o,i,a,s=e.reduce((function(e,t,n){return e[t.id]=[t,n],e}),{}),c=e.slice(),l=new WeakMap,u=0,d=0,f=-1;try{for(var p=Cs(t),m=p.next();!m.done;m=p.next()){var v=m.value;f++;var h=s[v.id];if(Ps(n,null===h||void 0===h?void 0:h[0],v))v.parent&&delete v.parent;else{h&&l.set(h[0],!0);var b=v.parent||(null===(i=t[f-1])||void 0===i?void 0:i.id)||null;if(null!=b)if(delete v.parent,"^"===b)d++,0===u?(c.unshift(v),s[v.id]=[v,u-d]):(c.splice(u+1,0,v),s[v.id]=[v,u+1-d],u++);else{var g=s[b]?null===(a=s[b])||void 0===a?void 0:a[1]:null;null!=g&&(g+=d),null!=g&&g>=u?(c.splice(g+1,0,v),d++,s[v.id]=[v,g+1-d],u=g+1):null!=g?(c.splice(u+1,0,v),d++,s[v.id]=[v,u+1-d],u++):(c.push(v),s[v.id]=[v,c.length-1-d])}else h?(c[h[1]]=v,s[v.id]=[v,h[1]]):(c.push(v),s[v.id]=[v,c.length-1-d])}}}catch(x){r={error:x}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return c.filter((function(e){return!l.has(e)}))}(m.getSceneElementsIncludingDeleted(),e,m.getAppState());N(t)}}),[S,m]),(0,i.useEffect)((function(){var e;if(_){var t=JSON.parse(_),n=t.pointer,r=t.button,o=t.name,i=t.userId,a=t.selectedElementIds,c=new Map(s),l=null!==(e=c.get(i))&&void 0!==e?e:{};l.pointer=n,l.button=r,l.selectedElementIds=a,l.username=o,c.set(i,l),null===m||void 0===m||m.updateScene({collaborators:c})}}),[_]),(0,i.useEffect)((function(){if(j&&m){var e=JSON.parse(j);E(m,e)}}),[j,m]);var E=function(e,t){return Js(void 0,void 0,void 0,(function(){var n,r,o,i,s,u,d,f,p,m,v;return Ys(this,(function(h){switch(h.label){case 0:h.trys.push([0,5,6,7]),n=Ks(t),r=n.next(),h.label=1;case 1:if(r.done)return[3,4];for(d in o=r.value,i=window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+o.filePath,s=e.getFiles(),u=!1,s)if(s[d].id===o.id){u=!0;break}return u?[3,3]:[4,Hs(i,o.id,a)];case 2:(f=h.sent())&&e&&(c.push(f.image),l.push(f.elm)),h.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return p=h.sent(),m={error:p},[3,7];case 6:try{r&&!r.done&&(v=n.return)&&v.call(n)}finally{if(m)throw m.error}return[7];case 7:return c.length?(e.addFiles(c),l.forEach((function(t){var n=e.getSceneElementsIncludingDeleted().slice(0);n.filter((function(e){return e.id===t.id})).length||n.push(t),e.updateScene({elements:n})})),c=[],l=[],[2]):[2]}}))}))},N=function(e,t){var n=(void 0===t?{}:t).init,r=void 0!==n&&n;e.length&&(null===m||void 0===m||m.updateScene({elements:e,commitToHistory:r}),a=(0,Ns.getSceneVersion)(e),null===m||void 0===m||m.history.clear())},R=function(e){if(m&&n&&e.length&&Li()){if(b)return;if((0,Ns.getSceneVersion)(e)>a){a=(0,Ns.getSceneVersion)(e);var t=JSON.stringify(e),o={type:Dr.SCENE_UPDATE,from:{sid:n.sid,userId:n.userId},msg:t},i={type:Ir.WHITEBOARD,room_sid:r.sid,room_id:r.room_id,message_id:"",body:o};Bi(JSON.stringify(i))}}},A=Es()((function(e){if(!b&&e.pointersMap.size<2&&n&&Li()){var t={pointer:e.pointer,button:e.button||"up",selectedElementIds:null===m||void 0===m?void 0:m.getAppState().selectedElementIds,userId:n.userId,name:n.name},o={type:Dr.POINTER_UPDATE,from:{sid:n.sid,userId:n.userId},msg:JSON.stringify(t)},i={type:Ir.WHITEBOARD,room_id:r.room_id,room_sid:r.sid,message_id:"",body:o};Bi(JSON.stringify(i))}}),33),C=function(){var e;return(0,o.jsx)(o.Fragment,{children:(null===(e=null===n||void 0===n?void 0:n.metadata)||void 0===e?void 0:e.is_admin)?(0,o.jsx)(Is,{}):null})};return(0,o.jsxs)("div",Xs({className:"middle-fullscreen-wrapper h-full flex"},{children:[(0,o.jsx)(vs,{videoSubscribers:t}),(0,o.jsx)("div",Xs({className:"excalidraw-wrapper flex-1 w-full h-[calc(100%-50px)] sm:px-5 mt-9"},{children:(0,o.jsx)(Rs(),{ref:v,onChange:R,onPointerUpdate:A,viewModeEnabled:b,isCollaborating:!0,theme:y,name:"plugNmeet whiteboard",UIOptions:{canvasActions:{loadScene:!1,export:!1}},autoFocus:!0,detectScroll:!0,langCode:u.languages[0],renderTopRightUI:C})}))]}))}));var rc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},oc=(0,tt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),ic=(0,tt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),ac=(0,tt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),sc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),cc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e}));const lc=function(e){var t,n=e.audioSubscribers,r=e.videoSubscribers,a=e.screenShareTracks,s=Xe(oc),c=Xe(ic),l=Xe(ac),u=Xe(sc),d=Xe(cc),f=rc((0,i.useState)(null!==(t=window.NUMBER_OF_WEBCAMS_PER_PAGE_PC)&&void 0!==t?t:25),2),p=f[0],m=f[1];(0,i.useEffect)((function(){var e,t=ze.getState().session.userDeviceType;"mobile"!==t&&"tablet"!==t||m(null!==(e=window.NUMBER_OF_WEBCAMS_PER_PAGE_MOBILE)&&void 0!==e?e:6)}),[]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[l&&s&&a?(0,o.jsx)(bs,{videoSubscribers:r,screenShareTracks:a}):null,!s&&u?(0,o.jsx)(ks,{videoSubscribers:r}):null,!s&&d?(0,o.jsx)(nc,{videoSubscribers:r}):null,!c||(l||u||d)&&(s||u||d)||!r?null:(0,o.jsx)(ds,{videoSubscribers:r,perPage:p}),n?(0,o.jsx)(ws,{audioSubscribers:n}):null]})})};var uc=function(){return uc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uc.apply(this,arguments)},dc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},fc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),pc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),mc=(0,tt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),vc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),hc=(0,tt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e}));const bc=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,a=e.videoSubscribers,s=e.screenShareTracks,c=e.isRecorder,l=Xe(fc),u=Xe(mc),d=Xe(vc),f=Xe(hc),p=qe(),m=Xe(pc),v=dc((0,i.useState)(!0),2),h=v[0],b=v[1],g=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,i.useEffect)((function(){var e;(null===(e=ze.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(b(!1),p(oe(!1)))}),[p]),(0,o.jsxs)("div",uc({id:"main-area",className:"".concat(c?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-110px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(m?"showChatPanel":"hideChatPanel"," ").concat(l?"showParticipantsPanel":"hideParticipantsPanel"," ").concat((null===s||void 0===s?void 0:s.size)&&u?"showScreenShare":"hideScreenShare","\n      ").concat(d?"showSharedNotepad":"hideSharedNotepad","\n      ").concat(f?"showWhiteboard":"hideWhiteboard","\n      ")},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(g,"/imgs/app-banner.jpg"),alt:"AppBG"}),(0,o.jsxs)("div",uc({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(rt.uT,uc({className:"transition-left-panel",show:l,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(pa,{})})),(0,o.jsxs)("div",uc({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(Ga,{}),(0,o.jsx)(lc,{currentRoom:n,audioSubscribers:r,videoSubscribers:a,screenShareTracks:s})]})),h?(0,o.jsx)(rt.uT,uc({className:"transition-right-panel",show:m,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(La,{currentRoom:n,isRecorder:c})})):null]}))]}))};var gc=function(){return gc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gc.apply(this,arguments)},xc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},yc=(0,tt.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const wc=function(e){var t=e.onCloseModal,n=xc((0,i.useState)(!0),2),r=n[0],a=n[1],s=Xe(yc),c=qe(),l=(0,$e.$)().t,u=function(){a(!1),c(I(!1)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",gc({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",gc({className:"popup-inner bg-white w-full max-w-md rounded-2xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",gc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)("p",gc({className:"text-base md:text-lg text-[#004D90] font-normal mb-5 text-center"},{children:l("app.how-to-join")})),(0,o.jsxs)("div",gc({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",gc({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return c(ue(!0)),void u()}},{children:[(0,o.jsx)("div",gc({className:"h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-xl"})})),(0,o.jsx)("p",gc({className:"text-sm md:text-base brand-color1 font-normal"},{children:l("app.microphone")}))]})),(0,o.jsxs)("button",gc({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",gc({className:"camera h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only brand-color1 text-xl"})})),(0,o.jsx)("p",gc({className:"text-sm md:text-base brand-color1 font-normal"},{children:l("app.listen-only")}))]}))]}))]}))})):null})};var Sc=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o;ze.dispatch(N({sid:e.sid,userId:e.identity,name:null!==(n=e.name)&&void 0!==n?n:"",metadata:e.metadata?JSON.parse(e.metadata):null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(o=null===(r=e.joinedAt)||void 0===r?void 0:r.getTime())&&void 0!==o?o:Date.now()})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=T.selectById(ze.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&ze.dispatch(U({isActive:!1,sharedBy:""})),ze.dispatch(R(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1),t.that.updateScreenShareOnUserDisconnect(e)},this.connectionQualityChanged=function(e,n){ze.dispatch(A({id:n.identity,changes:{connectionQuality:e}})),e===nt.ConnectionQuality.Poor&&n.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==n.identity&&"RTMP_BOT"!==n.identity&&(0,c.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);ze.dispatch(A({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(ze.dispatch(B(r)),ze.dispatch(ae(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),ze.dispatch(ie(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const _c=Sc;var jc=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;ze.dispatch(A({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.userId)&&ze.dispatch(ne(!0))},this.trackUnmuted=function(e,t){var n;ze.dispatch(A({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=ze.getState().session.currenUser)||void 0===n?void 0:n.userId)&&ze.dispatch(ne(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n.name)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,i,a,s;if((this.roomMetadata||(this.roomMetadata=ze.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=ze.getState().session.currenUser),t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===nt.Track.Source.Camera)&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(a=null===(i=this.currentUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===nt.Track.Source.ScreenShare||e.source===nt.Track.Source.ScreenShareAudio?(ze.dispatch(A({id:t.identity,changes:{screenShareTrack:1}})),ze.dispatch(U({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(ze.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===nt.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===nt.Track.Source.Microphone})).length}})),e.source===nt.Track.Source.Microphone?(this.that.updateAudioSubscribers(t),ze.dispatch(A({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):e.source===nt.Track.Source.Camera&&this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===nt.Track.Source.ScreenShare||e.source===nt.Track.Source.ScreenShareAudio?(ze.dispatch(A({id:t.identity,changes:{screenShareTrack:0}})),ze.dispatch(U({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(ze.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===nt.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===nt.Track.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===nt.Track.Source.Microphone?this.that.updateAudioSubscribers(t,!1):e.source===nt.Track.Source.Camera&&this.that.updateVideoSubscribers(t,!1))},e}();const kc=jc;var Tc=new TextDecoder,Ec=function(e){var t=this;this.dataReceived=function(e,n,r){var o;t.requestedParticipant=n;var i=Tc.decode(e);if(i){var a;try{a=JSON.parse(i)}catch(s){return}r===nt.DataPacket_Kind.RELIABLE&&"SYSTEM"===a.type&&((null===(o=ze.getState().session.currenUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(a.body))}},this.handleSystemTypeData=function(e){switch(e.type){case Mr.RAISE_HAND:case Mr.INFO:(0,c.Am)(m.t(e.msg),{type:"info"}),t.playNotification(e.type);break;case Mr.ALERT:(0,c.Am)(m.t(e.msg),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Mr.RAISE_HAND&&e!==Mr.ALERT||ze.dispatch(Ce(!0))},this.that=e};const Nc=Ec;var Rc=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){(0,lo.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),ze.dispatch(W(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r;if(!(null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=ze.getState().session.isActiveRecording;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)?(0,c.Am)(m.t("room-metadata.session-recording"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)&&(0,c.Am)(m.t("room-metadata.session-not-recording"),{type:"info"})}},this.showRTMPNotification=function(){var t,n,r;if(!(null===(t=ze.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=ze.getState().session.isActiveRtmpBroadcasting;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)?(0,c.Am)(m.t("room-metadata.rtmp-started"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)&&(0,c.Am)(m.t("room-metadata.rtmp-stopped"),{type:"info"})}},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if((0,lo.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};ze.dispatch(_e(o))}}};const Ac=Rc;var Cc=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(t.activeSpeakers=[],e.length){var n=ze.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,i,a;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var c={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(a=null===(i=e.lastSpokeAt)||void 0===i?void 0:i.getTime())&&void 0!==a?a:Date.now()};ze.dispatch(y(c)),t.activeSpeakers.push(c)}))}},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?ze.dispatch(S(t.activeSpeakers)):g.selectAll(ze.getState()).length&&ze.dispatch(w())}),1e3)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const Pc=Cc;var Fc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Oc=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ic=function(){function e(e,t,n,r,o,i){var a=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.url=window.LIVEKIT_SERVER_URL,this.connect=function(){return Fc(a,void 0,void 0,(function(){var e;return Oc(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),yi=ze.getState().session,Ni(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return Fc(a,void 0,void 0,(function(){var e,t,n=this;return Oc(this,(function(r){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,ze.dispatch(M({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){n.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===nt.Track.Source.ScreenShare||t.source===nt.Track.Source.ScreenShareAudio?(ze.dispatch(A({id:e.identity,changes:{screenShareTrack:1}})),ze.dispatch(U({isActive:!0,sharedBy:e.identity}))):n.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return Fc(a,void 0,void 0,(function(){return Oc(this,(function(e){return ze.dispatch(O(this.token)),ze.dispatch(D({sid:this._room.sid,room_id:this._room.name})),!(0,lo.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r=new nt.Room({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:nt.VideoPresets.hd.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n}});return r.on(nt.RoomEvent.Reconnecting,(function(){return a.roomConnectionStatusState("re-connecting")})),r.on(nt.RoomEvent.Reconnected,(function(){return a.roomConnectionStatusState("connected")})),r.on(nt.RoomEvent.Disconnected,a.onDisconnected),r.on(nt.RoomEvent.RoomMetadataChanged,a.handleRoomMetadata.setRoomMetadata),r.on(nt.RoomEvent.ActiveSpeakersChanged,a.handleActiveSpeakers.activeSpeakersChanged),r.on(nt.RoomEvent.MediaDevicesError,a.mediaDevicesError),r.on(nt.RoomEvent.DataReceived,a.handleDataMessages.dataReceived),r.on(nt.RoomEvent.ParticipantConnected,a.handleParticipant.participantConnected),r.on(nt.RoomEvent.ParticipantDisconnected,a.handleParticipant.participantDisconnected),r.on(nt.RoomEvent.ParticipantMetadataChanged,a.handleParticipant.setParticipantMetadata),r.on(nt.RoomEvent.ConnectionQualityChanged,a.handleParticipant.connectionQualityChanged),r.on(nt.RoomEvent.LocalTrackPublished,a.handleMediaTracks.localTrackPublished),r.on(nt.RoomEvent.LocalTrackUnpublished,a.handleMediaTracks.localTrackUnpublished),r.on(nt.RoomEvent.TrackSubscribed,a.handleMediaTracks.trackSubscribed),r.on(nt.RoomEvent.TrackUnpublished,a.handleMediaTracks.trackUnsubscribed),r.on(nt.RoomEvent.TrackSubscriptionFailed,a.handleMediaTracks.trackSubscriptionFailed),r.on(nt.RoomEvent.TrackMuted,a.handleMediaTracks.trackMuted),r.on(nt.RoomEvent.TrackUnmuted,a.handleMediaTracks.trackUnmuted),r.on(nt.RoomEvent.TrackStreamStateChanged,a.handleMediaTracks.trackStreamStateChanged),r},this.onDisconnected=function(){a.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),a.roomConnectionStatusState("disconnected"),ki&&(null===wi||void 0===wi||wi.close(),Ei=!0),a.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(a.tokenRenewInterval),a.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){a.tokenRenewInterval=setInterval((function(){var e=ze.getState().session.token,t={type:Ir.SYSTEM,message_id:"",room_sid:a._room.sid,room_id:a._room.name,body:{type:Mr.RENEW_TOKEN,from:{sid:a._room.localParticipant.sid,userId:a._room.localParticipant.identity},msg:e}};Bi(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?a._screenShareTracksMap.set(t.identity,e):a._screenShareTracksMap.delete(t.identity),a.screenShareTracksState(new Map(a._screenShareTracksMap))},this.updateScreenShareOnUserDisconnect=function(e){a._screenShareTracksMap.size&&a._screenShareTracksMap.has(e.identity)&&(a._screenShareTracksMap.delete(e.identity),a.screenShareTracksState(new Map(a._screenShareTracksMap)),a._screenShareTracksMap.size||ze.dispatch(U({isActive:!1,sharedBy:""})))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.identity?e.identity!==a._room.localParticipant.identity&&(t?a._audioSubscribersMap.set(e.identity,e):a._audioSubscribersMap.has(e.identity)&&a._audioSubscribersMap.delete(e.identity),a.audioSubscribersState(new Map(a._audioSubscribersMap)),ze.dispatch(H(a.audioSubscribersState.length))):console.log("participant.identity undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.identity)if(t?a._videoSubscribersMap.set(e.identity,e):a._videoSubscribersMap.has(e.identity)&&(console.log("removing..",e.identity),a._videoSubscribersMap.delete(e.identity)),ze.dispatch(G(a._videoSubscribersMap.size)),a._videoSubscribersMap.size<=1)a.videoSubscribersState(new Map(a._videoSubscribersMap));else{var n=Array.from(a._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=a._room.localParticipant)||void 0===t?void 0:t.identity)}));if(n.sort((function(e,t){var n,r,o,i,a,s,c,l,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(i=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==i?i:0)-f}return(null!==(s=null===(a=u.joinedAt)||void 0===a?void 0:a.getTime())&&void 0!==s?s:0)-(null!==(l=null===(c=d.joinedAt)||void 0===c?void 0:c.getTime())&&void 0!==l?l:0)})),a._room.localParticipant.getTracks().length){var r=[a._room.localParticipant.sid,a._room.localParticipant];n.unshift(r)}a.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.identity undefined")},this.token=ze.getState().session.token,this.audioSubscribersState=e,this.videoSubscribersState=t,this.screenShareTracksState=i,this.currentRoomState=n,this.errorState=r,this.roomConnectionStatusState=o,this.handleParticipant=new _c(this),this.handleMediaTracks=new kc(this),this.handleDataMessages=new Nc(this),this.handleRoomMetadata=new Ac,this.handleActiveSpeakers=new Pc(this),this.roomConnectionStatusState("connecting"),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const Mc=Ic;var Dc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Uc=function(){var e=Dc((0,i.useState)(),2),t=e[0],n=e[1],r=Dc((0,i.useState)(),2),o=r[0],a=r[1],s=Dc((0,i.useState)("loading"),2),c=s[0],l=s[1],u=Dc((0,i.useState)(),2),d=u[0],f=u[1],p=Dc((0,i.useState)(),2),m=p[0],v=p[1],h=Dc((0,i.useState)(),2),b=h[0],g=h[1];return{error:t,setError:n,roomConnectionStatus:c,setRoomConnectionStatus:l,currentRoom:o,audioSubscribers:d,videoSubscribers:m,screenShareTracks:b,startLivekitConnection:function(){new Mc(f,v,a,n,l,g)}}};var Lc=function(){return Lc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lc.apply(this,arguments)},Bc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Wc=(0,tt.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),Vc=(0,tt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Gc=i.memo((function(){var e,t=qe(),n=(0,i.useRef)(null),r=Xe(Wc),a=Xe(Vc),s=Bc((0,i.useState)(!1),2),c=s[0],l=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,i.useEffect)((function(){var e=n.current;r&&(!c&&a&&(null===e||void 0===e||e.play()),t(Ce(!1)))}),[r,c,a,t]),(0,i.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return l(!0)})),e.addEventListener("ended",(function(){return l(!1)}))),function(){e&&(e.pause(),e.src="",e.removeEventListener("playing",(function(){return l(!0)})),e.removeEventListener("ended",(function(){return l(!1)})))}}),[]),(0,o.jsx)("div",Lc({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")})}))}));var Hc=function(){return Hc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hc.apply(this,arguments)},zc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},qc=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Jc=function(){var e=qe(),t=Uc(),n=t.error,r=t.setError,a=t.roomConnectionStatus,s=t.setRoomConnectionStatus,c=t.currentRoom,l=t.audioSubscribers,u=t.videoSubscribers,d=t.screenShareTracks,f=t.startLivekitConnection,p=Xc((0,i.useState)(!0),2),m=p[0],v=p[1],h=Xc((0,i.useState)(!1),2),b=h[0],g=h[1],x=Xc((0,i.useState)(""),2),y=x[0],w=x[1],S=Xc((0,i.useState)("landscape-device"),2),_=S[0],j=S[1],k=Xc((0,i.useState)(""),2),T=k[0],E=k[1],N=Xc((0,i.useState)("participant"),2),R=N[0],A=N[1],C=(0,i.useRef)(null),P=(0,$e.$)().t;fn(),hn(pt),(0,i.useEffect)((function(){var t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());if("undefined"===typeof n.access_token)v(!1),r({title:P("app.token-missing-title"),text:P("app.token-missing-des")});else{c||(s("checking"),zc(void 0,void 0,void 0,(function(){var t;return qc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Or("verifyToken",{})];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),s("ready"),v(!1),r({title:P("app.verification-failed-title"),text:P("app.token-not-valid")}),[2];case 3:return s("ready"),v(!1),t.status?e(O(n.access_token)):r({title:P("app.verification-failed-title"),text:P(t.msg)}),[2]}}))})))}}),[P,e,c,r,s]),(0,i.useEffect)((function(){v("connecting"===a||"re-connecting"===a||"checking"===a)}),[a]),(0,i.useEffect)((function(){var e,t;c&&("RECORDER_BOT"!==c.localParticipant.identity&&"RTMP_BOT"!==c.localParticipant.identity||g(!0),(null===(t=null===(e=ze.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin)&&A("admin"))}),[c]),(0,i.useEffect)((function(){window.onresize=function(){e(me(window.innerWidth)),e(ve(window.innerHeight)),F();var t=ze.getState().bottomIconsActivity.isActiveChatPanel,n=ze.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&t&&n&&e(ie(!1))},e(me(window.innerWidth)),e(ve(window.innerHeight)),window.innerWidth<1024&&(e(ie(!1)),e(oe(!1)));var t="is-pc",n=new(Ye())(window.navigator.userAgent);n.mobile()?(t="is-mobile ",e(q("mobile"))):n.tablet()&&(t="is-tablet ",e(q("tablet")));var r=n.os();"AndroidOS"===r?t+="is-android":"iOS"!==r&&"iPadOS"!==r||(t+="is-ios"),w(t);var o=window.matchMedia("(orientation: portrait)");o.matches&&j("portrait-device"),o.addEventListener("change",(function(e){e.matches?j("portrait-device"):j("landscape-device")}))}),[e]),(0,i.useEffect)((function(){F()}),[null===c||void 0===c?void 0:c.state]);var F=function(){var e=C.current;e&&E("".concat(e.clientHeight,"px"))},I=function(){f()};return(0,o.jsx)("div",Hc({className:"".concat(_," ").concat(y," ").concat(R),style:{height:T}},{children:m?(0,o.jsx)(et,{text:P("app."+a)}):n&&!m?(0,o.jsx)(Qe,{title:n.title,text:n.text}):"connected"===(null===c||void 0===c?void 0:c.state)?c?(0,o.jsxs)("div",Hc({className:"plugNmeet-app overflow-hidden",ref:C},{children:[b?null:(0,o.jsx)(li,{currentRoom:c}),(0,o.jsx)(bc,{currentRoom:c,audioSubscribers:l,videoSubscribers:u,screenShareTracks:d,isRecorder:b}),b?null:(0,o.jsx)(Wo,{currentRoom:c}),(0,o.jsx)(Gc,{})]})):null:"ready"===a?(0,o.jsx)(wc,{onCloseModal:I}):null}))};var Yc=function(){return Yc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yc.apply(this,arguments)};a.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsxs)(s.zt,Yc({store:ze},{children:[(0,o.jsx)(i.Suspense,Yc({fallback:(0,o.jsx)(et,{text:""})},{children:(0,o.jsx)(Jc,{})})),(0,o.jsx)(c.Ix,{})]}))}),document.getElementById("plugNmeet-app"))},75410:()=>{},48628:()=>{},55778:()=>{},73908:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}},e=>{e.O(0,[736],(()=>{return t=19747,e(e.s=t);var t}));e.O()}]);